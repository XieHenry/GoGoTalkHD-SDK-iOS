webpackJsonp([2,0],{0:function(e,t,a){e.exports=a(279)},10:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};a.Document=TK.EventDispatcher({}),a.Window=TK.EventDispatcher({}),a.Element=TK.EventDispatcher({}),a.Room=TK.EventDispatcher({}),a.Stream=TK.EventDispatcher({}),a.Role=TK.EventDispatcher({}),t.default=a,e.exports=t.default},12:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(19),i=n(r);window.GLOBAL=window.GLOBAL||{};var o=window.GLOBAL;o.classBegin=!1,o.endClassBegin=!1,o.routeName=void 0,o.playback=!1,o.playPptVideoing=!1,o.playMediaFileing=!1,o.serviceTime=void 0,o.firstGetServiceTime=!1,o.isHandleMsglist=!1,o.remindServiceTime=void 0,o.classBeginTime=void 0,o.isSkipPageing=!1,o.isClient=!1,o.isBroadcast=!1,o.mobileDeviceType=void 0,o.windowInnerWidth=window.innerWidth,o.windowInnerHeight=window.innerHeight;var s=i.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+JSON.stringify(s)),o.isMobile=s.versions.mobile||s.versions.ios||s.versions.android||s.versions.iPhone||s.versions.iPad,o.isBroadcastClient=o.isClient&&o.isBroadcast,o.isBroadcastMobile=o.isMobile&&o.isBroadcast,o.languageName="ch"===i.default.getUrlParams("languageType")?"chinese":"tw"===i.default.getUrlParams("languageType")?"complex":"english",o.defaultFileInfo={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0},t.default=o,e.exports=t.default},18:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(19),i=n(r),o=a(10),s=n(o),l=a(12),d=(n(l),{}),c="v2.1.0",u="2017120622",h=!1;try{c="2.1.0",u=2017120622,h=!1}catch(e){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}d.VERSIONS=c,d.VERSIONSTIME=u,d.newpptVersions=2017091401,d.remoteNewpptUpdateTime=201712062201,d.debugFromAddress=!!i.default.getUrlParams("debug")&&""!=i.default.getUrlParams("debug"),d.DEV=h||d.debugFromAddress,d.role={},Object.defineProperties(d.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var p={};Object.defineProperties(p,{roomConnected:{value:"room-connected",writable:!1,enumerable:!0},roomParticipantJoin:{value:"room-participant_join",writable:!1,enumerable:!0},roomParticipantLeave:{value:"room-participant_leave",writable:!1,enumerable:!0},roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomUserpropertyChanged:{value:"room-userproperty-changed",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomMsglist:{value:"room-msglist",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomTransmitWindowSize:{value:"transmitWindowSize",writable:!1,enumerable:!0}});var g={};Object.defineProperties(g,{onResize:{value:"onResize",writable:!1}}),Object.defineProperties(g,{onMessage:{value:"onMessage",writable:!1}});var m={};Object.defineProperties(m,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),d.EVENTTYPE={},Object.defineProperties(d.EVENTTYPE,{RoomEvent:{value:p,writable:!1},WindowEvent:{value:g,writable:!1},DocumentEvent:{value:m,writable:!1}}),d.ROOMTYPE={},Object.defineProperties(d.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),d.PUBLISHSTATE={},Object.defineProperties(d.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),d.STANDARDSIZE=15.8,d.companyidToCompanyName={10035:{value:"icoachu",writable:!1,enumerable:!0},10036:{value:"stupidBird",writable:!1,enumerable:!0},10059:{value:"17zuoye",writable:!1,enumerable:!0}},d.LOGLEVEL={},Object.defineProperties(d.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),d.SERVICEINFO={},d.bindServiceinfoToTkConstant=function(e,t,a){var n=arguments.length<=3||void 0===arguments[3]||arguments[3],r=TK.global.initPageParameterFormPhone.serviceUrl.address.split("://");e=e||r[0],t=t||r[1],a=a||TK.global.initPageParameterFormPhone.serviceUrl.port;var o={protocol:e,hostname:t,port:a,sdkPort:443,protocolAndHostname:e+"://"+t,address:e+"://"+t+":"+a};n&&(o.joinUrl=i.default.encrypt(window.location.href)),Object.assign(d.SERVICEINFO,o),n&&console.info("encrypt_tk_info:\n",d.SERVICEINFO.joinUrl),s.default&&s.default.CoreController&&s.default.CoreController.dispatchEvent&&s.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:d.SERVICEINFO}})},d.joinRoomInfo={},d.bindRoomInfoToTkConstant=function(e){return e?(L.Logger.debug("joinRoomInfo:",e),d.joinRoomInfo=e,void s.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:d.joinRoomInfo}})):void L.Logger.error("joinRoomInfo is not exist!")},d.hasRole={},d.bindParticipantHasRoleToTkConstant=function(){return d.joinRoomInfo?(Object.defineProperties(d.hasRole,{roleChairman:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleChairman,writable:!1},roleTeachingAssistant:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleTeachingAssistant,writable:!1},roleStudent:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleStudent,writable:!1},roleAudit:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.roleAudit,writable:!1},rolePatrol:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePatrol,writable:!1},rolePlayback:{value:d.joinRoomInfo&&d.joinRoomInfo.roomrole===d.role.rolePlayback,writable:!1}}),void s.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:d.hasRole}})):void L.Logger.error("TkConstant.joinRoomInfo is not exist!")},d.hasRoomtype={},d.bindParticipantHasRoomtypeToTkConstant=function(){return d.joinRoomInfo?(Object.defineProperties(d.hasRoomtype,{oneToOne:{value:d.joinRoomInfo&&d.joinRoomInfo.roomtype===d.ROOMTYPE.oneToOne,writable:!1}}),void s.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:d.hasRoomtype}})):void L.Logger.error("TkConstant.joinRoomInfo is not exist!")},window.TkConstant=d,t.default=d,e.exports=t.default},19:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return e},isFullscreenEnabled:function(){var e=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled;return e},runPrefixMethod:function(e,t){var a=void 0;return["webkit","moz","ms","o",""].forEach(function(n){if(!a){""===n&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var r=typeof e[n+t];r+""!="undefined"&&(a="function"===r?e[n+t]():e[n+t])}}),a},addFullscreenchange:function(e){r.tool.addEvent(document,"fullscreenchange",e,!1),r.tool.addEvent(document,"webkitfullscreenchange",e,!1),r.tool.addEvent(document,"mozfullscreenchange",e,!1),r.tool.addEvent(document,"MSFullscreenChange",e,!1),r.tool.addEvent(document,"msfullscreenchange",e,!1),r.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){r.tool.removeEvent(document,"fullscreenchange",e,!1),r.tool.removeEvent(document,"webkitfullscreenchange",e,!1),r.tool.removeEvent(document,"mozfullscreenchange",e,!1),r.tool.removeEvent(document,"MSFullscreenChange",e,!1),r.tool.removeEvent(document,"msfullscreenchange",e,!1),r.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){r.tool.addEvent(document,"fullscreenerror",e,!1),r.tool.addEvent(document,"webkitfullscreenerror",e,!1),r.tool.addEvent(document,"mozfullscreenerror",e,!1),r.tool.addEvent(document,"MSFullscreenError",e,!1),r.tool.addEvent(document,"msfullscreenerror",e,!1),r.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){r.tool.removeEvent(document,"fullscreenerror",e,!1),r.tool.removeEvent(document,"webkitfullscreenerror",e,!1),r.tool.removeEvent(document,"mozfullscreenerror",e,!1),r.tool.removeEvent(document,"MSFullscreenError",e,!1),r.tool.removeEvent(document,"msfullscreenerror",e,!1),r.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}var a=document.createEvent("HTMLEvents");return a.initEvent(t,!0,!0),!e.dispatchEvent(a)},autoElementPositionCneter:function(e){e.css({"margin-left":-e.width()/2+"px","margin-top":-e.height()/2+"px"})},clearElementPositionCneter:function(e){e.css({"margin-left":"","margin-top":""})}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),a=this.hexadecimal(this.getGUIDTime(),16),n=0;n<9;n++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=a;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,a){return void 0!=a?parseInt(e.toString(),a).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){var t=e.slice(0,8)+"-",a=e.slice(8,12)+"-",n=e.slice(12,16)+"-",r=e.slice(16,20)+"-",i=e.slice(20);return t+a+n+r+i})}return new e},getNewGUID:function(){r.guidObj||(r.guidObj=new r.getGUID);var e=r.guidObj.newGUID();return r.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,a=/(firefox)\/([\w.]+)/,n=/(opera).+version\/([\w.]+)/,r=/(chrome)\/([\w.]+)/,i=/version\/([\w.]+).*(safari)/,o=function(e){var o=t.exec(e);return null!=o?{browser:"IE",version:o[2]||"0"}:(o=a.exec(e),null!=o?{browser:o[1]||"",version:o[2]||"0"}:(o=n.exec(e),null!=o?{browser:o[1]||"",version:o[2]||"0"}:(o=r.exec(e),null!=o?{browser:o[1]||"",version:o[2]||"0"}:(o=i.exec(e),null!=o?{browser:o[2]||"",version:o[1]||"0"}:null!=o?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"}))))},s=o(e.toLowerCase()),l={versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:s.browser,browserVersion:s.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}};return l},isEmpty:function(e){var t=Object.keys(e);return 0===t.length},getUrlParams:function(e,t){var a=window.location.href;window.TkConstant&&(a=r.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),a=t||a;var n=decodeURIComponent(a),i=n.indexOf("?"),o=n.substring(i+1),s=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),l=o.match(s);return null!=l?l[2]:""},replaceFirstUper:function(e){if(e.length>0){var t=e.substring(0,1).toUpperCase(),a=e.substring(1),n=t+a;return n}},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=r;if(e&&!t.isArray(e)&&"object"==typeof e){var a={},i=!0,o=!1,s=void 0;try{for(var l,d=Object.entries(e)[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var c=n(l.value,2),u=c[0],h=c[1];/^data-/g.test(u)&&(a[u]=h)}}catch(e){o=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(o)throw s}}return a}return e},getFiletyeByFilesuffix:function(e){var t=void 0;return t="jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){var t={disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand};return t},getTimeDifferenceToFormat:function(e,t){var a=t-e;if(a>=0){var n=Math.floor(a/864e5),r=a%864e5,i=Math.floor(r/36e5),o=r%36e5,s=Math.floor(o/6e4),l=o%6e4,d=Math.round(l/1e3),c=i+24*n,u={};return d>=60&&(d=0,s+=1),s>=60&&(s=0,c+=1),u.hh=c>9?c:"0"+c,u.mm=s>9?s:"0"+s,u.ss=d>9?d:"0"+d,u}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a||r.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var a=!1;try{a=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(a=!1,a||r.getUrlParams("debug"))return e}return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,a="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(a)return"Mac";var n="X11"===navigator.platform&&!t&&!a;if(n)return"Unix";var r=String(navigator.platform).indexOf("Linux")>-1;if(r)return"Linux";if(t){var i=e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1;if(i)return"Win2000";var o=e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1;if(o)return"WinXP";var s=e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1;if(s)return"Win2003";var l=e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1;if(l)return"WinVista";var d=e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1;if(d)return"Win7";var c=e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1;if(c)return"Win8";var u=e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1;if(u)return"Win10"}return"Other"},internetSpeedTest:function(){},percentageChangeToRem:function(e,t,a,n){var r=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(n),o=i.clientWidth,s=i.clientHeight,l=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight;return e.state[n].left=t*(l-o)/r,e.state[n].top=a*(d-s)/r,e.state[n]},RemChangeToPercentage:function(e,t,a,n){var r=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,i=document.getElementById(n),o=i.clientWidth,s=i.clientHeight,l=window.GLOBAL.windowInnerWidth,d=window.GLOBAL.windowInnerHeight,c=t/(l-o)*r,u=a/(d-s)*r;return{percentLeft:c,percentTop:u}},controlDragBounds:function(e,t,a){var n=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,r=document.getElementById(t),i=r.clientWidth/n,o=r.clientHeight/n,s=document.getElementById(a),l=s.clientWidth/n,d=s.clientHeight/n;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>l-i?l-i:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-o?d-o:e.state[t].top,e.state[t]}};t.default=r,e.exports=t.default},20:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(10),o=r(i),s=a(273),l=r(s),d=a(18),c=r(d),u=a(12),h=r(u),p=a(19),g=r(p),m=a(118),f=r(m),v=a(116),b=r(v),y=a(22),S=r(y),T=TK.EventDispatcher({});o.default.CoreController=T,T.handler={},T.handler.loadSystemRequiredInfo=function(){if(document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},TK.tkLogPrintConfig)if(c.default.DEV){var e={debug:!0},t={development:!0,logLevel:c.default.LOGLEVEL.DEBUG},a={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,a)}else{var e={debug:!1},t={development:!1,logLevel:c.default.LOGLEVEL.INFO},a={webrtcLogDebug:!1};TK.tkLogPrintConfig(e,t,a)}b.default.getAppLanguageInfo(function(e){h.default.language=e}),S.default.setTkRoom(TK.Room()),l.default.registerEventToRoom()},T.handler.setAppPermissions=function(e,t){f.default.setAppPermissions(e,t)},T.handler.getAppPermissions=function(e){return f.default.getAppPermissions(e)},T.handler.initAppPermissions=function(e){f.default.initAppPermissions(e)},T.handler.addEventListenerOnCoreController=function(){n(window).off("resize"),n(window).resize(function(){var e=document.getElementById("tk_app");e?(h.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,h.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(h.default.windowInnerWidth=window.innerWidth,h.default.windowInnerHeight=window.innerHeight);var t=h.default.windowInnerWidth/c.default.STANDARDSIZE,a=document.getElementById("all_root")||document.getElementsByTagName("html");if(a){var n=g.default.isArray(a)?a[0]:a;n&&n.style&&(n.style.fontSize=t+"px")}o.default.Window.dispatchEvent({type:c.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:t}})}),n(window).resize();var e=function(e){o.default.Window.dispatchEvent({type:c.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};g.default.tool.removeEvent(window,"message",e),g.default.tool.addEvent(window,"message",e,!1),n(document).off("keydown"),n(document).keydown(function(e){e=e||window.event,o.default.Document.dispatchEvent({type:c.default.EVENTTYPE.DocumentEvent.onKeydown,message:{keyCode:e.keyCode}})});var t=function(e){o.default.Document.dispatchEvent({type:c.default.EVENTTYPE.DocumentEvent.onFullscreenchange,message:{event:e}})};g.default.tool.removeFullscreenchange(t),g.default.tool.addFullscreenchange(t),"mobile"===TK.SDKTYPE&&T.handler.addEventfRromMobileUICoreEventManager()},T.handler.addEventfRromMobileUICoreEventManager=function(){"mobile"===TK.SDKTYPE&&(TK.mobileUICoreEventManager.addEventListener("mobileSdk_closeDynamicPptWebPlay",function(e){o.default.CoreController.dispatchEvent(e)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_setInitPageParameterFormPhone",function(e){var t=e.message;void 0!==t.deviceType&&(h.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",o.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),c.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!0)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_changeInitPageParameterFormPhone",function(e){var t=e.message;void 0!==t.deviceType&&(h.default.mobileDeviceType=0===TK.global.initPageParameterFormPhone.deviceType?"phone":"pad",o.default.CoreController.dispatchEvent({type:"updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone"})),void 0!==t.serviceUrl&&c.default.bindServiceinfoToTkConstant(void 0,void 0,void 0,!1)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_fullScreenChangeCallback",function(e){o.default.CoreController.dispatchEvent(e)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_changeDynamicPptSize",function(e){o.default.CoreController.dispatchEvent(e)}),TK.mobileUICoreEventManager.addEventListener("mobileSdk_playbackPlayAndPauseController",function(e){var t=Object.assign({},e);t.type="playbackControl_play_pause",o.default.CoreController.dispatchEvent(t)}))},T.handler.addEventListenerOnCoreController(),t.default=T,e.exports=t.default}).call(t,a(32))},22:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=void 0,t=void 0,a=void 0,n=void 0,r=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return n},this.setLocalStream=function(e){n=e},this.getUserName=function(){return a},this.setUserName=function(e){a=e},this.getUserThirdid=function(){return r},this.setUserThirdid=function(e){r=e},this.clearAll=function(){e=null,t=null,a=null,n=null,r=null}};t.default=new a,e.exports=t.default},24:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(270),d=n(l),c=a(22),u=n(c),h=a(19),p=(n(h),a(18)),g=(n(p),a(20)),m=n(g),f=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return i(t,e),o(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(m.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,a=!1,n="UpdateTime",r=e||"__all",i={},o="UpdateTime",s=!0;t.sendSignallingDataToParticipant(a,o,n,r,i,s)}}},{key:"sendSignallingFromSharpsChange",value:function(e,t,a,n,r,i,o,s,l){if(m.default.handler.getAppPermissions("sendSignallingFromSharpsChange")){var d=this;e&&(i=!0),d.sendSignallingDataToParticipant(e,t,a,n,r,i,o,s,l)}}},{key:"sendSignallingFromWBPageCount",value:function(e){if(m.default.handler.getAppPermissions("sendSignallingFromWBPageCount")){var t=this,a="WBPageCount",n="WBPageCount",r=void 0,i=!1,o="__allExceptSender";t.sendSignallingDataToParticipant(i,a,n,o,e,r)}}},{key:"sendSignallingFromShowPage",value:function(e,t,a){var n=arguments.length<=3||void 0===arguments[3]?"__all":arguments[3];if(m.default.handler.getAppPermissions("sendSignallingFromShowPage")){if(!a)return void L.Logger.error("sendSignallingFromShowPage data is not exist!");if(a&&"string"==typeof a&&(a=JSON.parse(a)),(!a.isDynamicPPT||m.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage"))&&(!a.isH5Document||m.default.handler.getAppPermissions("sendSignallingFromH5ShowPage"))&&(!a.isGeneralFile||m.default.handler.getAppPermissions("sendSignallingFromGeneralShowPage"))){var r=this,i="ShowPage";r.sendSignallingDataToParticipant(e,i,t,n,a)}}}},{key:"sendSignallingFromDynamicPptTriggerActionClick",value:function(e){if(m.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")){var t=this,a="NewPptTriggerActionClick",n="NewPptTriggerActionClick",r="__allExceptSender",i=!1,o=!1;t.sendSignallingDataToParticipant(i,a,n,r,e,o)}}},{key:"sendSignallingFromH5DocumentAction",value:function(e){if(m.default.handler.getAppPermissions("sendSignallingFromH5DocumentAction")){var t=this,a="H5DocumentAction",n="H5DocumentAction",r="__allExceptSender",i=!1,o=!1;t.sendSignallingDataToParticipant(i,a,n,r,e,o)}}},{key:"sendSignallingFromVideoDraghandle",value:function(e,t){if(m.default.handler.getAppPermissions("sendSignallingFromVideoDraghandle")){var a=this,n="videoDraghandle",r="videoDraghandle",i=!1,o=!1;t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o)}}},{key:"sendMarkToolMouseIsSelect",value:function(e,t,a){if(m.default.handler.getAppPermissions("sendWhiteboardMarkTool")){var n=this,r={selectMouse:e};t&&(r.selectElementLiId=t),a&&(r.selectElementId=a);var i="whiteboardMarkTool",o="whiteboardMarkTool",s="__allExceptSender",l=!1;n.sendSignallingDataToParticipant(l,i,o,s,r)}}},{key:"sendSignallingFromBlackBoard",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(m.default.handler.getAppPermissions("sendSignallingFromBlackBoard")){var a="BlackBoard",n="BlackBoard",r="__all";this.sendSignallingDataToParticipant(t,a,n,r,e)}}},{key:"sendSignallingTimerToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!m.default.handler.getAppPermissions("sendSignallingTimerToStudent"))return!1;var a=this,n="timerMesg",r="timer",i="__all";a.sendSignallingDataToParticipant(t,r,n,i,e)}},{key:"sendSignallingFromBlackBoardDrag",value:function(e,t){if(m.default.handler.getAppPermissions("sendSignallingFromBlackBoardDrag")){var a=this,n="BlackBoardDrag",r="BlackBoardDrag",i=!1,o=!1,s="BlackBoard";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o,void 0,s)}}},{key:"sendSignallingDialToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(m.default.handler.getAppPermissions("sendSignallingDialToStudent")){var a="dial",n="dialMesg",r="__all";this.sendSignallingDataToParticipant(t,a,n,r,e)}}},{key:"sendSignallingAnswerToStudent",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!m.default.handler.getAppPermissions("sendSignallingAnswerToStudent"))return!1;var a=this,n="answerMesg",r="answer",i="__all";a.sendSignallingDataToParticipant(t,r,n,i,e)}},{key:"sendSignallingDataStudentToTeacherAnswer",value:function(e,t){if(!m.default.handler.getAppPermissions("sendSignallingDataStudentToTeacherAnswer"))return!1;var a=this,n="submitAnswers",r="__all",i="answerMesg",o="submitAnswers_"+u.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,n,o,r,t,void 0,void 0,i)}},{key:"sendSignallingQiangDaQi",value:function(e,t){if(!m.default.handler.getAppPermissions("sendSignallingQiangDaQi"))return!1;var a=this,n="qiangDaQi",r="__all",i="qiangDaQiMesg";a.sendSignallingDataToParticipant(e,n,i,r,t)}},{key:"sendSignallingQiangDaZhe",value:function(e,t){if(!m.default.handler.getAppPermissions("sendSignallingQiangDaZhe"))return!1;var a=this,n="QiangDaZhe",r="__all",i="qiangDaQiMesg",o="QiangDaZhe_"+u.default.getTkRoom().getMySelf().id;a.sendSignallingDataToParticipant(e,n,o,r,t,void 0,void 0,i)}},{key:"sendSignallingFromDialDrag",value:function(e,t){if(m.default.handler.getAppPermissions("sendSignallingFromDialDrag")){var a=this,n="DialDrag",r="DialDrag",i=!1,o=!1,s="dialMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o,void 0,s)}}},{key:"sendSignallingFromResponderDrag",value:function(e,t){if(m.default.handler.getAppPermissions("isSendSignallingFromResponderDrag")){var a=this,n="ResponderDrag",r="ResponderDrag",i=!1,o=!1,s="qiangDaQiMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o,void 0,s)}}},{key:"sendSignallingFromTimerDrag",value:function(e,t){if(m.default.handler.getAppPermissions("isSendSignallingFromTimerDrag")){var a=this,n="TimerDrag",r="TimerDrag",i=!1,o=!1,s="timerMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o,void 0,s)}}},{key:"sendSignallingFromAnswerDrag",value:function(e,t){if(m.default.handler.getAppPermissions("isSendSignallingFromAnswerDrag")){var a=this,n="AnswerDrag",r="AnswerDrag",i=!1,o=!1,s="answerMesg";t=t||"__allExceptSender",a.sendSignallingDataToParticipant(i,n,r,t,e,o,void 0,s)}}}]),t}(d.default),v=new f;t.default=v,e.exports=t.default},115:function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();String.prototype.colorHex=function(){var e=this,t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(e)){for(var a=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),n="#",r=0;r<a.length;r++){var i=Number(a[r]).toString(16);"0"===i&&(i+=i),n+=i}return 7!==n.length&&(n=e),n}if(!t.test(e))return e;var o=e.replace(/#/,"").split("");if(6===o.length)return e;if(3===o.length){for(var s="#",r=0;r<o.length;r+=1)s+=o[r]+o[r];
return s}},String.prototype.colorRgb=function(){var e=this.toLowerCase(),t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(4===e.length){for(var a="#",n=1;n<4;n+=1)a+=e.slice(n,n+1).concat(e.slice(n,n+1));e=a}for(var r=[],n=1;n<7;n+=2)r.push(parseInt("0x"+e.slice(n,n+2)));return"RGB("+r.join(",")+")"}return e};var i={addEvent:function(e,t,a,n){n=void 0!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,a,n):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},removeEvent:function(e,t,a,n){e.addEventListener?e.removeEventListener(t,a,n):e.attachEvent?e.detachEvent("on"+t,a):e["on"+t]=null},getOffset:function(e){for(var t={left:e.offsetLeft,top:e.offsetTop};e!=document.body;)e=e.offsetParent,t.left+=e.offsetLeft,t.top+=e.offsetTop;return t}},o=function(){function e(){a(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,watermarkImageScalc:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!1,saveUndoStack:!0},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={},this.basicTemplateWhiteboardSignallingChildrenStackStorage={}}return r(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){var t=this;/^tool_/.test(e)&&(t.commonActiveTool=e);var a=!0,n=!1,r=void 0;try{for(var i,o=Object.values(t.whiteboardInstanceStore)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;if(!s.proprietaryTools){var l=s.id;t.activeWhiteboardTool(e,l)}}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"==typeof e&&Object.assign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"==typeof e&&Object.assign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType||"changeZoomEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,a);else{var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var r=n.split("_"),i=r[1],o=r[2],s=this.getWhiteboardFiledata(t);s.fileid==i&&s.currpage==o?this._receiveSnapshot(e,a):null==a.waitingProcessShapeData[n]||void 0==a.waitingProcessShapeData[n]?(a.waitingProcessShapeData[n]=[],a.waitingProcessShapeData[n].push(e)):a.waitingProcessShapeData[n].push(e)}}}}},{key:"handlerDelmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"delmsg");var t=e.data.whiteboardID,a=this._getWhiteboardInstanceById(t);if(!a)return e.source="delmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var r=n.split("_"),i=r[1],o=r[2],s=this.getWhiteboardFiledata(t);e.source="delmsg",s.fileid==i&&s.currpage==o?this._receiveSnapshot(e,a):null==a.waitingProcessShapeData[n]||void 0==a.waitingProcessShapeData[n]?(a.waitingProcessShapeData[n]=[],a.waitingProcessShapeData[n].push(e)):a.waitingProcessShapeData[n].push(e)}}}},{key:"handlerMsglist_SharpsChange",value:function(e){for(var t=0;t<e.length;t++){var a=e[t];a.data&&"string"==typeof a.data&&(a.data=JSON.parse(a.data)),void 0!==a.data.whiteboardID&&void 0!==a.data.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID]&&this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]&&(this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]=null,delete this.basicTemplateWhiteboardSignallingChildrenStackStorage[a.data.dependenceBaseboardWhiteboardID][a.data.whiteboardID]),this._saveBasicTemplateWhiteboardSignallingData(a,"msglist");var n=a.data.whiteboardID,r=this._getWhiteboardInstanceById(n);if(r){if(null!=a.data&&("shapeSaveEvent"===a.data.eventType||"clearEvent"===a.data.eventType||"redoEvent"===a.data.eventType||"changeZoomEvent"===a.data.eventType)){a.source="msglist";var i=a.id.substring(a.id.lastIndexOf("###_")+4);null==r.waitingProcessShapeData[i]||void 0==r.waitingProcessShapeData[i]?(r.waitingProcessShapeData[i]=[],r.waitingProcessShapeData[i].push(a)):r.waitingProcessShapeData[i].push(a)}}else a.source="msglist",this.awaitSaveToWhiteboardInstanceSignallingArray.push(a)}}},{key:"preloadWhiteboardImg",value:function(e,t){if(!e)return void L.Logger.warning("preload img url is not esixt!");var a=new Image;a.onload=function(){t&&"function"==typeof t&&t()},a.src=e}},{key:"productionWhiteboard",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.whiteboardElementId,a=e.thumbnailId,n=e.productionOptions,r=void 0===n?{}:n,i=e.handler,o=void 0===i?{}:i,s=e.id,l=this;if(!t)return void L.Logger.error("whiteboardElementId is required!");var d=l._getWhiteboardInstanceID(s),c=l._getWhiteboardInstanceByID(d);if(c)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+d+") fails, the whiteboard already exists!"),c;c={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),c;var h=document.createElement("div"),p=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=p,u.appendChild(h),r=Object.assign({},l.defaultProductionOptions,r),l.whiteboardInstanceStore[d]=c,c.filedata=r.filedata||{},c.baseWhiteboardWidth=r.baseWhiteboardWidth,c.whiteboardInstanceID=d,c.parcelAncestorElementId=r.parcelAncestorElementId,c.isBaseboard=r.isBaseboard,c.needLooadBaseboard=r.needLooadBaseboard,c.dependenceBaseboardWhiteboardID=r.dependenceBaseboardWhiteboardID,c.watermarkImageScalc=r.watermarkImageScalc,c.whiteboardMagnification=r.whiteboardMagnification,c.associatedMsgID=r.associatedMsgID,c.associatedUserID=r.associatedUserID,c.proprietaryTools=r.proprietaryTools,c.minHeight=r.minHeight,c.rotateDeg=r.rotateDeg,c.deawPermission=r.deawPermission,c.tempDeawPermission=r.tempDeawPermission,c.nickname=r.nickname,c.userid=r.userid,c.whiteboardToolsInfo=Object.assign({},l.whiteboardToolsInfo),r.primaryColor&&(c.whiteboardToolsInfo.primaryColor=r.primaryColor),r.secondaryColor&&(c.whiteboardToolsInfo.secondaryColor=r.secondaryColor),r.backgroundColor&&(c.whiteboardToolsInfo.backgroundColor=r.backgroundColor),c.saveRedoStack=r.saveRedoStack,c.saveUndoStack=r.saveUndoStack,c.imageThumbnailId=r.imageThumbnailId,c.imageThumbnailTipContent=r.imageThumbnailTipContent,c.registerWhiteboardToolsList={},c.stackStorage={},c.handler={},c.handler.sendSignallingToServer=o.sendSignallingToServer,c.handler.delSignallingToServer=o.delSignallingToServer,c.handler.resizeWhiteboardSizeCallback=o.resizeWhiteboardSizeCallback,c.handler.noticeUpdateToolDescCallback=o.noticeUpdateToolDescCallback,c.active=!0,c.containerWidthAndHeight=r.containerWidthAndHeight,c.useToolKey=r.useToolKey,c.waitingProcessShapeData={},c.whiteboardElementId=t,c.whiteboardElement=u,c.whiteboardInstanceElementId=p,c.whiteboardInstanceElement=h,c.id=s,c.thumbnailId=a,c.lc=window.LC.init(c.whiteboardInstanceElement),c.lc.backingScale=1,c.lc.setColor("primary",c.whiteboardToolsInfo.primaryColor),c.lc.setColor("secondary",c.whiteboardToolsInfo.secondaryColor),c.lc.setColor("background",c.whiteboardToolsInfo.backgroundColor),c.lc.setZoom(1),c.lc.setPan(0,0),c.lc.on("shapeSave",l._handlerShapeSaveEvent.bind(l,c)),c.lc.on("undo",l._handlerUndoEvent.bind(l,c)),c.lc.on("redo",l._handlerRedoEvent.bind(l,c)),c.lc.on("clear",l._handlerClearEvent.bind(l,c)),c.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(l,c)),c.activeTool=void 0,r.whiteboardClear&&l.clearWhiteboardAllDataById(s),void 0!==c.dependenceBaseboardWhiteboardID&&void 0!==c.id&&l.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID]&&l.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]&&(c.isBaseboard||(c.stackStorage=Object.assign({},l.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id])),l.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]=null,delete l.basicTemplateWhiteboardSignallingChildrenStackStorage[c.dependenceBaseboardWhiteboardID][c.id]),l._changeWhiteboardDeawPermission(c.deawPermission,c),l._changeWhiteboardTemporaryDeawPermission(c.tempDeawPermission,c),l._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(c),l.activeWhiteboardTool(c.proprietaryTools?c.useToolKey?c.useToolKey:"tool_pencil":l.commonActiveTool,s),l._zoomIsDisable(c),l._actionIsDisable(c),l._noticeUpdateToolDesc(c),l._resizeWhiteboardHandler(c),c}},{key:"updateImageThumbnailId",value:function(e,t){var a=this._getWhiteboardInstanceById(e);return a?(a.imageThumbnailId=t,void this._saveImageBase64ToImageThumbnail(a)):void L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var a=t.saveRedoStack,n=t.saveUndoStack,r=this._getWhiteboardInstanceById(e);return r?(r.saveRedoStack=void 0!=a?a:r.saveRedoStack,void(r.saveUndoStack=void 0!=n?n:r.saveUndoStack)):void L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(n.isBaseboard=t):void L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(n.dependenceBaseboardWhiteboardID=t):void L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(n.associatedMsgID=t):void L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(n.associatedUserID=t):void L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return void 0!==a&&null!==a}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void t._clearWhiteboardAllDataByInstance(a):void L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){var t=this,a=t.specialWhiteboardInstanceIDPrefix+e;return a}},{key:"destroyWhiteboardInstance",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void t._destroyWhiteboardInstance(a):void L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void a._clearRedoAndUndoStack(n,t):void L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?(a.whiteboardMagnification=t.defaultProductionOptions.whiteboardMagnification,t._zoomIsDisable(a),void t._resizeWhiteboardHandler(a)):void L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(n.whiteboardMagnification=t):void L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScalc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.defaultProductionOptions.watermarkImageScalc:arguments[1],a=this._getWhiteboardInstanceById(e);return a?void this._updateWhiteboardWatermarkImageScalc(a,t):void L.Logger.error("[updateWhiteboardWatermarkImageScalc]There are no white board Numbers that belong to id "+e)}},{key:"setWhiteboardWatermarkImage",value:function(e,t){var a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=a.resetDedaultWhiteboardMagnification,r=void 0===n||n,i=this;L.Logger.debug("setWhiteboardWatermarkImage watermarkImageUrl:"+t);var o=i._getWhiteboardInstanceById(e);return o?(o.lc.watermarkImage=null,r&&i.resetDedaultWhiteboardMagnification(e),void(t?(i.showWhiteboardCanvasBackground(e),i._showWhiteboardLoading(o),clearTimeout(o.setWhiteboardWatermarkImageTimer),o.setWhiteboardWatermarkImageTimer=setTimeout(function(){var e=new Image;e.onload=function(){var t=e.width/e.height;o.lc.setWatermarkImage(e),i._resizeWhiteboardByScalc(o,{watermarkImage:e,watermarkImageScalc:t}),i._hideWhiteboardLoading(o)},e.src=t},150)):(i.hideWhiteboardCanvasBackground(e),o.lc.watermarkScale=1,i._resizeWhiteboardByScalc(o,{isChangeWatermarkScale:!1}),i._hideWhiteboardLoading(o),o.lc.watermarkImage=null,i._hideWhiteboardLoading(o)))):void L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){var t=this;if(void 0===e){var a=!0,n=!1,r=void 0;try{for(var i,o=Object.values(t.whiteboardInstanceStore)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;t._resizeWhiteboardHandler(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}else{var s=t._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);t._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.width,n=t.height,r=this,i=r._getWhiteboardInstanceById(e);return i?void 0===a||void 0===n?void L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+a+" , height:"+n+"]!"):(i.containerWidthAndHeight={width:a,height:n},void r._resizeWhiteboardHandler(i)):void L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void(a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="none")):void L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);return a?void(a.lc&&a.lc.backgroundCanvas&&(a.lc.backgroundCanvas.style.display="")):void L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this,a=t._getWhiteboardInstanceById(e);a&&a.whiteboardElement&&(a.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.fontSize,n=t.fontFamily,r=t.fontStyle,i=t.fontWeight,o=this,s=o._getWhiteboardInstanceById(e);return s?(s.whiteboardToolsInfo.fontSize=void 0!=a?a:s.whiteboardToolsInfo.fontSize,s.whiteboardToolsInfo.fontFamily=void 0!=n?n:s.whiteboardToolsInfo.fontFamily,s.whiteboardToolsInfo.fontStyle=void 0!=r?r:s.whiteboardToolsInfo.fontStyle,s.whiteboardToolsInfo.fontWeight=void 0!=i?i:s.whiteboardToolsInfo.fontWeight,void o._updateTextFont(s)):void L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.eraserWidth,n=this,r=n._getWhiteboardInstanceById(e);return r?(r.whiteboardToolsInfo.eraserWidth=void 0!=a?a:r.whiteboardToolsInfo.eraserWidth,void n._updateEraserWidth(r)):void L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.pencilWidth,n=this,r=n._getWhiteboardInstanceById(e);return r?(r.whiteboardToolsInfo.pencilWidth=void 0!=a?a:r.whiteboardToolsInfo.pencilWidth,void n._updatePencilWidth(r)):void L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var a=this,n=a._getWhiteboardInstanceById(e);return n?void(t&&"object"==typeof t&&Object.assign(n.whiteboardToolsInfo,t)):void L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.shapeWidth,n=this,r=n._getWhiteboardInstanceById(e);return r?(r.whiteboardToolsInfo.shapeWidth=void 0!=a?a:r.whiteboardToolsInfo.shapeWidth,void n._updateShapeWidth(r)):void L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){var a=this;if(t&&"object"==typeof t){var r=a._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var i=!0,o=!1,s=void 0;try{for(var l,d=Object.entries(t)[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var c=n(l.value,2),u=c[0],h=c[1];r.whiteboardToolsInfo[u+"Color"]=h}}catch(e){o=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(o)throw s}}a._updateColor(r,t)}}},{key:"activeWhiteboardTool",value:function(e,t){var a=this;if(void 0===a.useWhiteboardTool[e])return void L.Logger.error("The whiteboard does not have the "+e+" tool!");if(void 0===t||null===t)return void L.Logger.error("[activeWhiteboardTool]id is undefined or null ");var n=a._getWhiteboardInstanceById(t);if(!n)return void L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t);if(/^tool_/.test(e))if(n.activeTool=e,a._setWhiteboardTools(e,n),a._handlerActiveToolLaser(e,n),"tool_text"==e?a._updateTextFont(n):"tool_eraser"==e?a._updateEraserWidth(n):"tool_pencil"==e||"tool_highlighter"==e||"tool_line"==e||"tool_arrow"==e||"tool_dashed"==e?a._updatePencilWidth(n):"tool_rectangle"!=e&&"tool_rectangle_empty"!=e&&"tool_ellipse"!=e&&"tool_ellipse_empty"!=e&&"tool_polygon"!=e||a._updateShapeWidth(n),"tool_ellipse_empty"==e||"tool_rectangle_empty"==e?n.lc.setColor("secondary","transparent"):n.lc.setColor("secondary",n.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var r=n.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");n.lc.setColor("primary",r)}else n.lc.setColor("primary",n.whiteboardToolsInfo.primaryColor);else/^action_/.test(e)?("action_undo"===e?n.lc.undo():"action_redo"===e?n.lc.redo():"action_clear"===e&&n.lc.clear(),a._actionIsDisable(n)):/^zoom_/.test(e)&&("zoom_big"===e?n.whiteboardMagnification<a.maxMagnification&&(n.whiteboardMagnification+=.5):"zoom_small"===e?n.whiteboardMagnification>a.minMagnification&&(n.whiteboardMagnification-=.5):"zoom_default"===e&&(n.whiteboardMagnification=a.defaultProductionOptions.whiteboardMagnification),n.whiteboardMagnification>a.maxMagnification?n.whiteboardMagnification=a.maxMagnification:n.whiteboardMagnification<a.minMagnification&&(n.whiteboardMagnification=a.minMagnification),a._zoomIsDisable(n),a._resizeWhiteboardHandler(n))}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,n=void 0;return void 0==t||(n=a._getWhiteboardInstanceById(t))?void a._changeWhiteboardTemporaryDeawPermission(e,n):void L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var a=this,n=void 0;return void 0==t||(n=a._getWhiteboardInstanceById(t))?void a._changeWhiteboardDeawPermission(e,n):void L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){var a=this;if(!t||"object"!=typeof t)return void L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!");var r=a._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e);var i={},o=!0,s=!1,l=void 0;try{for(var d,c=Object.entries(t)[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var u=n(d.value,2),h=u[0],p=u[1];void 0!==a.useWhiteboardTool[h]?(i[h]=a._productionToolDesc(h,p),a.useWhiteboardTool[h]=!0):L.Logger.warning("The whiteboard does not have the "+h+" tool!")}}catch(e){s=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}r.registerWhiteboardToolsList=i,r.isRegisterWhiteboardTool=!0,a._zoomIsDisable(r),a._zoomIsDisable(r),a._noticeUpdateToolDesc(r)}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e);var a=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(t.filedata)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0)return i.value,!0}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}return!1}},{key:"updateWhiteboardFiledata",value:function(e,t){var a=this._getWhiteboardInstanceById(e);return a?void this._updateWhiteboardFiledata(a,t):void L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?Object.assign({},t.filedata):void L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.loadRedoStack,n=void 0!==a&&a,r=t.loadUndoStack,i=void 0===r||r,o=t.callback,s=this._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e);this._clearRedoAndUndoStack(s),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(s);var l=s.filedata,d=l.fileid,c=l.currpage;if(i){var u=s.stackStorage["undoStack_"+d+"_"+c];if(u&&u.length>0)for(var h=0;h<u.length;h++){var p=u[h];"AddShapeAction"===p.actionName?s.lc.saveShape(p.shape,!1,null,!1):"ClearAction"===p.actionName&&s.lc.clear(!1,p.id)}}if(n){var g=s.stackStorage["redoStack_"+d+"_"+c];if(g&&g.length>0){for(var h=g.length-1;h>=0;h--){var p=g[h];"AddShapeAction"===p.actionName?s.lc.saveShape(p.shape,!1,null,!1):"ClearAction"===p.actionName&&s.lc.clear(!1,p.id)}for(var h=0;h<g.length;h++)s.lc.undo(!1)}}if(void 0==s.waitingProcessShapeData||null==s.waitingProcessShapeData)s.waitingProcessShapeData={};else{var m=s.waitingProcessShapeData["SharpsChange_"+d+"_"+c];null!=m&&void 0!=m&&m.length>0&&(this._batchReceiveSnapshot(m,s),s.waitingProcessShapeData["SharpsChange_"+d+"_"+c]=null,delete s.waitingProcessShapeData["SharpsChange_"+d+"_"+c])}this._actionIsDisable(s),o&&"function"==typeof o&&o()}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.saveRedoStack,n=t.saveUndoStack,r=this._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e);a=void 0!=a?a:r.saveRedoStack,n=void 0!=n?n:r.saveUndoStack;var i=this.getWhiteboardFiledata(e),o=i.fileid,s=i.currpage;n&&(r.stackStorage["undoStack_"+o+"_"+s]=r.lc.undoStack.slice(0)),a&&(r.stackStorage["redoStack_"+o+"_"+s]=r.lc.redoStack.slice(0))}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?void this._showWhiteboardLoading(t):void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);return t?void this._hideWhiteboardLoading(t):void L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(!t)return void L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e);var a="Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;return a}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.isResize,n=void 0!==a&&a,r=this._getWhiteboardInstanceById(e);return r?r.lc&&r.lc.canvas?(0===r.lc.canvas.width||0===r.lc.canvas.height)&&(n&&this._resizeWhiteboardHandler(r),!0):void 0:void L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"png":arguments[1],a=function(e){e=e.toLocaleLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t},n=function(e,t){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=e,a.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)},r=this._getWhiteboardInstanceById(e);if(!r)return void L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e);var i=this._convertCanvasToImageBase64(r,t);i=i.replace(a(t),"image/octet-stream");var o=(r.nickname?r.nickname+"_":"")+r.id+"_"+(new Date).getTime()+"."+t;n(i,o)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.clear,n=void 0===a||a,r=t.redo,i=void 0===r||r,o=t.undo,s=void 0===o||o,l=this;n&&l._clearLc(e,{triggerEvent:!1}),i&&l._clearLcRedoStack(e),s&&l._clearLcUndoStack(e),l._actionIsDisable(e)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"==typeof t&&(t.currpage=Number(t.currpage),t.pagenum=Number(t.pagenum),t.pptslide=Number(t.pptslide),t.pptstep=Number(t.pptstep),t.steptotal=Number(t.steptotal),Object.assign(e.filedata,t))}},{key:"_batchReceiveSnapshot",value:function(e,t){var a=this;return Array.isArray(e)?(e.forEach(function(n,r){var i=!0;r===e.length-1&&(i=!1),a._handlerRemoteDataToWhiteboard(n,i,t)}),void a._actionIsDisable(t)):void L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){var a=this,n=!1;a._handlerRemoteDataToWhiteboard(e,n,t),a._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e,t,a){if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?a.lc.undo(!1,e.data.shapeId):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?a.lc.undo(!1,e.data.shapeId):e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var n=!1,r=a.lc.redoStack.length-1;r>=0;r--)if(e.data.shapeId===a.lc.redoStack[r].shapeId){a.lc.redoStack.splice(r,1),n=!0;break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=LC.JSONToShape(e.data.data)),a.lc.saveShape(e.data.data,!1,null,t)}else e.data.actionName&&"ClearAction"===e.data.actionName&&a.lc.clear(!1,null);break;case"clearEvent":a.lc.clear(!1,null);break;case"laserMarkEvent":var i=a.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":i.style.display="block";break;case"hide":i.style.display="none";break;case"move":if(e.data&&e.data.laser){var o=e.data.laser.left,s=e.data.laser.top;i.style.left=o+"%",i.style.top=s+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){var a={toolKey:e,disabled:!1};return a}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&(clearTimeout(e.noticeUpdateToolDescTimer),e.noticeUpdateToolDescTimer=setTimeout(function(){e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)},250))}},{key:"_updateToolDesc",value:function(e,t,a){if(e.registerWhiteboardToolsList[t]){var r=!0,i=!1,o=void 0;try{for(var s,l=Object.entries(a)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var d=n(s.value,2),c=d[0],u=d[1];void 0!==e.registerWhiteboardToolsList[t][c]&&(e.registerWhiteboardToolsList[t][c]=u)}}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}}}},{key:"_batchUpdateToolDesc",value:function(e,t){var a=this;if(!Array.isArray(t))return void L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!");var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;Array.isArray(l)&&a._updateToolDesc(e,l[0],l[1])}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}},{key:"_setWhiteboardTools",value:function(e,t){var a=this,n=function(t){var n=a._productionToolByCore(e,t);t.lc.setTool(n)};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_productionToolByCore",value:function(e,t){var a=this,n=void 0;if(void 0===a.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),n;switch(e){case"tool_pencil":n=new LC.tools.Pencil(t.lc);break;case"tool_highlighter":n=new LC.tools.Pencil(t.lc);break;case"tool_line":n=new LC.tools.Line(t.lc);break;
case"tool_arrow":n=new LC.tools.Line(t.lc),n.hasEndArrow=!0;break;case"tool_dashed":n=new LC.tools.Line(t.lc),n.isDashed=!0;break;case"tool_eraser":n=new LC.tools.Eraser(t.lc);break;case"tool_text":n=new LC.tools.Text(t.lc);break;case"tool_rectangle":n=new LC.tools.Rectangle(t.lc);break;case"tool_rectangle_empty":n=new LC.tools.Rectangle(t.lc);break;case"tool_ellipse":n=new LC.tools.Ellipse(t.lc);break;case"tool_ellipse_empty":n=new LC.tools.Ellipse(t.lc);break;case"tool_polygon":n=new LC.tools.Polygon(t.lc);break;case"tool_eyedropper":n=new LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":n=new LC.tools.SelectShape(t.lc);break;case"tool_mouse":n=t.lc.tool;break;case"tool_laser":n=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),n=t.lc.tool}return n}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this,a=t.uniqueWhiteboard||void 0==e||null==e?t.whiteboardInstanceDefaultID:t.whiteboardInstanceIDPrefix+e;if(e&&"string"==typeof e){var n=new RegExp(t.specialWhiteboardInstanceIDPrefix,"g");n.test(e)&&(a=e)}return a}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this,a=t._getWhiteboardInstanceID(e),n=t.whiteboardInstanceStore[a];return n}},{key:"_getWhiteboardInstanceByID",value:function(e){var t=this,a=t.whiteboardInstanceStore[e];return a}},{key:"_resizeWhiteboardByScalc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.watermarkImage,n=t.isChangeCanvas,r=void 0===n||n,i=t.isChangeWatermarkScale,o=void 0===i||i,s=t.watermarkImageScalc;s=void 0!==s?s:e.watermarkImageScalc;var l=e.lc;if(l){var d=e.whiteboardElement,c=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId&&document.getElementById(e.parcelAncestorElementId)){var p=document.getElementById(e.parcelAncestorElementId);u=p.clientWidth,h=p.clientHeight}var g={},m=0,f=0,v=0,b=0;if(h*s<u?(m=Math.round(h*s*e.whiteboardMagnification),f=Math.round(h*e.whiteboardMagnification),d.style.width=m+"px",d.style.height=f+"px",c.style.width=m+"px",c.style.height=f+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*s,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="0%",g.left="50%",g.marginTop="0px",g.marginLeft=-m/2+"px",g.width=m+"px",g.height=f+"px"):(m=Math.round(u*e.whiteboardMagnification),f=Math.round(u/s*e.whiteboardMagnification),d.style.width=m+"px",d.style.height=f+"px",c.style.width=m+"px",c.style.height=f+"px",void 0!==e.minHeight&&null!==e.minHeight&&(v=e.minHeight*s,b=e.minHeight,d.style.minWidth=v+"px",d.style.minHeight=b+"px",c.style.minWidth=v+"px",c.style.minHeight=b+"px",g.minWidth=v+"px",g.minHegiht=b+"px"),g.top="50%",g.left="0%",g.marginTop=-f/2+"px",g.marginLeft="0px",g.width=m+"px",g.height=f+"px"),r){l.respondToSizeChange();var y=c.clientWidth,S=c.clientHeight,T=(y+S)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*s);if(l.setZoom(T),l.setPan(0,0),o&&a){var k=a.width,w=a.height,C=l.backgroundCanvas.width/k,P=l.backgroundCanvas.height/w,D=(C+P)/2;l.watermarkScale=D,l.setWatermarkImage(a)}}e.whiteboardMagnification>1?g.addClassName="custom-scroll-bar":g.addClassName="",e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback&&e.handler.resizeWhiteboardSizeCallback(g)}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){return e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},void(e.waitingProcessShapeData={})):void L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){var t=this;if(e&&e.lc){var a=e.lc.watermarkImage;if(a&&a.src){var n=a.width/a.height;t._resizeWhiteboardByScalc(e,{watermarkImage:a,watermarkImageScalc:n})}else t._resizeWhiteboardByScalc(e,{isChangeWatermarkScale:!1})}}},{key:"_updateWhiteboardWatermarkImageScalc",value:function(e,t){e.watermarkImageScalc=t}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var a=this._convertCanvasToImageBase64(e,"jpg");t.src=a,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){var t=this;clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),void 0===e.dependenceBaseboardWhiteboardID||e.isBaseboard||void 0===e.id||(t.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]?(t.saveWhiteboardStackToStorage(e.id,{saveRedoStack:e.saveRedoStack,saveUndoStack:e.saveUndoStack}),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]||{},t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID][e.id]=Object.assign({},e.stackStorage)):t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.dependenceBaseboardWhiteboardID])),t.basicTemplateWhiteboardSignallingList[e.id]&&(t.basicTemplateWhiteboardSignallingList[e.id]=null,delete t.basicTemplateWhiteboardSignallingList[e.id]),t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]&&(t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]=null,delete t.basicTemplateWhiteboardSignallingChildrenStackStorage[e.id]),t._clearWhiteboardAllDataByInstance(e);var a=e.whiteboardInstanceID,n=e.whiteboardElement;n?n.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var r=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;r&&(r.innerHTML="");var i=!0,o=!1,s=void 0;try{for(var l,d=Object.keys(e)[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var c=l.value;e[c]=null,delete e[c]}}catch(e){o=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(o)throw s}}t.whiteboardInstanceStore[a]=null,delete t.whiteboardInstanceStore[a]}},{key:"_clearLc",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.triggerEvent,e&&e.lc?e.lc.clear(!1):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(e,t){var a=this,n=function(t){var a=t.lc;if(a.isTmpDrawAble!==e){a.isTmpDrawAble=e;var n=a.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];a.isTmpDrawAble?(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" yes"):(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_changeWhiteboardDeawPermission",value:function(e,t){var a=this,n=function(t){var a=t.lc;if(a.isDrawAble!==e){a.isDrawAble=e;var n=a.containerEl.parentNode.getElementsByClassName("draw-permission")[0];a.isDrawAble?(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" yes"):(n.className=n.className.replace(/( yes| no)/g,""),n.className+=" no")}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_handlerActiveToolLaser",value:function(e,t){var a=this,n=function(t){var n=t.lc,r=n.containerEl.parentNode,o=r.getElementsByClassName("temporary-draw-permission")[0],s=r.getElementsByClassName("laser-mark")[0];if("tool_laser"===e)a._laserEventHandler_mousemove=a._laserEventHandler_mousemove||function(e){var n=i.getOffset(o),r=e.pageX,l=e.pageY,d=void 0,c=void 0,u=o.clientWidth,h=o.clientHeight;switch(t.rotateDeg){case 0:d=r-n.left,c=l-n.top;break;case 90:d=l-n.top,c=h-(r-n.left);break;case 180:d=u-(r-n.left),c=h-(l-n.top);break;case 270:d=u-(l-n.top),c=r-n.left;break;default:d=r-n.left,c=l-n.top}var p=d/u*100,g=c/h*100;return s.style.left=p+"%",s.style.top=g+"%",clearTimeout(t.laserTimer),t.laserTimer=setTimeout(function(){if(t.laserPosition&&(Math.abs(p-t.laserPosition.left)>.3||Math.abs(g-t.laserPosition.top)>.3)){var e={laser:{left:p,top:g},action:{actionName:"move"}};t.laserPosition=e.laser,a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",e)}},100),!1},a._laserEventHandler_mouseenter=a._laserEventHandler_mouseenter||function(e){var n={action:{actionName:"show"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",n),s.style.display="block",!1},a._laserEventHandler_mouseleave=a._laserEventHandler_mouseleave||function(e){var n={action:{actionName:"hide"}};return a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",n),s.style.display="none",!1},a._changeWhiteboardTemporaryDeawPermission(!1,t),t.selectLaserTool=!0,i.removeEvent(o,"mousemove",a._laserEventHandler_mousemove),i.removeEvent(r,"mouseenter",a._laserEventHandler_mouseenter),i.removeEvent(r,"mouseleave",a._laserEventHandler_mouseleave),o.className=o.className.replace(/ cursor-none/g,""),o.className+=" cursor-none",t.laserPosition=t.laserPosition||{left:0,top:0},i.addEvent(o,"mousemove",a._laserEventHandler_mousemove),i.addEvent(r,"mouseenter",a._laserEventHandler_mouseenter),i.addEvent(r,"mouseleave",a._laserEventHandler_mouseleave);else if(a._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,t),i.removeEvent(o,"mousemove",a._laserEventHandler_mousemove),i.removeEvent(r,"mouseenter",a._laserEventHandler_mouseenter),i.removeEvent(r,"mouseleave",a._laserEventHandler_mouseleave),o.className=o.className.replace(/ cursor-none/g,""),s.style.display="none",t.selectLaserTool){var l={action:{actionName:"hide"}};a._sendWhiteboardMessageToSignallingServer(t,"laserMarkEvent",l),t.selectLaserTool=!1}};a._automaticTraverseWhiteboardInstance(t,n)}},{key:"_sendSignallingToServer",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.idPrefix,n=t.data,r=t.signallingName,i=t.assignId,o=t.do_not_save,s=t.expiresabs,l=t.associatedMsgID,d=t.associatedUserID;if(!e)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var c=e.filedata,u=c.currpage,h=c.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");n&&"string"==typeof n&&(n=JSON.parse(n)),n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),l=l||e.associatedMsgID,d=d||e.associatedUserID;var p=i||a+"###_"+r+"_"+h+"_"+u,g="__allExceptSender",m=Object.assign({},n);this._saveBasicTemplateWhiteboardSignallingData({signallingName:r,id:p,toID:g,data:m,do_not_save:o,expiresabs:s,associatedMsgID:l,associatedUserID:d},"pubmsg"),e.handler.sendSignallingToServer(r,p,g,n,o,s,l,d)}}},{key:"_delSignallingToServer",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.idPrefix,n=t.data,r=t.signallingName,i=t.assignId;if(!e)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!");if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var o=e.filedata,s=o.currpage,l=o.fileid;if(void 0===s||void 0===l)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+s+","+l+"]!");n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var d=i||a+"###_"+r+"_"+l+"_"+s,c="__allExceptSender",u=Object.assign({},n);this._saveBasicTemplateWhiteboardSignallingData({signallingName:r,id:d,toID:c,data:u},"delmsg"),e.handler.delSignallingToServer(r,d,c,n)}}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,a){var n=this,r=void 0,i=void 0,o=void 0,s=void 0,l=void 0,d=void 0,c=void 0;switch(t){case"shapeSaveEvent":if(d=LC.shapeToJSON(a.shape),null!=d&&null!=d.className&&("LinePath"==d.className||"ErasedLinePath"==d.className)){d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs;var u=d.data.pointCoordinatePairs;u.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})}c={eventType:t,actionName:a.action.actionName,shapeId:a.shapeId,data:d},r=a.shapeId,i=c,o="SharpsChange",s=void 0,l=void 0,n._sendSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s,do_not_save:l});break;case"undoEvent":if("AddShapeAction"===a.action.actionName){var h=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:h},r=h,i=c,o="SharpsChange",s=void 0,n._delSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s})}else if("ClearAction"===a.action.actionName){var p=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:p},r=p,i=c,o="SharpsChange",s=void 0,n._delSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s})}break;case"redoEvent":if("AddShapeAction"===a.action.actionName){if(d=LC.shapeToJSON(a.action.shape),null!=d&&null!=d.className&&("LinePath"==d.className||"ErasedLinePath"==d.className)){d.data.smoothedPointCoordinatePairs=null,delete d.data.smoothedPointCoordinatePairs;var u=d.data.pointCoordinatePairs;u.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})}var h=a.action.shapeId;c={eventType:t,actionName:a.action.actionName,shapeId:h,data:d};var g=h,m=c,f="SharpsChange",v=void 0,b=void 0;n._sendSignallingToServer(e,{idPrefix:g,data:m,signallingName:f,assignId:v,do_not_save:b})}else if("ClearAction"===a.action.actionName){var y=a.action.id;c={eventType:t,actionName:a.action.actionName,clearActionId:y},r=y,i=c,o="SharpsChange",s=void 0,l=void 0,n._sendSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s,do_not_save:l})}break;case"clearEvent":var S=a.clearActionId;c={eventType:t,actionName:a.action.actionName,clearActionId:S},r=S,i=c,o="SharpsChange",s=void 0,l=void 0,n._sendSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s,do_not_save:l});break;case"laserMarkEvent":var T="laserMarkEvent";c={eventType:t,actionName:a.action.actionName},a&&a.laser&&(c.laser=a.laser),r=T,i=c,o="SharpsChange",s=void 0,l=!0,n._sendSignallingToServer(e,{idPrefix:r,data:i,signallingName:o,assignId:s,do_not_save:l})}}},{key:"_updateTextFont",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.fontSize,a=e.whiteboardToolsInfo.fontFamily,n=e.whiteboardToolsInfo.fontStyle,r=e.whiteboardToolsInfo.fontWeight,i=e.lc.tool;"Text"==i.name&&(i.font=n+" "+r+" "+t+"px "+a)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateEraserWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updatePencilWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateShapeWidth",value:function(e){var t=this,a=function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_updateColor",value:function(e,t){var a=this;if(t&&"object"==typeof t){var n=function(e){var a=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;if(e.lc.setColor(s,e.whiteboardToolsInfo[s+"Color"]),"primary"===s&&"tool_highlighter"===e.activeTool){var l=e.whiteboardToolsInfo[s+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(s,l)}}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}};a._automaticTraverseWhiteboardInstance(e,n)}}},{key:"_actionIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(0===e.lc.shapes.length){var a=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var a=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}e.lc.canRedo()?(t._updateToolDesc(e,"action_redo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_redo",{disabled:!0}),t._noticeUpdateToolDesc(e)),e.lc.canUndo()?(t._updateToolDesc(e,"action_undo",{disabled:!1}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"action_undo",{disabled:!0}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_zoomIsDisable",value:function(e){var t=this,a=function(e){if(e.active){if(e.whiteboardMagnification<=t.minMagnification){var a=[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}else{var a=[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]];t._batchUpdateToolDesc(e,a),t._noticeUpdateToolDesc(e)}e.whiteboardMagnification>=t.maxMagnification?(t._updateToolDesc(e,"zoom_big",{disabled:!0}),t._noticeUpdateToolDesc(e)):(t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))}};t._automaticTraverseWhiteboardInstance(e,a)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){var a=this;if(e)t&&"function"==typeof t&&t(e);else{var n=!0,r=!1,i=void 0;try{for(var o,s=Object.values(a.whiteboardInstanceStore)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t&&"function"==typeof t&&t(l)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,a=0;a<this.awaitSaveToWhiteboardInstanceSignallingArray.length;a++){var n=this.awaitSaveToWhiteboardInstanceSignallingArray[a];if(n.data&&"string"==typeof n.data&&(n.data=JSON.parse(n.data)),n.data.whiteboardID===e.id){var r=n.id.substring(n.id.lastIndexOf("###_")+4);null==e.waitingProcessShapeData[r]||void 0==e.waitingProcessShapeData[r]?(e.waitingProcessShapeData[r]=[],e.waitingProcessShapeData[r].push(n)):e.waitingProcessShapeData[r].push(n),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1,null)}}if(t)for(var a=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;a>=0;a--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[a]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(a,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"png":arguments[1];if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,n=new Image;return n.src=a.toDataURL("image/"+t),n}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas){var a=e.lc.canvas,n=a.toDataURL("image/"+t);return n}}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e.data.isBaseboard&&e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}}]),e}(),s=new o;t.default=s,e.exports=t.default},116:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),o=r(i),s=a(12),l=r(s),d=a(18),c=(r(d),a(22)),u=(r(c),a(10)),h=(r(u),a(24)),p=(r(h),{getAppLanguageInfo:function(e,t){var r=t?t:l.default.languageName,i={};l.default.language=l.default.language||{},i.name=r,i.languageData=a(618)("./i18_"+r+".js"),e&&"function"==typeof e&&e(i),n(document.body).removeClass("chinese english complex").addClass(i.name).attr("data-language",i.name)},TkUtils:o.default});t.default=p,e.exports=t.default}).call(t,a(32))},117:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(12),i=n(r),o=a(10),s=n(o),l={showAlert:function(e,t){s.default.CoreController.dispatchEvent({type:"showAlert",message:{data:{title:e.title,message:e.message,ok:e.ok,callback:function(e){t&&"function"==typeof t&&t(e)}}}})},showConfirm:function(e,t){s.default.CoreController.dispatchEvent({type:"showConfirm",message:{data:{title:e.title,message:e.message,isOk:{cancel:e.button.cancel,ok:e.button.ok},callback:function(e){t&&"function"==typeof t&&t(e)}}}})}},d={showError:function(e,t,a,n){var r={message:e,title:a?a:i.default.language.languageData.alertWin.title.showError.text,ok:n?n:i.default.language.languageData.alertWin.ok.showError.text};l.showAlert(r,t)},showPrompt:function(e,t,a,n){var r={message:e,title:a?a:i.default.language.languageData.alertWin.title.showPrompt.text,ok:n?n:i.default.language.languageData.alertWin.ok.showPrompt.text};l.showAlert(r,t)},showConfirm:function(e,t,a,n,r){var o={title:a?a:i.default.language.languageData.alertWin.title.showConfirm.text,button:{cancel:r?r:i.default.language.languageData.alertWin.ok.showConfirm.cancel,ok:n?n:i.default.language.languageData.alertWin.ok.showConfirm.ok},message:e};l.showConfirm(o,t)}};t.default=d,e.exports=t.default},118:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),s=n(o),l=function(){function e(){r(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return i(e,[{key:"productionDefaultAppAppPermissions",value:function(){var e={canDraw:!1,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1,h5DocumentActionClick:!1,dynamicPptActionClick:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromWBPageCount:!1,sendSignallingFromSharpsChange:!1,sendSignallingFromShowPage:!1,sendSignallingFromDynamicPptShowPage:!1,sendSignallingFromH5ShowPage:!1,sendSignallingFromGeneralShowPage:!1,sendSignallingFromDynamicPptTriggerActionClick:!1,sendSignallingFromH5DocumentAction:!1,sendSignallingFromVideoDraghandle:!1,sendSignallingFromBlackBoardDrag:!1,allUserTools:!1,laser:!1,publishDynamicPptMediaPermission_video:!1,sendWhiteboardMarkTool:!1,jumpPage:!1,sendSignallingFromBlackBoard:!1,sendSignallingTimerToStudent:!1,sendSignallingDialToStudent:!1,sendSignallingDataStudentToTeacherAnswer:!0,studentInit:!1,dialIconClose:!1,sendSignallingAnswerToStudent:!1,sendSignallingQiangDaQi:!1,sendSignallingQiangDaZhe:!0,sendSignallingFromDialDrag:!1,isSendSignallingFromTimerDrag:!1,isSendSignallingFromAnswerDrag:!1,isSendSignallingFromResponderDrag:!1};return e}},{key:"resetDefaultAppPermissions",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&s.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],a=this;e&&"object"==typeof e&&(Object.assign(a.permissionsJson,e),t&&s.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:a.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var a=this;if(a.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",a.permissionsJson[e]),a.permissionsJson[e]=t;var n={type:"updateAppPermissions_"+e,message:{key:e,value:t}};s.default.CoreController.dispatchEvent(n)}}},{key:"getAppPermissions",value:function(e){var t=this;return t.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var a in e)t.permissionsJson[a]=e[a];Object.assign(t.permissionsJson,e),t.permissionsJson=e,s.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),d=new l;t.default=d,e.exports=t.default},248:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(36),u=n(c),h=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={extendShow:!1,listDirection:"down"},this.maxOptionNumber=5,this.pageSelectListPassivityHideNumber=this.props.pageSelectListPassivityHideNumber}return i(t,e),o(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearTimeout(this.pageSelectListPassivityHideNumbertTimer),this.pageSelectListPassivityHideNumbertTimer=null}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(t.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow),void 0!==this.props.pageSelectListPassivityHideNumber&&this.pageSelectListPassivityHideNumber!==this.props.pageSelectListPassivityHideNumber&&(clearTimeout(this.pageSelectListPassivityHideNumbertTimer),this.pageSelectListPassivityHideNumbertTimer=setTimeout(function(){a.pageSelectListPassivityHideNumber=a.props.pageSelectListPassivityHideNumber,a.state.extendShow&&a.setState({extendShow:!1})},150)),this.refs.tkSelectContainer){var n=u.default.findDOMNode(this.refs.tkSelectContainer);if(n){var r=this._getRect(n),i=r.top,o=r.height;window.innerHeight-i>this.maxOptionNumber*o+20?"down"!==this.state.listDirection&&this.setState({listDirection:"down"}):"up"!==this.state.listDirection&&this.setState({listDirection:"up"})}}}},{key:"optionOnClick",value:function(e,t,a){return this.setState({extendShow:!1}),e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),a&&(a.preventDefault(),a.stopPropagation()),!1}},{key:"currentTextOnClick",value:function(e){return this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),a=document.documentElement.clientTop,n=document.documentElement.clientLeft;return{top:t.top-a,bottom:t.bottom-a,left:t.left-n,right:t.right-n,width:t.width,height:t.height}}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.className,r=t.optionClassName,i=t.selectOptions,o=void 0===i?[]:i,s=t.disabled,l=t.isMobile,c=void 0!==l&&l,u=t.currentValue;return d.default.createElement("div",{id:a,ref:"tkSelectContainer",className:"tk-select-container clear-float "+this.state.listDirection+(s?" disabled ":"  ")+(n||"")+(s?" hideExtendList":this.state.extendShow?" showExtendList":" hideExtendList"),onMouseLeave:c?void 0:this.selectContainerOnMouseLeave.bind(this)},d.default.createElement("button",{className:"current-select-text "+(s?"disabled ":" "),disabled:s,onClick:s?void 0:this.currentTextOnClick.bind(this)},u),d.default.createElement("span",{className:"arrow-container "+(s?"disabled ":" ")},d.default.createElement("em",{className:"arrow "})),d.default.createElement("ol",{className:"select-extend-list-container "+this.state.listDirection+(s?" disabled ":"  ")+(s?" hide":this.state.extendShow?" show":" hide"),style:{display:s?"none":this.state.extendShow?"block":"none",maxHeight:"calc("+this.maxOptionNumber+" * 0.5rem)"}},o.map(function(t,a){return d.default.createElement("li",{key:a,className:"select-option "+(r||" ")+(u===t.value?" selected":" "),"data-label":t.label,onClick:s?void 0:e.optionOnClick.bind(e,t.value,a)},t.value)})))}}]),t}(d.default.Component);t.default=h,e.exports=t.default},249:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(12),d=n(l),c=a(2),u=n(c),h=a(10),p=n(h),g=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={alert:{isShow:!1,ok:"",type:""},confirm:{isShow:!1},isHasClassCenter:!1,title:"",message:"",callback:null},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;p.default.CoreController.addEventListener("showAlert",e.showAlert.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("showConfirm",e.showConfirm.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("showInputTooltip",e.showInputTooltip.bind(e),self.listernerBackupid)}},{key:"componentWillUnmount",value:function(){p.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"alertCloseClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0)}},{key:"confirmClick",value:function(e){var t={text:this.refs.subNode_1?this.refs.subNode_1.value:void 0,href:this.refs.subNode_2?this.refs.subNode_2.value:void 0};this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!0,t)}},{key:"cancelClick",value:function(e){this.setState({isHasClassCenter:!1,alert:{isShow:!1},confirm:{isShow:!1}}),e(!1)}},{key:"showAlert",value:function(e){var t=e.message.data,a=t.title,n=t.message,r=t.ok,i=t.callback,o=t.type;this.setState({alert:{isShow:!0,ok:r,type:o},confirm:{isShow:!1},title:a,message:n,callback:i,isHasClassCenter:!0})}},{key:"showConfirm",value:function(e){var t=e.message.data,a=t.title,n=t.message,r=t.isOk,i=t.callback;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:r},title:a,message:n,callback:i,isHasClassCenter:!0})}},{key:"showInputTooltip",value:function(e){var t=e.data,a=t.title,n=t.message,r=t.isOk,i=t.callback,o=t.contentType;this.setState({alert:{isShow:!1},confirm:{isShow:!0,isOk:r},title:a,message:n,callback:i,isHasClassCenter:!0,contentType:o})}},{key:"__loadContent",value:function(){var e=this,t=void 0;if(e.state.message)t=e.state.message;else if(e.state.contentType)switch(e.state.contentType){case"edit-text-area":t=u.default.createElement("div",{className:"edit-node"},u.default.createElement("textarea",{ref:"subNode_1",name:"",id:"",cols:"50",rows:"6",maxLength:"50"}));break;case"edit-input":t=u.default.createElement("div",{className:"edit-node"},u.default.createElement("label",{htmlFor:""},d.default.language.languageData.notice.content,":"),u.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".08rem"},maxLength:"20"}));break;case"edit-input-db":t=u.default.createElement("div",{className:"edit-node"},u.default.createElement("label",{htmlFor:""},d.default.language.languageData.notice.content,":"),u.default.createElement("input",{ref:"subNode_1",type:"text",style:{marginLeft:".22rem",marginBottom:".3rem"},maxLength:"30"}),u.default.createElement("br",null),u.default.createElement("label",{htmlFor:""},d.default.language.languageData.notice.href,":"),u.default.createElement("input",{ref:"subNode_2",type:"text",style:{marginLeft:".08rem"},maxLength:"50"}));break;default:L.Logger.error("This content type has not defined, please check out and define this content!")}return{content:t}}},{key:"render",value:function(){var e=this,t=this.state,a=t.alert,n=t.confirm,r=t.isHasClassCenter,i=t.title,o=(t.message,t.callback),s=e.__loadContent(),l=s.content;return u.default.createElement("section",{id:"alert-error-confrim",className:"alert-error-confrim "+(a.isShow?"error"===a.type?" error-message":" prompt-message":""),style:{display:a.isShow||n.isShow?"block":"none"}},u.default.createElement("div",{id:"alert-box",className:"alert-box "+(r?"center ":"")},u.default.createElement("div",{className:"alert-title"},u.default.createElement("p",{className:"title-text"},i),a.isShow?u.default.createElement("button",{onClick:e.alertCloseClick.bind(e,o),className:"title-close",id:"title-close"}):""),u.default.createElement("div",{className:"alert-contant"},l),u.default.createElement("div",{className:"alert-isOk"},u.default.createElement("button",{id:"alert-confrim",onClick:a.isShow?e.alertCloseClick.bind(e,o):n.isShow?e.confirmClick.bind(e,o):void 0},a.isShow?a.ok:n.isShow?n.isOk.ok:""),n.isShow?u.default.createElement("button",{id:"alert-cancel",onClick:e.cancelClick.bind(e,o),className:"alert-cancel"},n.isOk.cancel):"")))}}]),t}(u.default.Component);t.default=g,e.exports=t.default},250:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},u=a(2),h=r(u),p=a(12),g=r(p),m=a(18),f=r(m),v=a(19),b=r(v),y=a(10),S=r(y),T=a(20),k=r(T),w=a(117),C=r(w),P=a(22),D=r(P),_=a(56),A=(r(_),a(248)),E=r(A),I=function(e){function t(e){var a;o(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props.id;this.whiteboardJson={disabled:{prevPage:!0,nextPage:!0,addPage:!0},page:{currpage:1,totalpage:1},temporaryDisabled:{prevPage:!1,nextPage:!1,addPage:!1},show:{prevPage:!0,nextPage:!0,addPage:!1},onClick:{prevPage:this.whiteboardPrevPageClick.bind(this),nextPage:this.whiteboardNextPageClick.bind(this),addPage:this.whiteboardAddPageClick.bind(this),fullScreen:this.fullScreenClick.bind(this)},updateState:!1},this.newpptJson={disabled:{prevPage:!0,nextPage:!0,addPage:!0},page:{currpage:1,totalpage:1},temporaryDisabled:{prevPage:!1,nextPage:!1,addPage:!1},show:{prevPage:!0,nextPage:!0,addPage:!1},onClick:{prevPage:this.newpptPrevStepClick.bind(this),nextPage:this.newpptNextStepClick.bind(this),addPage:void 0,fullScreen:this.fullScreenClick.bind(this)}},this.h5DocumentJson={disabled:{prevPage:!0,nextPage:!0,addPage:!0},page:{currpage:1,totalpage:1},temporaryDisabled:{prevPage:!1,nextPage:!1,addPage:!1},show:{prevPage:!0,nextPage:!0,addPage:!1},onClick:{prevPage:this.h5DocumentPrevStepClick.bind(this),nextPage:this.h5DocumentNextStepClick.bind(this),addPage:void 0,fullScreen:this.fullScreenClick.bind(this)}},this.state=(a={jumpPage:k.default.handler.getAppPermissions("jumpPage"),fileTypeMark:"general",isFullScreen:!1,pagingDesc:this._getPaddingDesc("general"),registerWhiteboardToolsList:{zoom_small:{toolKey:"zoom_small",disabled:!1},zoom_big:{toolKey:"zoom_big",disabled:!1}},selectExtendListShow:!1,pageSelectListPassivityHideNumber:0},i(a,n,{offsetX:0,offsetY:0}),i(a,"pagingToolBarIsShow",!1),a),this[n]={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.pageSelectListId="pageSelectListId_pageingToolBar"}return s(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;S.default.Document.addEventListener(f.default.EVENTTYPE.DocumentEvent.onKeydown,e.handlerOnKeydown.bind(e),e.listernerBackupid),S.default.Document.addEventListener(f.default.EVENTTYPE.DocumentEvent.onFullscreenchange,e.handlerOnFullscreenchange.bind(e),e.listernerBackupid),S.default.Window.addEventListener(f.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomConnected,e.handlerRoomConnected.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomTransmitWindowSize,e.handlerRoomWindowSize.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("callAllWrapOnClick",e.handlerCallAllWrapOnClick.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("changeFileTypeMark",e.handlerChangeFileTypeMark.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("updatePagdingState",e.handlerUpdatePagdingState.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("updateAppPermissions_jumpPage",e.handlerUpdateAppPermissions_jumpPage.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("commonWhiteboardTool_noticeUpdateToolDesc",e.handlerCommonWhiteboardTool_noticeUpdateToolDesc.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("mobileSdk_fullScreenChangeCallback",e.handlerMobileSdk_fullScreenChangeCallback.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;S.default.CoreController.removeBackupListerner(e.listernerBackupid),S.default.Document.removeBackupListerner(e.listernerBackupid),S.default.Window.removeBackupListerner(e.listernerBackupid),clearTimeout(e.keydownTimer)}},{key:"handlerRoomConnected",value:function(){this.state.pagingToolBarIsShow=!0,this.setState({pagingToolBarIsShow:this.state.pagingToolBarIsShow})}},{key:"handlerRoomWindowSize",value:function(e){var t=document.getElementById("tk_app");t?(g.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,g.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(g.default.windowInnerWidth=window.innerWidth,g.default.windowInnerHeight=window.innerHeight)}},{key:"handlerCallAllWrapOnClick",value:function(e){if("mobile"===TK.SDKTYPE){var t=e.message.event,a=this.pageSelectListId;if(this.state.selectExtendListShow&&!(t.target.id===a||n(t.target)&&n(t.target).parents("#"+a).length>0)){var r=this.state.pageSelectListPassivityHideNumber;r++,this.setState({pageSelectListPassivityHideNumber:r})}}}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,r=a.percentTop;b.default.percentageChangeToRem(e,n,r,t),e.setState(i({},t,e.state[t]))}this.setState({updateState:!this.state.updateState})}},{key:"handlerOnKeydown",value:function(e){var t=this;if(!(g.default.playPptVideoing||g.default.playMediaFileing||g.default.isSkipPageing)){var a=e.message.keyCode;clearTimeout(t.keydownTimer),t.keydownTimer=setTimeout(function(){if("general"===t.state.fileTypeMark){if(k.default.handler.getAppPermissions("whiteboardPagingPage"))switch(a){case 37:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"whiteboardPrevPage"})}}});break;case 39:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"whiteboardNextPage"})}}})}}else if("dynamicPPT"===t.state.fileTypeMark){if(k.default.handler.getAppPermissions("newpptPagingPage"))switch(a){case 39:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"newpptNextSlideClick"})}}});break;case 37:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"newpptPrevSlideClick"})}}});break;case 38:S.default.CoreController.dispatchEvent({type:"newpptPrevStepClick"});break;case 40:S.default.CoreController.dispatchEvent({type:"newpptNextStepClick"})}}else if("h5document"===t.state.fileTypeMark&&k.default.handler.getAppPermissions("h5DocumentPagingPage"))switch(a){case 37:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"h5DocumentPageUpClick"})}}});break;case 39:S.default.CoreController.dispatchEvent({type:"lcTextEditing",message:{callback:function(e){e||S.default.CoreController.dispatchEvent({type:"h5DocumentPageDownClick"})}}})}},250)}}},{key:"handlerChangeFileTypeMark",value:function(e){this.setState({fileTypeMark:e.message.fileTypeMark}),this.setState({pagingDesc:this._getPaddingDesc(e.message.fileTypeMark)})}},{key:"handlerUpdatePagdingState",value:function(e){var t=e.message;if("whiteboard"===t.source){var a={disabled:{prevPage:!(k.default.handler.getAppPermissions("whiteboardPagingPage")&&t.data.currpage>1),nextPage:!(k.default.handler.getAppPermissions("whiteboardPagingPage")&&t.data.currpage<t.data.pagenum),addPage:!(k.default.handler.getAppPermissions("sendSignallingFromWBPageCount")&&t.data.currpage===t.data.pagenum&&0===t.data.fileid)},page:{currpage:t.data.currpage,totalpage:t.data.pagenum},show:{prevPage:"phone"!==g.default.mobileDeviceType||k.default.handler.getAppPermissions("whiteboardPagingPage"),nextPage:"phone"===g.default.mobileDeviceType?k.default.handler.getAppPermissions("whiteboardPagingPage"):!(0===t.data.fileid&&t.data.currpage===t.data.pagenum),addPage:"phone"!==g.default.mobileDeviceType&&0===t.data.fileid&&t.data.currpage===t.data.pagenum}};Object.assign(this.whiteboardJson,a),"general"===this.state.fileTypeMark&&this.setState({pagingDesc:this.whiteboardJson})}else if("newppt"===t.source){var n={disabled:{prevPage:!k.default.handler.getAppPermissions("newpptPagingPage")||g.default.playMediaFileing||g.default.playPptVideoing||t.data.pptslide<=1&&t.data.pptstep<=0,nextPage:!k.default.handler.getAppPermissions("newpptPagingPage")||g.default.playMediaFileing||g.default.playPptVideoing||t.data.pptslide>=t.data.pagenum&&t.data.pptstep>=t.data.steptotal-1,addPage:!0},page:{currpage:t.data.currpage,totalpage:t.data.pagenum}};"phone"===g.default.mobileDeviceType&&(n.show={prevPage:k.default.handler.getAppPermissions("newpptPagingPage"),nextPage:k.default.handler.getAppPermissions("newpptPagingPage"),addPage:!1}),Object.assign(this.newpptJson,n),"dynamicPPT"===this.state.fileTypeMark&&this.setState({pagingDesc:this.newpptJson})}else if("h5document"===t.source){var r={disabled:{prevPage:!(k.default.handler.getAppPermissions("h5DocumentPagingPage")&&t.data.currpage>1),nextPage:!(k.default.handler.getAppPermissions("h5DocumentPagingPage")&&t.data.currpage<t.data.pagenum),addPage:!0},page:{currpage:t.data.currpage,totalpage:t.data.pagenum}};"phone"===g.default.mobileDeviceType&&(r.show={prevPage:k.default.handler.getAppPermissions("h5DocumentPagingPage"),nextPage:k.default.handler.getAppPermissions("h5DocumentPagingPage"),addPage:!1}),Object.assign(this.h5DocumentJson,r),"h5document"===this.state.fileTypeMark&&this.setState({pagingDesc:this.h5DocumentJson})}}},{key:"handlerOnFullscreenchange",value:function(){"mobile"!==TK.SDKTYPE&&this.setState({isFullScreen:b.default.tool.getFullscreenElement()&&"lc-full-vessel"==b.default.tool.getFullscreenElement().id})}},{key:"handlerMobileSdk_fullScreenChangeCallback",value:function(e){if("mobile"===TK.SDKTYPE){var t=e.message.isFullScreen;this.setState({isFullScreen:t})}}},{key:"handlerInitAppPermissions",value:function(){this.setState({jumpPage:k.default.handler.getAppPermissions("jumpPage")})}},{key:"handlerUpdateAppPermissions_jumpPage",value:function(){this.setState({jumpPage:k.default.handler.getAppPermissions("jumpPage")})}},{key:"handlerCurrpageOnChange",value:function(e){var t=e.target.value;t=t.replace(/[^\d]/g,""),this.state.pagingDesc.page.currpage=t,this.setState({pagingDesc:this.state.pagingDesc})}},{key:"handlerKeyDown",value:function(e){var t=this;13===e.keyCode&&t.handlerCurrpageOnBlur(e)}},{key:"handlerCurrpageOnBlur",value:function(e){var t=this;return g.default.isSkipPageing=!1,/^\d+$/.test(t.state.pagingDesc.page.currpage)?t.state.pagingDesc.page.currpage>t.state.pagingDesc.page.totalpage?(C.default.showPrompt(g.default.language.languageData.alertWin.call.fun.page.pageMax.text),t.state.pagingDesc.page.currpage=t.changeCurrpage,void t.setState({pagingDesc:t.state.pagingDesc})):t.state.pagingDesc.page.currpage<1?(C.default.showPrompt(g.default.language.languageData.alertWin.call.fun.page.pageMin.text),t.state.pagingDesc.page.currpage=t.changeCurrpage,void t.setState({pagingDesc:t.state.pagingDesc})):(S.default.CoreController.dispatchEvent({type:"skipPage_"+t.state.fileTypeMark,message:{currpage:t.state.pagingDesc.page.currpage}}),void(t.changeCurrpage=void 0)):(C.default.showPrompt(g.default.language.languageData.alertWin.call.fun.page.pageInteger.text),t.state.pagingDesc.page.currpage=t.changeCurrpage,void t.setState({pagingDesc:t.state.pagingDesc}))}},{key:"handlerCurrpageOnFocus",value:function(e){var t=this;g.default.isSkipPageing=!0,t.changeCurrpage=t.state.pagingDesc.page.currpage}},{key:"whiteboardPrevPageClick",value:function(e){this._addTemporaryDisabled("prevPage"),S.default.CoreController.dispatchEvent({type:"whiteboardPrevPage"})}},{key:"whiteboardNextPageClick",value:function(e){this._addTemporaryDisabled("nextPage"),S.default.CoreController.dispatchEvent({type:"whiteboardNextPage"})}},{key:"whiteboardAddPageClick",value:function(e){this._addTemporaryDisabled("addPage"),S.default.CoreController.dispatchEvent({type:"whiteboardAddPage"})}},{key:"newpptPrevStepClick",value:function(e){this._addTemporaryDisabled("prevPage"),S.default.CoreController.dispatchEvent({type:"newpptPrevStepClick"})}},{key:"newpptNextStepClick",value:function(e){this._addTemporaryDisabled("nextPage"),S.default.CoreController.dispatchEvent({type:"newpptNextStepClick"})}},{key:"h5DocumentPrevStepClick",value:function(e){this._addTemporaryDisabled("prevPage"),S.default.CoreController.dispatchEvent({type:"h5DocumentPageUpClick"})}},{key:"h5DocumentNextStepClick",value:function(e){this._addTemporaryDisabled("nextPage"),S.default.CoreController.dispatchEvent({type:"h5DocumentPageDownClick"})}},{key:"fullScreenClick",value:function(e){if("mobile"===TK.SDKTYPE){var t=!this.state.isFullScreen;D.default.getTkRoom().changeWebPageFullScreen(t)}else{var a=document.getElementById("lc-full-vessel");b.default.tool.isFullScreenStatus(a)?b.default.tool.exitFullscreen():b.default.tool.launchFullscreen(a)}e.stopPropagation()}},{key:"handlerWhiteboard_activeCommonWhiteboardToolClick",value:function(e,t){S.default.CoreController.dispatchEvent({type:"whiteboard_activeCommonWhiteboardTool",message:{toolKey:e}})}},{key:"handlerCommonWhiteboardTool_noticeUpdateToolDesc",value:function(e){var t=e.message.registerWhiteboardToolsList,a=!1,n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(this.state.registerWhiteboardToolsList)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t[l]&&(this.state.registerWhiteboardToolsList[l]=t[l],a=!0)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}a&&this.setState({registerWhiteboardToolsList:this.state.registerWhiteboardToolsList})}},{key:"_getPaddingDesc",value:function(e){return e=e||this.state.fileTypeMark,"general"===e||void 0===e?this.whiteboardJson:"dynamicPPT"===e?this.newpptJson:"h5document"===e?this.h5DocumentJson:void 0}},{key:"_addTemporaryDisabled",value:function(e){var t=this,a=this.state.fileTypeMark,n="general"==this.state.fileTypeMark?"whiteboardJson":"dynamicPPT"==this.state.fileTypeMark?"newpptJson":"h5DocumentJson";this[n].temporaryDisabled[e]=!0,this.setState({pagingDesc:this._getPaddingDesc(this.state.fileTypeMark)}),setTimeout(function(){t[n].temporaryDisabled[e]=!1,t.state.fileTypeMark===a&&t.setState({pagingDesc:t._getPaddingDesc(t.state.fileTypeMark)})},250)}},{key:"changeSelectPageOnChange",value:function(e){var t=this;return e>t.state.pagingDesc.page.totalpage?void C.default.showPrompt(g.default.language.languageData.alertWin.call.fun.page.pageMax.text):e<1?void C.default.showPrompt(g.default.language.languageData.alertWin.call.fun.page.pageMin.text):(t.state.pagingDesc.page.currpage=e,t.setState({pagingDesc:t.state.pagingDesc}),void S.default.CoreController.dispatchEvent({type:"skipPage_"+t.state.fileTypeMark,message:{currpage:e}}))}},{key:"changeSelectPageNoticeSelectExtendListShowOrHide",value:function(e){this.setState({selectExtendListShow:e})}},{key:"_getThisEleLeftTop",value:function(){var e=this.props.id,t=g.default.windowInnerWidth/f.default.STANDARDSIZE;"phone"!==g.default.mobileDeviceType&&(this.state[e].left=(g.default.windowInnerWidth/t-4.53333)/2,this.state[e].top=g.default.windowInnerHeight/t-.9),this.setState(i({},e,this.state[e]))}},{key:"handlerOnStartDrag",value:function(e,t){if("phone"!==g.default.mobileDeviceType){var a=this,n=a.props.id,r=g.default.windowInnerWidth/f.default.STANDARDSIZE;if(0!==Object.keys(a[n]).length){var i=a[n],o=i.percentLeft,s=i.percentTop;b.default.percentageChangeToRem(a,o,s,n)}else a.state[n].top=g.default.windowInnerHeight/r-.9,a.state[n].left=(g.default.windowInnerWidth/r-4.53333)/2;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}}},{key:"handlerOnDragging",value:function(e,t){if("phone"!==g.default.mobileDeviceType){var a=this,n=a.props.id,r=g.default.windowInnerWidth/f.default.STANDARDSIZE;a.state[n].left=t.x/r-a.state[n].offsetX,a.state[n].top=t.y/r-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=b.default.controlDragBounds(a,o,s),a.setState(i({},n,a.state[n]))}}},{key:"handlerOnStopDrag",value:function(e,t){if("phone"!==g.default.mobileDeviceType){var a=this,n=a.props.id;a.state[n].offsetX=0,a.state[n].offsetY=0;var r=a.state[n],i=r.left,o=r.top,s=b.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;a[n]={percentLeft:l,percentTop:d}}}},{key:"render",value:function(){var e=this,t=e.state,a=t.fileTypeMark,n=t.isFullScreen,r=t.pagingDesc,i=t.registerWhiteboardToolsList,o=t.selectExtendListShow,s=i.zoom_small,d=i.zoom_big,c=[];if("mobile"===TK.SDKTYPE&&"pad"===g.default.mobileDeviceType)for(var u=1;u<=Number(r.page.totalpage);u++)c.push({value:u,label:u});var p=this.props.id,m={onStart:this.handlerOnStartDrag.bind(this),onDrag:this.handlerOnDragging.bind(this),onStop:this.handlerOnStopDrag.bind(this)},v={position:"absolute",zIndex:110,display:this.state.pagingToolBarIsShow?"inline-block":"none",left:this.state[p].left+"rem",top:this.state[p].top+"rem"};return h.default.createElement(_.DraggableCore,l({},m,{disabled:o}),"phone"!==g.default.mobileDeviceType?h.default.createElement("div",{className:"header-left-page-time-container clear-float add-fr tk-tool-bottom "+e.state.fileTypeMark+" "+("phone"===g.default.mobileDeviceType?"phone ":"pc pad"),id:p,style:v}," ",h.default.createElement("div",{className:"h-page-container add-fl clear-float"},h.default.createElement("div",{className:"h-page-next-prev-container add-fl clear-float tk-paging-"+a},h.default.createElement("button",{className:"lc-tool-icon-wrap add-fl arrow-wrap lc-prev-page "+(r.disabled.prevPage?" disabled":"")+(r.temporaryDisabled.prevPage?" temporary-disabled":" "),"data-set-disabled":"yes",onClick:r.disabled.prevPage?void 0:r.onClick.prevPage,style:{display:r.show.prevPage?"block":"none"},disabled:r.disabled.prevPage||void 0,id:"prev_page",title:g.default.language.languageData.header.page.prev.text}),h.default.createElement("div",{className:"lc-tool-icon-wrap  add-fl page-print not-active"},h.default.createElement("span",{className:"page-print-content button custom-select "},"mobile"===TK.SDKTYPE?h.default.createElement("span",{id:"curr_page",className:"curr-page disabled ",disabled:!0},r.page.currpage):h.default.createElement("input",{id:"curr_page",disabled:!e.state.jumpPage||void 0,className:"curr-page "+(e.state.jumpPage?" ":" disbaled"),type:"text",value:r.page.currpage,onFocus:e.handlerCurrpageOnFocus.bind(e),onBlur:e.handlerCurrpageOnBlur.bind(e),onChange:e.handlerCurrpageOnChange.bind(e),onKeyDown:e.handlerKeyDown.bind(e)}),h.default.createElement("span",{className:"h-page-print-oblique"},"/"),h.default.createElement("span",{id:"all_page",className:"all-page disabled ",disabled:!0},r.page.totalpage),"mobile"===TK.SDKTYPE&&"pad"===g.default.mobileDeviceType?h.default.createElement(E.default,{id:this.pageSelectListId,className:"page-select pad "+(e.state.jumpPage?"":"disabled"),disabled:!e.state.jumpPage,onChange:e.changeSelectPageOnChange.bind(e),selectOptions:c,optionClassName:"page-option",currentValue:r.page.currpage,isMobile:"mobile"===TK.SDKTYPE,pageSelectListPassivityHideNumber:e.state.pageSelectListPassivityHideNumber,noticeSelectExtendListShowOrHide:e.changeSelectPageNoticeSelectExtendListShowOrHide.bind(e)}):void 0)),h.default.createElement("button",{className:"lc-tool-icon-wrap  add-fl arrow-wrap lc-next-page "+(r.disabled.nextPage?" disabled":"")+(r.temporaryDisabled.nextPage?" temporary-disabled":" "),"data-set-disabled":"yes",onClick:r.disabled.nextPage?void 0:r.onClick.nextPage,style:{display:r.show.nextPage?"block":"none"},disabled:r.disabled.nextPage||void 0,id:"next_page",title:g.default.language.languageData.header.page.next.text}),h.default.createElement("button",{className:" lc-tool-icon-wrap   add-fl add-page lc-add-page "+(r.disabled.addPage?" disabled":"")+(r.temporaryDisabled.addPage?" temporary-disabled":" "),id:"add_literally_page","data-set-disabled":"yes",onClick:r.disabled.addPage?void 0:r.onClick.addPage,style:{display:r.show.addPage?"block":"none"},disabled:r.disabled.addPage||void 0,title:g.default.language.languageData.header.page.add.text}),h.default.createElement("button",{disabled:s.disabled,className:" lc-tool-icon-wrap   add-fl lc-zoom-small "+(s.disabled?"disabled":""),style:{display:"general"!==e.state.fileTypeMark?"none":""},id:"tool_zoom_small","data-set-disabled":"yes",title:g.default.language.languageData.header.tool.tool_zoom_small.title,onClick:e.handlerWhiteboard_activeCommonWhiteboardToolClick.bind(e,"zoom_small")}),h.default.createElement("button",{disabled:d.disabled,className:" lc-tool-icon-wrap   add-fl lc-zoom-big "+(d.disabled?"disabled":""),style:{display:"general"!==e.state.fileTypeMark?"none":""},id:"tool_zoom_big","data-set-disabled":"yes",title:g.default.language.languageData.header.tool.tool_zoom_big.title,onClick:e.handlerWhiteboard_activeCommonWhiteboardToolClick.bind(e,"zoom_big")}),"phone"!==g.default.mobileDeviceType?h.default.createElement("button",{className:" lc-tool-icon-wrap   add-fl lc-full "+(n?"yes":"no"),id:"lc_full_btn",onClick:r.onClick.fullScreen,title:"general"===a?g.default.language.languageData.header.page.lcFullBtn.title:"dynamicPPT"===a?g.default.language.languageData.header.page.pptFullBtn.title:g.default.language.languageData.header.page.h5FileFullBtn.title}):void 0))):h.default.createElement("div",{className:"header-left-page-time-container-phone "+e.state.fileTypeMark+" "+("phone"===g.default.mobileDeviceType?"phone ":"pc pad"),id:"page_wrap_phone"}," ",h.default.createElement("button",{className:"lc-tool-icon-wrap add-fl arrow-wrap lc-prev-page "+(r.disabled.prevPage?" disabled":"")+(r.temporaryDisabled.prevPage?" temporary-disabled":" "),"data-set-disabled":"yes",onClick:r.disabled.prevPage?void 0:r.onClick.prevPage,style:{display:r.show.prevPage?"block":"none",top:(g.default.windowInnerHeight/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64)/2+"rem",left:"0.2rem"},disabled:r.disabled.prevPage||void 0,id:"prev_page_phone",title:g.default.language.languageData.header.page.prev.text}),h.default.createElement("button",{className:"lc-tool-icon-wrap  add-fl arrow-wrap lc-next-page "+(r.disabled.nextPage?" disabled":"")+(r.temporaryDisabled.nextPage?" temporary-disabled":" "),"data-set-disabled":"yes",onClick:r.disabled.nextPage?void 0:r.onClick.nextPage,style:{display:r.show.nextPage?"block":"none",top:(g.default.windowInnerHeight/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64)/2+"rem",left:g.default.windowInnerWidth/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64-.2+"rem"},disabled:r.disabled.nextPage||void 0,id:"next_page_phone",title:g.default.language.languageData.header.page.next.text}),h.default.createElement("button",{disabled:s.disabled,className:" lc-tool-icon-wrap   add-fl lc-zoom-small "+(s.disabled?"disabled":""),style:{display:"general"!==e.state.fileTypeMark?"none":"",top:(g.default.windowInnerHeight/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64)/2+.64+.1+"rem",left:g.default.windowInnerWidth/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64-.2+"rem"},id:"tool_zoom_small_phone","data-set-disabled":"yes",title:g.default.language.languageData.header.tool.tool_zoom_small.title,onClick:e.handlerWhiteboard_activeCommonWhiteboardToolClick.bind(e,"zoom_small")}),h.default.createElement("button",{disabled:d.disabled,className:" lc-tool-icon-wrap   add-fl lc-zoom-big "+(d.disabled?"disabled":""),style:{display:"general"!==e.state.fileTypeMark?"none":"",top:(g.default.windowInnerHeight/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64)/2+1.48+"rem",left:g.default.windowInnerWidth/(g.default.windowInnerWidth/f.default.STANDARDSIZE)-.64-.2+"rem"},id:"tool_zoom_big_phone","data-set-disabled":"yes",title:g.default.language.languageData.header.tool.tool_zoom_big.title,onClick:e.handlerWhiteboard_activeCommonWhiteboardToolClick.bind(e,"zoom_big")})))}}]),t}(h.default.Component);t.default=I,e.exports=t.default}).call(t,a(32))},251:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(22),u=n(c),h=a(10),p=n(h),g=a(12),m=n(g),f=a(259),v=n(f),b=a(255),y=n(b),S=a(254),T=n(S),k=a(250),w=n(k),C=a(268),P=n(C),D=a(267),_=n(D),A=a(263),E=n(A),I=a(262),x=n(I),B=a(265),N=n(B),W=a(264),L=n(W),R=a(249),O=n(R),M=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={updateState:!1},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),o(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){p.default.CoreController.addEventListener("updateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",this.handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone.bind(this),this.listernerBackupid),
u.default.getTkRoom()&&u.default.getTkRoom().onPageFinished&&u.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){p.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"handlerUpdateMobileDeviceTypefrom_mobileSdk_changeInitPageParameterFormPhone",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"callAllWrapOnClick",value:function(e){p.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"render",value:function(){return d.default.createElement("section",{className:"app-mobile  all-container "+("phone"===m.default.mobileDeviceType?"phone":"pad"),onTouchStart:this.callAllWrapOnClick.bind(this)},d.default.createElement(v.default,null)," ",d.default.createElement(y.default,{id:"moreBlackboardDrag",blackboardThumbnailImageId:"blackboardThumbnailImageId",blackboardCanvasBackgroundColor:"#ffffff"}),d.default.createElement(T.default,{blackboardThumbnailImageId:"blackboardThumbnailImageId",blackboardThumbnailImageBackgroundColor:"#ffffff",blackboardThumbnailImageWidth:"2rem"}),d.default.createElement(w.default,{id:"page_wrap"})," ",m.default.playback?void 0:d.default.createElement(P.default,{id:"lc_tool_container"}),d.default.createElement(_.default,{id:"timerDrag"}),d.default.createElement(E.default,{id:"dialDrag"}),d.default.createElement(x.default,{id:"answerDrag"}),d.default.createElement(N.default,{id:"responderDrag"}),d.default.createElement(L.default,{id:"studentResponderDrag"}),d.default.createElement(O.default,null))}}]),t}(d.default.Component);t.default=M,e.exports=t.default},252:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(18),u=n(c),h=a(10),p=n(h),g=a(19),m=n(g),f=a(24),v=n(f),b=a(20),y=n(b),S=a(12),T=n(S),k=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.h5FileId=null,this.state={h5FileSrc:"",h5DocumentActionClick:y.default.handler.getAppPermissions("h5DocumentActionClick")},this.H5IsOnload=!1,this.h5ActionJson={}}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;this.h5Frame=document.getElementById("h5DocumentFrame").contentWindow,p.default.Window.addEventListener(u.default.EVENTTYPE.WindowEvent.onMessage,e.handlerOnMessage.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(u.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("openDocuemntOrMediaFile",e.handlerOpenDocuemntOrMediaFile.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("receive-msglist-ShowPage-lastDocument",e.handlerShowLastDocument.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("h5DocumentPageUpClick",e.handlerH5FilePageUpClick.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("h5DocumentPageDownClick",e.handlerH5FilePageDownClick.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("setH5FileFrameSrc",e.setH5FileFrameSrc.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("updateAppPermissions_h5DocumentPagingPage",e.handlerUpdateAppPermissions_h5DocumentPagingPage.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("updateAppPermissions_h5DocumentActionClick",e.handlerUpdateAppPermissions_h5DocumentActionClick.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("skipPage_h5document",e.handlerSkipPage_h5document.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;p.default.CoreController.removeBackupListerner(e.listernerBackupid),p.default.Window.removeBackupListerner(e.listernerBackupid)}},{key:"handlerUpdateAppPermissions_h5DocumentPagingPage",value:function(){var e=this;if("h5document"===e.props.fileTypeMark){var t=function(e){p.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"h5document",data:e}})};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:t}})}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=this,n=e.message;switch(n.name){case"ShowPage":var r=a.h5FileId!==n.data.filedata.fileid;a.h5FileId=n.data.filedata.fileid,a._handlerReceiveShowPageSignalling({message:{data:n.data,open:r,source:"room-pubmsg"}});break;case"H5DocumentAction":var i=function(e){var r=e.currpage,i=n.data;t.H5IsOnload===!1&&T.default.playback&&(t.h5ActionJson[r]&&t.h5ActionJson[r].length>0?t.h5ActionJson[r].push(i):(t.h5ActionJson[r]=[],t.h5ActionJson[r].push(i)),L.Logger.warning("iframe加载好之前保存H5文件动作：",t.h5ActionJson)),a.h5Frame.postMessage(JSON.stringify(i),"*")};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:i}})}}},{key:"handlerRoomDelmsg",value:function(e){}},{key:"handlerOnMessage",value:function(e){var t=this,a=e.message.event;t.handlerIframeMessage(a)}},{key:"handlerIframeMessage",value:function(e){var t=this,a=this;if(e.data){var n=void 0;try{n=JSON.parse(e.data)}catch(t){return void L.Logger.warning("iframe message data can't be converted to JSON , iframe data:",e.data)}if(n.method)switch(L.Logger.debug("[h5]receive remote iframe data form "+e.origin+":",e),n.method){case"onPagenum":var r=n.totalPages;a.initH5Document(r);break;case"onFileMessage":n.method="onFileMessage",v.default.sendSignallingFromH5DocumentAction(n),p.default.CoreController.dispatchEvent({type:"resetAllLeftToolButtonOpenStateToFalse"});break;case"onLoadComplete":this.H5IsOnload=!0;var i=function(e){a.h5FileJumpPage(e);var n=e.currpage;!m.default.isEmpty(t.h5ActionJson)&&t.h5ActionJson[n]&&0!==t.h5ActionJson[n].length&&(t.h5ActionJson[n].map(function(e,t){a.h5Frame.postMessage(JSON.stringify(e),"*")}),t.h5ActionJson={})},o=n.coursewareRatio||16/9;p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:i}}),p.default.CoreController.dispatchEvent({type:"updateLcScaleWhenAynicPPTInitHandler",message:{lcLitellyScalc:o}})}}}},{key:"initH5Document",value:function(e){this._sendDocumentPageChangeAndSaveWhiteboard(e)}},{key:"handlerInitAppPermissions",value:function(e){this._sendDocumentPageChangeAndSaveWhiteboard()}},{key:"handlerUpdateAppPermissions_h5DocumentActionClick",value:function(){var e=this;e.setState({h5DocumentActionClick:y.default.handler.getAppPermissions("h5DocumentActionClick")})}},{key:"handlerSkipPage_h5document",value:function(e){var t=this;if("h5document"===t.props.fileTypeMark){var a=e.message.currpage;t._skipH5documentPaging(a)}}},{key:"handlerOpenDocuemntOrMediaFile",value:function(e){var t=this,a=e.message,n=t.h5FileId!==a.filedata.fileid;t.h5FileId=a.filedata.fileid,a.isH5Document&&t._handlerReceiveShowPageSignalling({message:{data:a,open:n,source:"h5DocumentClickEvent"}})}},{key:"handlerShowLastDocument",value:function(e){e.message.open=this.h5FileId!==e.message.data.filedata.fileid,this.h5FileId=e.message.data.filedata.fileid,this._handlerReceiveShowPageSignalling(e)}},{key:"_handlerReceiveShowPageSignalling",value:function(e){var t=this,a=e.message.data,n=e.message.open;if(this.h5FileId=a.filedata.fileid,t.h5DocumentData=a,!a.isMedia&&a.isH5Document){var r=!1,i=function(i){if(!n){a.filedata.pagenum=i.pagenum;var o=e.message.source;"room-pubmsg"===o&&a.filedata.fileid===t.fileid&&Number(a.filedata.currpage)===i.currpage&&(r=!0)}};if(p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:i}}),r)return;"room-pubmsg"!==e.message.source&&"room-msglist"!==e.message.source&&"h5DocumentClickEvent"!==e.message.source||n&&t._openH5DocumentHandler(a.filedata),t.slideChangeToLc(a.filedata),t.h5FileJumpPage(a.filedata)}}},{key:"h5FileJumpPage",value:function(e){var t=e.currpage,a=JSON.stringify({method:"onJumpPage",toPage:t});this.h5Frame.postMessage(a,"*"),this._sendDocumentPageChangeAndSaveWhiteboard(e.pagenum,t)}},{key:"_openH5DocumentHandler",value:function(e){var t=this,a="h5document",n=u.default.SERVICEINFO.address,r=e.swfpath;t.props.changeFileTypeMark(a),p.default.CoreController.dispatchEvent({type:"resetLcDefault"}),p.default.CoreController.dispatchEvent({type:"updateLcScaleWhenAynicPPTInitHandler",message:{lcLitellyScalc:16/9}}),p.default.CoreController.dispatchEvent({type:"setNewPptFrameSrc",message:{src:""}}),this.H5IsOnload=!1,t.setState({h5FileSrc:n+r}),p.default.CoreController.dispatchEvent({type:"checkSelectMouseState",message:{fileTypeMark:a}})}},{key:"setH5FileFrameSrc",value:function(e){this.setState({h5FileSrc:e.message.src||""})}},{key:"slideChangeToLc",value:function(e){p.default.CoreController.dispatchEvent({type:"saveLcStackToStorage",message:{}}),p.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:e}}),p.default.CoreController.dispatchEvent({type:"recoverCurrpageLcData"}),p.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"h5document",data:e}})}},{key:"handlerH5FilePageUpClick",value:function(){var e=this,t=JSON.stringify({method:"onPageup"});e.h5Frame.postMessage(t,"*"),e.changCurrPageUp()}},{key:"handlerH5FilePageDownClick",value:function(){var e=this,t=JSON.stringify({method:"onPagedown"});e.h5Frame.postMessage(t,"*"),e.changCurrPageDown()}},{key:"changCurrPageUp",value:function(){var e=this,t=function(t){var a=t.currpage;t.pagenum,a--,a<=1&&(a=1),t.currpage=a,e.slideChangeToLc(t),e.h5DocumentData.filedata=t,p.default.CoreController.dispatchEvent({type:"documentPageChange",message:e.h5DocumentData}),e.h5DocumentData.action="onJumpPage",e.sendSignallingToH5File(e.h5DocumentData),p.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"h5document",data:t}})};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:t}})}},{key:"changCurrPageDown",value:function(){var e=this,t=function(t){var a=t.currpage,n=t.pagenum;a++,a>=n&&(a=n),t.currpage=a,e.slideChangeToLc(t),e.h5DocumentData.filedata=t,p.default.CoreController.dispatchEvent({type:"documentPageChange",message:e.h5DocumentData}),e.h5DocumentData.action="onJumpPage",e.sendSignallingToH5File(e.h5DocumentData),p.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"h5document",data:t}})};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:t}})}},{key:"sendSignallingToH5File",value:function(e){var t=!1,a="DocumentFilePage_ShowPage";v.default.sendSignallingFromShowPage(t,a,e)}},{key:"_skipH5documentPaging",value:function(e){var t=this,a=null,n=e;a=JSON.stringify({method:"onJumpPage",toPage:n}),this.h5Frame.postMessage(a,"*");var r=function(a){t.h5DocumentData.filedata=a,t.h5DocumentData.filedata.currpage=e,t.slideChangeToLc(t.h5DocumentData.filedata),p.default.CoreController.dispatchEvent({type:"documentPageChange",message:t.h5DocumentData}),t.sendSignallingToH5File(t.h5DocumentData)};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:r}})}},{key:"_updateLcScaleWhenAynicPPTInitHandler",value:function(e){p.default.CoreController.dispatchEvent({type:"updateLcScaleWhenAynicPPTInitHandler",message:{lcLitellyScalc:e}})}},{key:"_sendDocumentPageChangeAndSaveWhiteboard",value:function(e,t){var a=this;if(a.setState({h5DocumentActionClick:y.default.handler.getAppPermissions("h5DocumentActionClick")}),"h5document"===a.props.fileTypeMark){var n=function(a){e&&(a.pagenum=e),t&&(a.currpage=t);var n={isMedia:!1,isDynamicPPT:!1,isGeneralFile:!1,isH5Document:!0,action:"show",mediaType:"",filedata:a};p.default.CoreController.dispatchEvent({type:"documentPageChange",message:n}),p.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:a}}),p.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"h5document",data:a}})};p.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:n}})}}},{key:"render",value:function(){var e=this.props.fileTypeMark,t=this.state,a=t.h5FileSrc,n=t.h5DocumentActionClick,r=Object.assign({display:"h5document"==e?"block":"none"},this.props.styleJson);return d.default.createElement("div",{id:"h5FileWrap",style:r,className:"h5-file-wrap add-position-absolute-top0-left0"},d.default.createElement("iframe",{allowFullScreen:"true",id:"h5DocumentFrame",scrolling:"no",src:a,name:"h5FileFrame"}),d.default.createElement("div",{className:"student-disabled add-position-absolute-top0-left0",style:{display:n?"none":"block"}}),d.default.createElement("div",{id:"h5Document-layer",className:"student-disabled add-position-absolute-top0-left0",style:{display:n?"none":"block"}}))}}]),t}(d.default.Component);t.default=k,e.exports=t.default},253:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},c=a(2),u=n(c),h=a(10),p=n(h),g=a(19),m=n(g),f=a(24),v=n(f),b=a(115),y=n(b),S=function(e){function t(e){i(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.containerWidthAndHeight=Object.assign({},this.props.containerWidthAndHeight),this.instanceId=void 0!==this.props.instanceId?this.props.instanceId:"whiteboard_default",this.whiteboardElementId="whiteboard_container_"+this.instanceId,this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;p.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;e.props.saveImage&&y.default.downCanvasImageToLocalFile(e.instanceId),y.default.destroyWhiteboardInstance(e.instanceId),p.default.Window.removeBackupListerner(e.listernerBackupid),p.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.show!==this.props.show&&this.props.show&&y.default.resizeWhiteboardHandler(a.instanceId),!a.props.containerWidthAndHeight||a.props.containerWidthAndHeight.width===a.containerWidthAndHeight.width&&a.props.containerWidthAndHeight.height===a.containerWidthAndHeight.height||(Object.assign(a.containerWidthAndHeight,a.props.containerWidthAndHeight),y.default.updateContainerWidthAndHeight(a.instanceId,a.containerWidthAndHeight)),a.props.isBaseboard!==e.isBaseboard&&y.default.updateIsBaseboard(a.instanceId,a.props.isBaseboard),a.props.dependenceBaseboardWhiteboardID!==e.dependenceBaseboardWhiteboardID&&y.default.updateDependenceBaseboardWhiteboardID(a.instanceId,a.props.dependenceBaseboardWhiteboardID),a.props.deawPermission!==e.deawPermission&&y.default.changeWhiteboardDeawPermission(a.props.deawPermission,a.instanceId),a.props.useToolKey!==e.useToolKey&&y.default.activeWhiteboardTool(a.props.useToolKey,a.instanceId),a.props.useToolColor!==e.useToolColor&&y.default.updateColor(a.instanceId,{primary:a.props.useToolColor}),a.props.pencilWidth!==e.pencilWidth&&y.default.updatePencilWidth(a.instanceId,{pencilWidth:a.props.pencilWidth}),a.props.saveRedoStack!==e.saveRedoStack&&y.default.updateWhiteboardSaveRedoStackAndSaveUndoStack(a.instanceId,{saveRedoStack:a.props.saveRedoStack}),a.props.fontSize!==e.fontSize&&y.default.updateTextFont(a.instanceId,{fontSize:a.props.fontSize}),a.props.imageThumbnailId!==e.imageThumbnailId&&y.default.updateImageThumbnailId(a.instanceId,a.props.imageThumbnailId),a.props.backgroundColor!==e.backgroundColor&&y.default.updateColor(a.instanceId,{background:a.props.backgroundColor})}},{key:"handlerResizeHandler",value:function(e){var t=this;e&&e.message&&void 0!=e.message.eleWHPercent&&y.default.updateWhiteboardMagnification(t.instanceId,e.message.eleWHPercent)}},{key:"sendSignallingToServer",value:function(e,t,a,n,r,i,o,s){var l=!1;v.default.sendSignallingFromSharpsChange(l,e,t,a,n,r,i,o,s)}},{key:"delSignallingToServer",value:function(e,t,a,n){var r=!0;v.default.sendSignallingFromSharpsChange(r,e,t,a,n)}},{key:"resizeWhiteboardSizeCallback",value:function(e){this.props.resizeWhiteboardSizeCallback&&"function"==typeof this.props.resizeWhiteboardSizeCallback&&this.props.resizeWhiteboardSizeCallback(e)}},{key:"noticeUpdateToolDescCallback",value:function(e){}},{key:"_lcInit",value:function(){var e=this;if(!y.default.hasWhiteboardById(e.instanceId)){var t={whiteboardElementId:e.whiteboardElementId,id:e.instanceId,productionOptions:{proprietaryTools:!0,isBaseboard:this.props.isBaseboard,dependenceBaseboardWhiteboardID:this.props.dependenceBaseboardWhiteboardID,deawPermission:this.props.deawPermission,containerWidthAndHeight:this.props.containerWidthAndHeight,associatedMsgID:this.props.associatedMsgID,associatedUserID:this.props.associatedUserID,needLooadBaseboard:this.props.needLooadBaseboard,nickname:this.props.nickname,useToolKey:this.props.useToolKey,saveRedoStack:this.props.saveRedoStack,imageThumbnailId:this.props.imageThumbnailId,backgroundColor:this.props.backgroundColor,imageThumbnailTipContent:this.props.imageThumbnailTipContent},handler:{sendSignallingToServer:e.sendSignallingToServer.bind(e),delSignallingToServer:e.delSignallingToServer.bind(e),resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),noticeUpdateToolDescCallback:e.noticeUpdateToolDescCallback.bind(e)}},a={tool_pencil:{},tool_eraser:{},tool_text:{}};y.default.productionWhiteboard(t),y.default.registerWhiteboardTools(e.instanceId,a),y.default.clearRedoAndUndoStack(e.instanceId),y.default.hasWhiteboardFiledata(e.instanceId)||y.default.updateWhiteboardFiledata(e.instanceId,y.default.getWhiteboardDefaultFiledata({fileid:this.instanceId,filetype:"blackboard",filename:"blackboard"})),y.default.loadCurrpageWhiteboard(e.instanceId),y.default.resizeWhiteboardHandler(e.instanceId),y.default.updateTextFont(e.instanceId,{fontSize:e.props.fontSize}),y.default.updateColor(e.instanceId,{primary:e.props.useToolColor}),y.default.updatePencilWidth(e.instanceId,{pencilWidth:e.props.pencilWidth})}}},{key:"render",value:function(){var e=this,t=e.props,a=t.show,n=r(t,["show"]);return u.default.createElement("div",s({id:e.whiteboardElementId,style:{display:a?"block":"none"},className:"overflow-hidden  scroll-literally-container "},m.default.filterContainDataAttribute(n)))}}]),t}(u.default.Component);S.propTypes={instanceId:c.PropTypes.string.isRequired,containerWidthAndHeight:c.PropTypes.object.isRequired,isBaseboard:c.PropTypes.bool.isRequired,deawPermission:c.PropTypes.bool.isRequired},t.default=S,e.exports=t.default},254:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(10),u=n(c),h=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.state={show:!1,blackboardThumbnailImageWidth:this.props.blackboardThumbnailImageWidth||"2rem",blackboardThumbnailImageBackgroundColor:this.props.blackboardThumbnailImageBackgroundColor||"#ffffff",blackboardThumbnailImageId:this.props.blackboardThumbnailImageId||"blackboardThumbnailImageId"}}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;u.default.CoreController.addEventListener("updateBlackboardThumbnailImageFromMoreBlackboard",e.handlerUpdateBlackboardThumbnailImageFromMoreBlackboard.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;u.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerUpdateBlackboardThumbnailImageFromMoreBlackboard",value:function(e){var t=e.message,a=t.show,n=t.blackboardThumbnailImageId,r=t.blackboardThumbnailImageBackgroundColor;n!==this.state.blackboardThumbnailImageId&&this.setState({blackboardThumbnailImageId:n}),a!==this.state.show&&this.setState({show:a}),r!==this.state.blackboardThumbnailImageBackgroundColor&&this.setState({blackboardThumbnailImageBackgroundColor:r})}},{key:"blackboardThumbnailOnClick",value:function(){this.setState({show:!1}),u.default.CoreController.dispatchEvent({type:"updateBlackboardThumbnailImageFromBlackboardThumbnailImage",message:{action:"magnify"}})}},{key:"render",value:function(){return d.default.createElement("article",{className:"blackboard-thumbnail-image-container add-position-absolute-bottom0-left0",onClick:"mobile"===TK.SDKTYPE?void 0:this.blackboardThumbnailOnClick.bind(this),onTouchStart:this.blackboardThumbnailOnClick.bind(this),style:{display:this.state.show?"block":"none",zIndex:160,border:"mobile"===TK.SDKTYPE?"0.01rem solid rgba(41, 41, 41, 0.81)":"0.01rem solid rgb(40, 54, 88)"}},d.default.createElement("img",{className:"blackboard-thumbnail-img",id:this.state.blackboardThumbnailImageId,style:{display:"block",width:this.state.blackboardThumbnailImageWidth,height:"auto",backgroundColor:this.state.blackboardThumbnailImageBackgroundColor}}),d.default.createElement("span",{className:"blackboard-thumbnail-imageDescribe add-position-absolute-bottom0-left0 add-nowrap",id:this.state.blackboardThumbnailImageId+"_imageDescribe",style:{display:"block",width:this.state.blackboardThumbnailImageWidth,height:"auto",fontSize:"0.2rem"}}))}}]),t}(d.default.Component);t.default=h,e.exports=t.default},255:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(36),h=(n(u),a(10)),p=n(h),g=a(18),m=n(g),f=a(12),v=n(f),b=a(19),y=(n(b),a(20)),S=(n(y),a(24)),T=n(S),k=a(22),w=n(k),C=a(253),P=n(C),D=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.state=Object.assign({},this._getDefaultState(),{show:!1,moreBlackboardDrag:{pagingToolLeft:"",pagingToolTop:""}}),this.blackboardCanvasBackgroundColor=this.props.blackboardCanvasBackgroundColor||"#ffffff",this.blackboardThumbnailImageId=this.props.blackboardThumbnailImageId||"blackboardThumbnailImageId",this.associatedMsgID="BlackBoard",this.currentTapKey=void 0,this.whiteboardMagnification=16/9,this.maxBlackboardNumber=8}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;p.default.Window.addEventListener(m.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomParticipantJoin,e.handlerRoomParticipantJoin.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomParticipantLeave,e.handlerRoomParticipantLeave.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPlaybackClearAll,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("receive-msglist-BlackBoard",e.handlerReceive_msglist_BlackBoard.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("isSendSignallingFromBlackBoardDrag",e.handlerBlackBoardDrag.bind(e),e.listernerBackupid),p.default.CoreController.addEventListener("updateBlackboardThumbnailImageFromBlackboardThumbnailImage",e.handlerUpdateBlackboardThumbnailImageFromBlackboardThumbnailImage.bind(e),e.listernerBackupid),this._init()}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(this.disabledBlackboardToolBtnTimer),p.default.Window.removeBackupListerner(e.listernerBackupid),p.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(e,t){t.show!==this.state.show&&this.state.show&&this._updateContainerWidthAndHeight(),t.blackBoardState!==this.state.blackBoardState&&(this._updateBlackBoardDescListByBlackBoardState(),this._updateContainerWidthAndHeight())}},{key:"handlerUpdateBlackboardThumbnailImageFromBlackboardThumbnailImage",value:function(e){var t=e.message.action;this.blackboardThumbnailImageClick({action:t,initiative:!1})}},{key:"handlerRoomPlaybackClearAll",value:function(){this._recoverDedaultState()}},{key:"handlerRoomDisconnected",value:function(){this._recoverDedaultState()}},{key:"handlerRoomParticipantJoin",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerRoomParticipantLeave",value:function(){this._updateBlackBoardDescListByBlackBoardState()}},{key:"handlerOnResize",value:function(){this._updateContainerWidthAndHeight()}},{key:"handlerResizeHandler",value:function(e){this._updateContainerWidthAndHeight()}},{key:"handlerReceive_msglist_BlackBoard",value:function(e){this.handlerRoomPubmsg(e)}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard":(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant)&&void 0===this.state.useToolColor?this.setState({useToolColor:"#FF0000"}):m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||void 0!==this.state.useToolColor||this.setState({useToolColor:"#000000"}),((m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol||m.default.hasRole.rolePlayback)&&"_none"!==t.data.blackBoardState||"_dispenseed"===t.data.blackBoardState||"_recycle"===t.data.blackBoardState||"_againDispenseed"===t.data.blackBoardState)&&this.setState({show:!0});var a=this.currentTapKey,n=this.state.blackBoardState;void 0!==t.data.currentTapKey&&(this.currentTapKey=t.data.currentTapKey),void 0!==t.data.currentTapPage&&this.state.currentTapPage!==t.data.currentTapPage&&(this.state.currentTapPage=t.data.currentTapPage),this.setState({blackBoardState:t.data.blackBoardState,updateState:!this.state.updateState,currentTapPage:this.state.currentTapPage}),n===t.data.blackBoardState&&a!==t.data.currentTapKey&&(!m.default.hasRole.roleStudent||"_dispenseed"!==t.data.blackBoardState&&"_againDispenseed"!==t.data.blackBoardState)&&this._updateBlackBoardDescListByBlackBoardState()}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard":this._recoverDedaultState();break;case"ClassBegin":this._recoverDedaultState()}}},{key:"handlerBlackBoardDrag",value:function(e){var t=e.message.data;"_recycle"===this.state.blackBoardState&&T.default.sendSignallingFromBlackBoardDrag(t)}},{key:"handlerCloseClick",value:function(e){var t=!0,a={};T.default.sendSignallingFromBlackBoard(a,t)}},{key:"handlerBlackBoardDispatchClick",value:function(){var e=this,t=void 0,a=this.props,n=a.translateX,r=a.translateY,i={translateX:n,translateY:r};if("_prepareing"===this.state.blackBoardState)T.default.sendSignallingFromBlackBoardDrag(i),t="_dispenseed";else if("_dispenseed"===this.state.blackBoardState)T.default.sendSignallingFromBlackBoardDrag(i),
t="_recycle";else if("_recycle"===this.state.blackBoardState)t="_againDispenseed";else if("_againDispenseed"===this.state.blackBoardState)T.default.sendSignallingFromBlackBoardDrag(i),t="_recycle";else if("_none"===this.state.blackBoardState)return void L.Logger.error("current blackBoardState is _none , can't execute blackBoardDispatchClick!");if(t){var o=!1,s={blackBoardState:t,currentTapKey:this.currentTapKey,currentTapPage:this.state.currentTapPage};T.default.sendSignallingFromBlackBoard(s,o)}this.setState({disabledBlackboardToolBtn:!0}),clearTimeout(this.disabledBlackboardToolBtnTimer),this.disabledBlackboardToolBtnTimer=setTimeout(function(){e.setState({disabledBlackboardToolBtn:!1})},300)}},{key:"handlerTabClick",value:function(e){if(void 0!==e){var t=!1,a={blackBoardState:this.state.blackBoardState,currentTapKey:e,currentTapPage:this.state.currentTapPage};T.default.sendSignallingFromBlackBoard(a,t)}}},{key:"resizeWhiteboardSizeCallback",value:function(e){}},{key:"handleToolClick",value:function(e){"tool_pencil"!==e&&"tool_text"!==e&&"tool_eraser"!==e||this.setState({useToolKey:e})}},{key:"changeStrokeColorClick",value:function(e){this.setState({useToolColor:e})}},{key:"onTapPrevOrNextClick",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],a=Object.keys(this.state.blackBoardDescList).length,n=Math.ceil(a/(this.maxBlackboardNumber-1));switch(e){case"prev":this.state.currentTapPage--;break;case"next":this.state.currentTapPage++}if(this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>n&&(this.state.currentTapPage=n),t){var r=!1,i={blackBoardState:this.state.blackBoardState,currentTapKey:this.currentTapKey,currentTapPage:this.state.currentTapPage};T.default.sendSignallingFromBlackBoard(i,r)}this.setState({currentTapPage:this.state.currentTapPage})}},{key:"blackboardThumbnailImageClick",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.action,a=e.initiative,n=void 0===a||a;if("_none"!==this.state.blackBoardState)switch(t){case"shrink":this.setState({blackboardThumbnailImage:this.blackboardThumbnailImageId}),n&&p.default.CoreController.dispatchEvent({type:"updateBlackboardThumbnailImageFromMoreBlackboard",message:{show:!0,blackboardThumbnailImageId:this.blackboardThumbnailImageId,blackboardThumbnailImageBackgroundColor:this.blackboardCanvasBackgroundColor}});break;case"magnify":this.setState({blackboardThumbnailImage:void 0}),n&&p.default.CoreController.dispatchEvent({type:"updateBlackboardThumbnailImageFromMoreBlackboard",message:{show:!1,blackboardThumbnailImageId:this.blackboardThumbnailImageId,blackboardThumbnailImageBackgroundColor:this.blackboardCanvasBackgroundColor}})}else p.default.CoreController.dispatchEvent({type:"updateBlackboardThumbnailImageFromMoreBlackboard",message:{show:!1,blackboardThumbnailImageId:this.blackboardThumbnailImageId,blackboardThumbnailImageBackgroundColor:this.blackboardCanvasBackgroundColor}})}},{key:"_init",value:function(){this._updateContainerWidthAndHeight()}},{key:"_updateContainerWidthAndHeight",value:function(){var e=document.getElementById("blackboardContentBox");if("mobile"===TK.SDKTYPE){if(e){var t=e.clientWidth,a=e.clientHeight;this.state.containerWidthAndHeight.width=t,this.state.containerWidthAndHeight.height=a,this.setState({containerWidthAndHeight:this.state.containerWidthAndHeight})}}else if("pc"===TK.SDKTYPE&&e){var t=e.clientWidth,a=t*(1/this.whiteboardMagnification);this.state.containerWidthAndHeight.width=t,this.state.containerWidthAndHeight.height=a,this.setState({containerWidthAndHeight:this.state.containerWidthAndHeight})}}},{key:"_updateBlackBoardDescListByBlackBoardState",value:function(){if(w.default.getTkRoom()){var e=this.state.blackBoardDescList;"blackBoardCommon"===this.currentTapKey||w.default.getTkRoom().getUser(this.currentTapKey)||(this.currentTapKey="blackBoardCommon"),"_prepareing"===this.state.blackBoardState?((m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol||m.default.hasRole.rolePlayback)&&(this.currentTapKey="blackBoardCommon"),e=Object.assign({},this._getBlackBoardCommon())):"_dispenseed"===this.state.blackBoardState||"_againDispenseed"===this.state.blackBoardState?(m.default.hasRole.roleStudent&&(this.currentTapKey=w.default.getTkRoom().getMySelf().id),e=Object.assign({},this._getBlackBoardCommon(),this._getStudentBlackboard())):"_recycle"===this.state.blackBoardState?e=Object.assign({},this._getBlackBoardCommon(),this._getStudentBlackboard()):"_none"===this.state.blackBoardState&&(e={});var t=Object.keys(e).length,a=Math.ceil(t/(this.maxBlackboardNumber-1));this.state.currentTapPage<1?this.state.currentTapPage=1:this.state.currentTapPage>a&&(this.state.currentTapPage=a),this.setState({blackBoardDescList:e,currentTapPage:this.state.currentTapPage})}}},{key:"_getStudentBlackboard",value:function(){var e={},t=!0,a=!1,n=void 0;try{for(var r,i=Object.entries(w.default.getTkRoom().getSpecifyRoleList(m.default.role.roleStudent))[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=o(r.value,2),l=s[0],d=s[1];d.playbackLeaved||(e[l]={instanceId:l,show:this.currentTapKey===l,isBaseboard:!1,deawPermission:!1,dependenceBaseboardWhiteboardID:"blackBoardCommon",needLooadBaseboard:!0,saveImage:!1,nickname:d.nickname},!m.default.role.roleStudent||"_dispenseed"!==this.state.blackBoardState&&"_againDispenseed"!==this.state.blackBoardState||w.default.getTkRoom().getMySelf().id!==l||(e[l].deawPermission=!0),"_recycle"===this.state.blackBoardState&&(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant)&&(e[l].deawPermission=!0))}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},{key:"_getBlackBoardCommon",value:function(e){var t={blackBoardCommon:{instanceId:"blackBoardCommon",show:"blackBoardCommon"===this.currentTapKey,isBaseboard:"_prepareing"===this.state.blackBoardState,deawPermission:m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant,dependenceBaseboardWhiteboardID:void 0,needLooadBaseboard:!1,saveImage:!1,nickname:"blackBoardCommon"}};return e&&"object"==typeof e&&Object.assign(t.blackBoardCommon,e),t}},{key:"_getDefaultState",value:function(){var e={blackBoardState:"_none",disabledBlackboardToolBtn:!1,blackBoardDescList:{},useToolKey:"tool_pencil",useToolColor:void 0===m.default.hasRole.roleChairman?void 0:m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant?"#FF0000":"#000000",containerWidthAndHeight:{width:0,height:0},updateState:!1,currentTapPage:1,blackboardToolsInfo:"mobile"!==TK.SDKTYPE?{pencil:5,text:30,eraser:30}:{pencil:5,text:45,eraser:150},selectBlackboardToolSizeId:"blackboard_size_small",blackboardThumbnailImage:void 0};return e}},{key:"_loadBlackBoardElementArray",value:function(e){var t=this,a=[],n=[],r="tool_eraser"===this.state.useToolKey?this.state.blackboardToolsInfo.eraser:this.state.blackboardToolsInfo.pencil,i=this.state.blackboardToolsInfo.text,o=[],s=void 0,l=!0,d=!1,u=void 0;try{for(var h,p=Object.values(e)[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var g=h.value;"blackBoardCommon"!==g.instanceId?o.push(g):s=g}}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}o.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("instanceId")&&void 0!==t&&t.hasOwnProperty("instanceId")?e.instanceId<t.instanceId?-1:e.instanceId>t.instanceId?1:0:0}),s&&o.unshift(s);var f=Object.keys(e).length,b=void 0,y=void 0,S=Math.ceil(f/(this.maxBlackboardNumber-1));if(S>1)if(b=100/(this.maxBlackboardNumber-1),1===S||this.state.currentTapPage<S)y=(this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)*b;else{var T=S*(this.maxBlackboardNumber-1)-f;y=((this.state.currentTapPage-1)*(this.maxBlackboardNumber-1)-T)*b}return o.forEach(function(e,o){if("blackBoardCommon"===e.instanceId||"blackBoardCommon"!==e.instanceId&&w.default.getTkRoom()&&w.default.getTkRoom().getUser(e.instanceId)){var s=void 0;a.push(c.default.createElement("li",{className:"tab-content-option ",key:e.instanceId,style:{display:e.show?"":"none"}},c.default.createElement(P.default,{containerWidthAndHeight:t.state.containerWidthAndHeight,resizeWhiteboardSizeCallback:t.resizeWhiteboardSizeCallback.bind(t),instanceId:e.instanceId,show:e.show,isBaseboard:e.isBaseboard,deawPermission:e.deawPermission,dependenceBaseboardWhiteboardID:e.dependenceBaseboardWhiteboardID,associatedMsgID:t.associatedMsgID,associatedUserID:s,needLooadBaseboard:e.needLooadBaseboard,saveImage:e.saveImage,nickname:e.nickname,useToolKey:t.state.useToolKey,fontSize:i,useToolColor:t.state.useToolColor,pencilWidth:r,saveRedoStack:m.default.hasRole.roleChairman,imageThumbnailId:e.show?t.state.blackboardThumbnailImage:void 0,backgroundColor:t.blackboardCanvasBackgroundColor,imageThumbnailTipContent:v.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle}))),n.push(c.default.createElement("li",{style:{marginLeft:0===o&&void 0!==y?-y+"%":void 0,width:void 0!==b?b+"%":void 0,maxWidth:void 0!==b?b+"%":void 0,minWidth:void 0!==b?b+"%":void 0},className:"tap-option add-nowrap "+(e.show?"active":"")+(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant?" ":" disabled"),key:e.instanceId,onTouchStart:m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant?t.handlerTabClick.bind(t,e.instanceId):void 0},c.default.createElement("span",{className:"text add-nowrap"},"blackBoardCommon"===e.instanceId?v.default.language.languageData.header.tool.blackBoard.toolBtn.commonTeacher:w.default.getTkRoom().getUser(e.instanceId).nickname),c.default.createElement("em",{className:"separate"})))}}),{tabContentBlackBoardElementArray:a,tabBlackBoardElementArray:n}}},{key:"_loadToolColorsElementArray",value:function(){var e=this,t=[],a=[];return a="mobile"!==TK.SDKTYPE?["#FF0000","#FFFF00","#00FF00","#00FFFF","#0000FF","#FF00FF","#FE9401","#FF2C55","#007AFF","#7457F1","#626262","#000000"]:["#FF0000","#FFFF00","#007AFF","#000000"],a.forEach(function(a,n){var r="mobile"!==TK.SDKTYPE?c.default.createElement("li",{className:"color-option "+(e.state.useToolColor===a?" active":""),key:n,onTouchStart:e.changeStrokeColorClick.bind(e,a),style:{backgroundColor:a},id:"blackboard_color_"+e._colorFilter(a)}):c.default.createElement("li",{key:n,className:"blackboard-tool-option"},c.default.createElement("button",{id:"blackboard_color_"+e._colorFilter(a),className:"color-option "+(e.state.useToolColor===a?" active":""),style:{backgroundColor:a},onTouchStart:e.changeStrokeColorClick.bind(e,a)}));t.push(r)}),{toolColorsArray:t}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_recoverDedaultState",value:function(){clearTimeout(this.disabledBlackboardToolBtnTimer);var e=this._getDefaultState();this.currentTapKey=void 0,this.setState(Object.assign({},e,{show:!1})),p.default.CoreController.dispatchEvent({type:"updateBlackboardThumbnailImageFromMoreBlackboard",message:{show:!1,blackboardThumbnailImageId:this.blackboardThumbnailImageId,blackboardThumbnailImageBackgroundColor:this.blackboardCanvasBackgroundColor}})}},{key:"_changeStrokeSizeClick",value:function(e,t){this.setState({selectBlackboardToolSizeId:e,blackboardToolsInfo:Object.assign(this.state.blackboardToolsInfo,t)})}},{key:"render",value:function(){var e=this,t=e.state,a=t.blackBoardState,n=t.show,r=t.blackBoardDescList,i=t.containerWidthAndHeight,o=t.useToolKey,s=t.blackboardThumbnailImage,l=this.props.id,d="_none"!==a?"_prepareing"===a?v.default.language.languageData.header.tool.blackBoard.toolBtn.dispenseed:"_dispenseed"===a?v.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"_recycle"===a?v.default.language.languageData.header.tool.blackBoard.toolBtn.againDispenseed:"_againDispenseed"===a?v.default.language.languageData.header.tool.blackBoard.toolBtn.recycle:"":"",u=e._loadBlackBoardElementArray(r),h=u.tabContentBlackBoardElementArray,p=u.tabBlackBoardElementArray,g=e._loadToolColorsElementArray(),f=g.toolColorsArray,b=Object.keys(r).length,y=Math.ceil(b/(e.maxBlackboardNumber-1)),S=void 0,T=!("_recycle"===a||("_dispenseed"===a||"_againDispenseed"===a)&&(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol||m.default.hasRole.rolePlayback)),k="mobile"===TK.SDKTYPE&&"phone"===v.default.mobileDeviceType?!(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&(m.default.hasRole.rolePlayback||m.default.hasRole.rolePatrol||m.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a)):m.default.hasRole.rolePlayback||m.default.hasRole.rolePatrol||m.default.hasRole.roleStudent&&!("_dispenseed"===a||"_againDispenseed"===a),w="mobile"===TK.SDKTYPE&&"phone"===v.default.mobileDeviceType;if("mobile"===TK.SDKTYPE){var C=0;"pad"===v.default.mobileDeviceType?(w||(C+=.8),T||(C+=.8),k||(C+=1.15)):"phone"===v.default.mobileDeviceType&&(T||(C+=.8)),S={height:"calc( 100% - "+C+"rem )"}}return c.default.createElement("section",{id:l,className:"black-board-container "+(k?" hideBottom":" ")+(T?" hideTap":" ")+(w?" hideTitle":" "),style:{display:n?"block":"none",position:"absolute",opacity:void 0===s?void 0:0,zIndex:void 0===s?void 0:-999}},c.default.createElement("article",{className:"title-container",style:{display:w?"none":void 0}},c.default.createElement("span",{className:"title"},v.default.language.languageData.header.tool.blackBoard.content.blackboardHeadTitle),c.default.createElement("button",{className:"close",style:{display:m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant?"":"none"},title:v.default.language.languageData.header.tool.blackBoard.title.close,onTouchStart:e.handlerCloseClick.bind(e)}),"mobile"===TK.SDKTYPE&&"pad"===v.default.mobileDeviceType&&(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)?c.default.createElement("button",{className:"blackboard-thumbnail-image",onTouchStart:e.blackboardThumbnailImageClick.bind(e,{action:"shrink"}),title:v.default.language.languageData.header.tool.blackBoard.title.shrink}):void 0),c.default.createElement("article",{className:"tap-container clear-float",style:{display:T?"none":""}},c.default.createElement("button",{className:"prev add-fl "+(e.state.currentTapPage<=1?"disabled":""),disabled:e.state.currentTapPage<=1,style:{display:b<e.maxBlackboardNumber?"none":""},title:v.default.language.languageData.header.tool.blackBoard.title.prev,onTouchStart:e.state.currentTapPage<=1?void 0:e.onTapPrevOrNextClick.bind(e,"prev",!0)}),c.default.createElement("ul",{className:"tap add-fl clear-float"},p),c.default.createElement("button",{className:"next add-fr "+(e.state.currentTapPage>=y?"disabled":""),disabled:e.state.currentTapPage>=y,style:{display:b<e.maxBlackboardNumber?"none":""},title:v.default.language.languageData.header.tool.blackBoard.title.next,onTouchStart:e.state.currentTapPage>=y?void 0:e.onTapPrevOrNextClick.bind(e,"next",!0)})),c.default.createElement("article",{className:"tab-content-container",id:"blackboardContentBox",style:S},c.default.createElement("ul",{style:{width:i.width+"px",height:i.height+"px"},className:"tab-content clear-float overflow-hidden"},h)),c.default.createElement("article",{id:"blackboard-tool-container",className:"blackboard-tool-container clear-float",style:{display:k?"none":""}},"mobile"===TK.SDKTYPE&&"phone"===v.default.mobileDeviceType&&(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)?c.default.createElement("button",{className:"blackboard-thumbnail-image",onTouchStart:e.blackboardThumbnailImageClick.bind(e,{action:"shrink"}),title:v.default.language.languageData.header.tool.blackBoard.title.shrink}):void 0,c.default.createElement("ul",{className:"blackboard-tool clear-float",style:{display:m.default.hasRole.rolePlayback||m.default.hasRole.rolePatrol||m.default.hasRole.roleStudent&&"_dispenseed"!==a&&"_againDispenseed"!==a?"none":""}},c.default.createElement("li",{className:"blackboard-tool-option"},c.default.createElement("button",{id:"blackboard_tool_vessel_pencil",className:"tool-btn pencil-icon "+("tool_pencil"===o?" active":""),title:v.default.language.languageData.header.tool.blackBoard.boardTool.pen,onTouchStart:e.handleToolClick.bind(e,"tool_pencil")})),c.default.createElement("li",{className:"blackboard-tool-option"},c.default.createElement("button",{id:"blackboard_tool_vessel_text",className:"tool-btn text-icon"+("tool_text"===o?" active":""),title:v.default.language.languageData.header.tool.blackBoard.boardTool.text,onTouchStart:e.handleToolClick.bind(e,"tool_text")})),c.default.createElement("li",{className:"blackboard-tool-option"},c.default.createElement("button",{id:"blackboard_tool_vessel_eraser",className:"tool-btn eraser-icon"+("tool_eraser"===o?" active":""),title:v.default.language.languageData.header.tool.blackBoard.boardTool.eraser,onTouchStart:e.handleToolClick.bind(e,"tool_eraser")})),"mobile"!==TK.SDKTYPE?c.default.createElement("li",{className:"blackboard-tool-option colors  add-position-relative"},c.default.createElement("button",{id:"blackboard_tool_vessel_color",className:"tool-btn colors-icon",title:v.default.language.languageData.header.tool.blackBoard.boardTool.color},c.default.createElement("span",{className:"current-color",style:{backgroundColor:this.state.useToolColor}})),c.default.createElement("div",{className:"blackboard-color-size-box"},c.default.createElement("ul",{className:"tool-size-container",id:"blackboard_tool_size"},c.default.createElement("li",{id:"blackboard_size_small",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_small",{pencil:5,text:30,eraser:30}),className:"size-small "+("blackboard_size_small"===this.state.selectBlackboardToolSizeId?"active":"")},c.default.createElement("span",null)),c.default.createElement("li",{id:"blackboard_size_middle",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_middle",{pencil:15,text:36,eraser:90}),className:"size-middle "+("blackboard_size_middle"===this.state.selectBlackboardToolSizeId?"active":"")},c.default.createElement("span",null)),c.default.createElement("li",{id:"blackboard_size_big",onTouchStart:e._changeStrokeSizeClick.bind(e,"blackboard_size_big",{pencil:30,text:72,eraser:150}),className:"size-big "+("blackboard_size_big"===this.state.selectBlackboardToolSizeId?"active":"")},c.default.createElement("span",null))),c.default.createElement("ol",{className:"colors-container"},f))):f),"pc"===TK.SDKTYPE||"mobile"===TK.SDKTYPE&&"pad"===v.default.mobileDeviceType?c.default.createElement("span",{className:"blackboard-function-btn-container"},c.default.createElement("button",{style:{display:m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant?"":"none"},className:"blackboard-send-btn "+(this.state.disabledBlackboardToolBtn?"disabled":""),disabled:this.state.disabledBlackboardToolBtn,onTouchStart:e.handlerBlackBoardDispatchClick.bind(e)},d)):void 0))}}]),t}(c.default.Component);t.default=D,e.exports=t.default},256:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},u=a(2),h=r(u),p=a(10),g=r(p),m=a(19),f=r(m),v=a(12),b=r(v),y=a(18),S=r(y),T=a(20),k=r(T),w=a(22),C=r(w),P=a(116),D=r(P),_=a(24),A=r(_),E=a(257),I=r(E),x=function(e){function t(e){o(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.fileid=void 0,this.pptvideoStream=void 0,this.state={updateState:!1},this.newPptActionJson={},this.awaitHandleActionArray=[],this.dynamicPptOpen=!1}return s(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this;e._lcInit(),g.default.Window.addEventListener(S.default.EVENTTYPE.WindowEvent.onMessage,e.handlerOnMessage.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener(S.default.EVENTTYPE.RoomEvent.streamAdded_media,e.handlerStreamAdded_media.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("mobileSdk_closeDynamicPptWebPlay",e.handlerMobileSdk_closeDynamicPptWebPlay.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("mobileSdk_changeDynamicPptSize",e.handlermobileSdk_changeDynamicPptSize.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-ShowPage-lastDocument",e.handlerReceiveMsglistShowPageLastDocument.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("setNewPptFrameSrc",e.handlerSetNewPptFrameSrc.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("updateAppPermissions_newpptPagingPage",e.handlerUpdateAppPermissions_newpptPagingPage.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("updateAppPermissions_publishDynamicPptMediaPermission_video",e.handlerUpdateAppPermissions_publishDynamicPptMediaPermission_video.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("updateAppPermissions_dynamicPptActionClick",e.handlerUpdateAppPermissions_dynamicPptActionClick.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("openDocuemntOrMediaFile",e.handlerOpenDocuemntOrMediaFile.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("newpptPrevStepClick",e.handlerNewpptPrevStepClick.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("newpptNextStepClick",e.handlerNewpptNextStepClick.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("newpptPrevSlideClick",e.handlerNewpptPrevSlideClick.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("newpptNextSlideClick",e.handlerNewpptNextSlideClick.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("receive-msglist-ClassBegin",e.handlerReceiveMsglistClassBegin.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("playDynamicPPTMediaStream",e.handlerPlayDynamicPPTMediaStream.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("skipPage_dynamicPPT",e.handlerSkipPage_dynamicPPT.bind(e),e.listernerBackupid),g.default.CoreController.addEventListener("playbackControl_play_pause",e.handlerPlaybackControl_play_pause.bind(e),e.listernerBackupid),n(document).off("sendPPTMessageEvent"),n(document).on("sendPPTMessageEvent",function(t,a,n){e._handlerSendPPTMessageEvent(a,n)}),n(document).off("updateSlidesCountToLcElement"),n(document).on("updateSlidesCountToLcElement",function(e,t){if(t){var a=function(e){Object.assign(e,t),g.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:e}})};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:a}})}}),n(document).off("slideChangeToLcData"),n(document).on("slideChangeToLcData",function(e,t){if(t){g.default.CoreController.dispatchEvent({type:"saveLcStackToStorage",message:{}});var a=function(e){Object.assign(e,t),g.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:e}}),g.default.CoreController.dispatchEvent({type:"recoverCurrpageLcData"})};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:a}})}}),n(document).off("updateLcScaleWhenAynicPPTInit"),n(document).on("updateLcScaleWhenAynicPPTInit",function(t,a){a&&a.Width&&a.Height&&e._updateLcScaleWhenAynicPPTInitHandler(a.Width/a.Height)}),n(document).off("updateLcScale"),n(document).on("updateLcScale",function(e,t){g.default.CoreController.dispatchEvent({type:"resizeHandler",message:{eleWHPercent:t}})}),n(document).off("newppt_changeFileElementProperty"),n(document).on("newppt_changeFileElementProperty",function(e,t){var a=function(e){Object.assign(e,t),g.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:e}}),g.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"newppt",data:e}})};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:a}})})}},{key:"componentWillUnmount",value:function(){var e=this;g.default.CoreController.removeBackupListerner(e.listernerBackupid),g.default.Window.removeBackupListerner(e.listernerBackupid),n(document).off("sendPPTMessageEvent"),n(document).off("slideChangeToLcData"),n(document).off("updateSlidesCountToLcElement"),n(document).off("updateLcScaleWhenAynicPPTInit"),n(document).off("updateLcScale"),n(document).off("newppt_changeFileElementProperty")}},{key:"handlerPlaybackControl_play_pause",value:function(e){if(b.default.playback){var t=e.message.play,a={action:t?"playDynamicPpt":"stopDynamicPpt"};this._postMessage(a)}}},{key:"handlermobileSdk_changeDynamicPptSize",value:function(e){if("mobile"===TK.SDKTYPE&&e.message&&"object"==typeof e.message){var t={action:"resizeHandler"};Object.assign(t,e.message),this._postMessage(t)}}},{key:"handlerOnMessage",value:function(e){var t=this,a=e.message.event;t.handlerIframeMessage(a)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=this,n=e.message;switch(n.name){case"ShowPage":var r=a._saveFileidReturnOpen(n.data);a._handlerReceiveShowPageSignalling({message:{data:n.data,open:r,source:"room-pubmsg"}});break;case"NewPptTriggerActionClick":a.ServiceNewPptAynamicPPT.isOpenPptFile===!0&&!function(){var e=n.data,a=e.slide,r=e.fileid;a+=1;var i=function(n){var i=n.currpage,o=n.fileid;i===a&&r===o||!b.default.playback||(t.newPptActionJson[a]&&t.newPptActionJson[a].length>0?t.newPptActionJson[a].push(e):(t.newPptActionJson[a]=[],t.newPptActionJson[a].push(e)),L.Logger.warning("iframe加载好之前保存ppt动作：",t.newPptActionJson))};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:i}}),t._postMessage(n.data)}();break;case"ClassBegin":a.handlerClassBeginCloseDynamicPptVideo(),a._handlerClassBeginStartOrEnd()}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t._handlerClassBeginStartOrEnd()}}},{key:"handlerStreamAdded_media",value:function(e){if("pc"===TK.SDKTYPE){var t=e.stream,a=t.getAttributes();if(a&&"media"===a.type){var n={action:"closeDynamicPptAutoVideo"};this._postMessage(n)}}}},{key:"handlerMobileSdk_closeDynamicPptWebPlay",value:function(e){if("mobile"===TK.SDKTYPE){var t={action:"closeDynamicPptAutoVideo"};this._postMessage(t)}}},{key:"handlerIframeMessage",value:function(e){var t=this,a=this;if(e.data){var n,r,i,o,s,l=function(){var l=void 0,d=void 0;try{d=JSON.parse(e.data),l=d.data}catch(t){return L.Logger.warning("iframe message data can't be converted to JSON , iframe data:",e.data),{v:void 0}}if("tk_dynamicPPT"===d.source){L.Logger.debug("[dynamicPpt]receive remote iframe data form "+e.origin+":",e);var c="initEvent",u="slideChangeEvent",h="stepChangeEvent",p="autoPlayVideoInNewPpt",m="clickNewpptTriggerEvent",v="clickLink";switch(l.action){case c:if(a.ServiceNewPptAynamicPPT.remoteData.view=l.view,a.ServiceNewPptAynamicPPT.remoteData.slidesCount=l.slidesCount,a.ServiceNewPptAynamicPPT.remoteData.slide=l.slide,a.ServiceNewPptAynamicPPT.remoteData.step=l.step,a.ServiceNewPptAynamicPPT.remoteData.stepTotal=l.stepTotal,a.ServiceNewPptAynamicPPT.recvInitEventHandler(l.slide,l.step,l.externalData),a.dynamicPptOpen=!0,a.awaitHandleActionArray&&a.awaitHandleActionArray.length>0){n=!0,r=!1,i=void 0;try{for(o=a.awaitHandleActionArray[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var y=s.value;y&&"function"==typeof y&&y()}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}a.awaitHandleActionArray.length=0;break;case u:var S=function(e){var a=e.currpage;!f.default.isEmpty(t.newPptActionJson)&&t.newPptActionJson[a]&&0!==t.newPptActionJson[a].length&&(t.newPptActionJson[a].map(function(e,a){t._postMessage(e)}),t.newPptActionJson={})};a.ServiceNewPptAynamicPPT.remoteData.slide=l.slide,a.ServiceNewPptAynamicPPT.remoteData.step=l.step,a.ServiceNewPptAynamicPPT.remoteData.stepTotal=l.stepTotal,a.ServiceNewPptAynamicPPT.recvSlideChangeEventHandler(l.slide,l.externalData),g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:S}}),a.ServiceNewPptAynamicPPT.isInitiative(l.externalData)&&g.default.CoreController.dispatchEvent({type:"resetAllLeftToolButtonOpenStateToFalse"});break;case h:var T=function(e){var a=e.currpage;!f.default.isEmpty(t.newPptActionJson)&&t.newPptActionJson[a]&&0!==t.newPptActionJson[a].length&&(t.newPptActionJson[a].map(function(e,a){t._postMessage(e)}),t.newPptActionJson={})};a.ServiceNewPptAynamicPPT.remoteData.slide=l.slide,a.ServiceNewPptAynamicPPT.remoteData.step=l.step,a.ServiceNewPptAynamicPPT.remoteData.stepTotal=l.stepTotal,a.ServiceNewPptAynamicPPT.recvStepChangeEventHandler(l.step,l.externalData),g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:T}}),a.ServiceNewPptAynamicPPT.isInitiative(l.externalData)&&g.default.CoreController.dispatchEvent({type:"resetAllLeftToolButtonOpenStateToFalse"});break;case p:var w=l,C=w.isvideo,P=w.url,D=w.fileid,_=w.pptslide;if(C&&!b.default.playback){var E=a.ServiceNewPptAynamicPPT.rPathAddress+P,I={url:E,fileid:D?Number(D):D,isvideo:C,pptslide:_?Number(_):_};a._newpptAutoPlayVideoInNewPpt(I)}break;case m:if("dynamicPPT"===a.props.fileTypeMark&&k.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerActionClick")&&a.ServiceNewPptAynamicPPT.isInitiative(l.externalData)){var x=function(e){var t=e.fileid;l.fileid=t};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:x}}),A.default.sendSignallingFromDynamicPptTriggerActionClick(l),g.default.CoreController.dispatchEvent({type:"resetAllLeftToolButtonOpenStateToFalse"})}break;case v:"dynamicPPT"===a.props.fileTypeMark&&k.default.handler.getAppPermissions("sendSignallingFromDynamicPptTriggerClickLink")&&a.ServiceNewPptAynamicPPT.isInitiative(l.externalData)}}}();if("object"==typeof l)return l.v}}},{key:"handlerSetNewPptFrameSrc",value:function(e){var t=this;t.ServiceNewPptAynamicPPT.setNewPptFrameSrc(e.message.src||"")}},{key:"handlerReceiveMsglistShowPageLastDocument",value:function(e){var t=this,a=t._saveFileidReturnOpen(e.message.data);e.message.open=a,t._handlerReceiveShowPageSignalling(e)}},{key:"handlerUpdateAppPermissions_newpptPagingPage",value:function(){var e=this;if("dynamicPPT"===e.props.fileTypeMark){
var t=function(e){g.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"newppt",data:e}})};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:t}});var a={action:"changeNewpptPagingPage",newpptPagingPage:k.default.handler.getAppPermissions("newpptPagingPage")};this._postMessage(a)}}},{key:"handlerInitAppPermissions",value:function(){var e=this;e.handlerUpdateAppPermissions_newpptPagingPage(),e.handlerUpdateAppPermissions_publishDynamicPptMediaPermission_video(),e.handlerUpdateAppPermissions_dynamicPptActionClick()}},{key:"handlerUpdateAppPermissions_publishDynamicPptMediaPermission_video",value:function(){var e={action:"changePublishDynamicPptMediaPermission_video",publishDynamicPptMediaPermission_video:k.default.handler.getAppPermissions("publishDynamicPptMediaPermission_video")};this._postMessage(e)}},{key:"handlerOpenDocuemntOrMediaFile",value:function(e){var t=this,a=e.message,n=t._saveFileidReturnOpen(a);a.isDynamicPPT&&t._handlerReceiveShowPageSignalling({message:{data:a,open:n,source:"newpptFileClickEvent"}})}},{key:"handlerNewpptPrevStepClick",value:function(){var e=this;e.ServiceNewPptAynamicPPT.recvCount=0,e.ServiceNewPptAynamicPPT.gotoPreviousStep()}},{key:"handlerNewpptNextStepClick",value:function(){var e=this;e.ServiceNewPptAynamicPPT.recvCount=0,e.ServiceNewPptAynamicPPT.gotoNextStep()}},{key:"handlerNewpptPrevSlideClick",value:function(){var e=this,t=!0;e.ServiceNewPptAynamicPPT.recvCount=0,e.ServiceNewPptAynamicPPT.gotoPreviousSlide(t)}},{key:"handlerNewpptNextSlideClick",value:function(){var e=this,t=!0;e.ServiceNewPptAynamicPPT.recvCount=0,e.ServiceNewPptAynamicPPT.gotoNextSlide(t)}},{key:"handlerReceiveMsglistClassBegin",value:function(){var e=this;e._handlerClassBeginStartOrEnd()}},{key:"handlerPlayDynamicPPTMediaStream",value:function(e){var t=this,a=e.message,n=a.show;a.stream,n?t.handlerUpdateAppPermissions_newpptPagingPage():t.handlerUpdateAppPermissions_newpptPagingPage()}},{key:"handlerSkipPage_dynamicPPT",value:function(e){var t=this;if("dynamicPPT"===t.props.fileTypeMark){var a=e.message.currpage;t._skipDynamicPPTPaging(a)}}},{key:"handlerUpdateAppPermissions_dynamicPptActionClick",value:function(){this.setState({updateState:!this.state.updateState});var e={action:"changeDynamicPptActionClick",dynamicPptActionClick:k.default.handler.getAppPermissions("dynamicPptActionClick")};this._postMessage(e)}},{key:"_openAynamicPPTHandler",value:function(e){var t=this,a="dynamicPPT";t.props.changeFileTypeMark(a),g.default.CoreController.dispatchEvent({type:"saveLcStackToStorage",message:{}}),g.default.CoreController.dispatchEvent({type:"setFileDataToLcElement",message:{filedata:e}}),g.default.CoreController.dispatchEvent({type:"recoverCurrpageLcData"}),g.default.CoreController.dispatchEvent({type:"resetLcDefault"}),g.default.CoreController.dispatchEvent({type:"setH5FileFrameSrc",message:{src:""}});var n=e.fileid,r=e.swfpath,i=e.pptslide,o=e.pptstep,s=S.default.newpptVersions,l=S.default.remoteNewpptUpdateTime,d={rPathAddress:S.default.SERVICEINFO.protocolAndHostname+":"+S.default.SERVICEINFO.port+r+"/",PresAddress:"newppt.html?remoteHost="+window.location.host+"&remoteProtocol="+window.location.protocol+"&versions="+s+"&fileid="+n+"&playback="+b.default.playback+"&classbegin="+b.default.classBegin+"&publishDynamicPptMediaPermission_video="+k.default.handler.getAppPermissions("publishDynamicPptMediaPermission_video")+"&remoteNewpptUpdateTime="+l+"&role="+(S.default.joinRoomInfo?S.default.joinRoomInfo.roomrole:void 0)+"&dynamicPptActionClick="+k.default.handler.getAppPermissions("dynamicPptActionClick")+"&newpptPagingPage="+k.default.handler.getAppPermissions("newpptPagingPage")+"&dynamicPptDebug="+S.default.DEV+"&ts="+(new Date).getTime(),slideIndex:i,stepIndex:o,fileid:n};this.setState({updateState:!this.state.updateState}),g.default.CoreController.dispatchEvent({type:"closeLoading"}),t._updateLcScaleWhenAynicPPTInitHandler(16/9),t.awaitHandleActionArray.length=0,t.dynamicPptOpen=!1,t.ServiceNewPptAynamicPPT.setRPathAndPres(d),g.default.CoreController.dispatchEvent({type:"checkSelectMouseState",message:{fileTypeMark:a}})}},{key:"_aynamicPPTJumpToAnim",value:function(e,t){var a=this;a.ServiceNewPptAynamicPPT.jumpToAnim(e,t)}},{key:"_updateLcScaleWhenAynicPPTInitHandler",value:function(e){g.default.CoreController.dispatchEvent({type:"updateLcScaleWhenAynicPPTInitHandler",message:{lcLitellyScalc:e}})}},{key:"_handlerReceiveShowPageSignalling",value:function(e){var t=this,a=e.message,n=a.data,r=a.open,i=n;if(!i.isMedia&&i.isDynamicPPT){var o=!0;t._reveiveNewpptDataHandler(i.filedata,r,o)}}},{key:"_reveiveNewpptDataHandler",value:function(e,t,a){var n=this;return a&&n.ServiceNewPptAynamicPPT.recvCount++,t?void n._openAynamicPPTHandler(e):void n._aynamicPPTJumpToAnim(e.pptslide,e.pptstep)}},{key:"_handlerSendPPTMessageEvent",value:function(e,t){var a=this,n=function(n){var r=n,i=a._replaceSendPPTMessageData(r,e);g.default.CoreController.dispatchEvent({type:"documentPageChange",message:i}),t&&a._sendSignallingFromDynamicPptShowPage(i)};g.default.CoreController.dispatchEvent({type:"getFileDataFromLcElement",message:{callback:n}})}},{key:"_lcInit",value:function(){var e=this;e.ServiceNewPptAynamicPPT=e.ServiceNewPptAynamicPPT||new I.default,e.ServiceNewPptAynamicPPT.clearAll(),e.ServiceNewPptAynamicPPT.newDopPresentation()}},{key:"_replaceSendPPTMessageData",value:function(e,t){t&&(e.pagenum=void 0!=t.pagenum?t.pagenum:e.pagenum,e.pptslide=void 0!=t.pptslide?t.pptslide:e.pptslide,e.pptstep=void 0!=t.pptstep?t.pptstep:e.pptstep,e.steptotal=void 0!=t.steptotal?t.steptotal:e.steptotal,e.currpage=void 0!=t.currpage?t.currpage:e.currpage);var a={isGeneralFile:!1,isMedia:!1,isDynamicPPT:!0,isH5Document:!1,action:t.action||"",mediaType:"",filedata:e};return a}},{key:"_sendSignallingFromDynamicPptShowPage",value:function(e){if(k.default.handler.getAppPermissions("sendSignallingFromDynamicPptShowPage")){var t=!1,a="DocumentFilePage_ShowPage";A.default.sendSignallingFromShowPage(t,a,e)}}},{key:"_newpptAutoPlayVideoInNewPpt",value:function(e){var t=this;if("mobile"===TK.SDKTYPE)C.default.getTkRoom().dynamicPptVideoAutoPlay(e);else if("pc"===TK.SDKTYPE){var a={filename:"",fileid:e.fileid,type:"media"};b.default.classBegin||(a.toID=C.default.getTkRoom().getMySelf().id),t.pptvideoStream=TK.Stream({video:e.isvideo,audio:!0,url:e.url,extensionId:C.default.getTkRoom().getMySelf().id+":media",attributes:a},b.default.isClient),D.default.unpublishAllMediaStream(function(e,a){switch(e){case-1:case 1:if(!k.default.handler.getAppPermissions("publishMediaStream")||!k.default.handler.getAppPermissions("publishDynamicPptMediaPermission_video"))return!1;b.default.playPptVideoing=!0,t.handlerPlayDynamicPPTMediaStream({type:"playDynamicPPTMediaStream",message:{show:!0,stream:t.pptvideoStream}}),A.default.publishMediaStream(t.pptvideoStream);break;case 0:}})}}},{key:"_saveFileidReturnOpen",value:function(e){var t=this,a=void 0;if(!e.isMedia){var n=e.filedata.fileid;a=t.fileid!=n,t.fileid=n}return a}},{key:"_handlerClassBeginStartOrEnd",value:function(){var e={action:"changeClassBegin",classbegin:b.default.classBegin};this._postMessage(e)}},{key:"handlerClassBeginCloseDynamicPptVideo",value:function(){var e={action:"closeDynamicPptAutoVideo"};this._postMessage(e)}},{key:"_skipDynamicPPTPaging",value:function(e){var t=this;t.ServiceNewPptAynamicPPT.recvCount=0;var a=0,n=e,r=!0;t.ServiceNewPptAynamicPPT.jumpToAnim(n,a,r)}},{key:"_postMessage",value:function(e){var t=this;this.dynamicPptOpen?this.ServiceNewPptAynamicPPT.postMessage(e):this.awaitHandleActionArray.push(function(){t.ServiceNewPptAynamicPPT.postMessage(e)})}},{key:"render",value:function(){var e=this,t=e.props,a=t.fileTypeMark,n=i(t,["fileTypeMark"]);e.ServiceNewPptAynamicPPT||(e.ServiceNewPptAynamicPPT=new I.default),e.ServiceNewPptAynamicPPT.isOpenPptFile="dynamicPPT"===a;var r=Object.assign({display:"dynamicPPT"!==a?"none":"block"},this.props.styleJson);return h.default.createElement("div",l({style:r,className:"aynamic-ppt-conwrap add-position-absolute-top0-left0",id:"aynamic_ppt_newppt"},f.default.filterContainDataAttribute(n)),"  ",h.default.createElement("div",{className:"ppt-vessel",id:"ppt_vessel_newppt"},h.default.createElement("div",{className:"ppt-zoom-container",id:"ppt_zoom_container_newppt"},h.default.createElement("div",{id:"contentHolderNewppt",className:"aynamic-ppt-container"},h.default.createElement("iframe",{allowFullScreen:"true",id:"newppt_frame",src:"",name:"myframe"}),h.default.createElement("div",{id:"preloader_newppt",className:"ppt-loading-container add-position-absolute-top0-left0"}),h.default.createElement("div",{id:"ppt_not_click_newppt",className:"ppt-not-click-newppt add-position-absolute-top0-left0"}),h.default.createElement("div",{className:"add-position-absolute-top0-left0",style:{width:"100%",height:"100%",zIndex:1,display:k.default.handler.getAppPermissions("dynamicPptActionClick")?"none":"block"}})))))}}]),t}(h.default.Component);t.default=x,e.exports=t.default}).call(t,a(32))},257:function(e,t,a){(function(a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},r=function(e){var t=this;this.options=e||{},this.isResized=!1,this.sendMessagePermission=this.options.sendMessagePermission||!0,this.recvRemoteDataing=this.options.recvRemoteDataing||!1,this.isOpenPptFile=!1,n.newPptAynamicPPT={that:t},this.aynamicPptData={old:{slide:null,step:null,fileid:null},now:{slide:null,step:null,fileid:null}},this.remoteData={},this.recvCount=0};r.prototype={constructor:r,sendMessageToRemote:function(e,t,r){var i=n.newPptAynamicPPT.that;r=void 0==r||r;var o={};r&&i.remoteData&&(o.pptslide=i.remoteData.slide+1,o.currpage=i.remoteData.slide+1,o.pptstep=i.remoteData.step>=0?i.remoteData.step:0,o.steptotal=i.remoteData.stepTotal);for(var s in e)o[s]=e[s];o.pagenum=i.remoteData.slidesCount;var l=i.isInitiative(t);a(document).trigger("sendPPTMessageEvent",[o,l])},resizeUpdatePPT:function(e){e.scale=1,a(window).trigger("resize")},resizeHandler:function(e){var e=e||this;e.isOpenPptFile&&e.autoChangePptSize(e)},autoChangePptSize:function(e){e=e||this},changeAynamicPptData:function(){var e=this,t=e.remoteData;if(void 0!=t.slide&&void 0!=t.step){var a={slide:t.slide+1,step:t.step};for(var n in e.aynamicPptData.now)e.aynamicPptData.old[n]=e.aynamicPptData.now[n];e.aynamicPptData.now.fileid=e.fileid,e.aynamicPptData.now.slide=a.slide,e.aynamicPptData.now.step=a.step}},playerControlClass:{HandleSlideChange:function(e){var t=n.newPptAynamicPPT.that;a("#curr_ppt_page").html(e+1),a("#all_ppt_page").html(t.remoteData.slidesCount);var r={pptslide:e+1,currpage:e+1,fileid:t.fileid,pagenum:t.remoteData.slidesCount};a(document).trigger("slideChangeToLcData",[r])}},changeFileElementProperty:function(){var e=n.newPptAynamicPPT.that,t=e.remoteData;if(void 0!==t.step||void 0!==t.stepTotal||void 0!==t.slide){var r=t.stepTotal,i=t.slide+1,o=t.step;i<=1&&o<=0?a("#ppt_prev_page_slide[data-set-disabled=yes] ,#prev_page_phone_slide[data-set-disabled=yes]").removeClass("disabled").addClass("disabled").attr("disabled","disabled"):a("#ppt_prev_page_slide[data-set-disabled=yes] ,#prev_page_phone_slide[data-set-disabled=yes]").removeClass("disabled").removeAttr("disabled"),i>=e.remoteData.slidesCount&&o>=r-1?a("#ppt_next_page_slide[data-set-disabled=yes] ,#next_page_phone_slide[data-set-disabled=yes]").removeClass("disabled").addClass("disabled").attr("disabled","disabled"):a("#ppt_next_page_slide[data-set-disabled=yes] ,#next_page_phone_slide[data-set-disabled=yes]").removeClass("disabled").removeAttr("disabled"),a(document).trigger("newppt_changeFileElementProperty",{pptstep:t.step,steptotal:t.stepTotal})}},setSendMessagePermission:function(e){var t=n.newPptAynamicPPT.that;t.sendMessagePermission=e},setRPathAndPres:function(e){var t=n.newPptAynamicPPT.that;e=e||{},t.rPathAddress=e.rPathAddress,t.PresAddress=e.PresAddress,t.fileid=e.fileid||null,t.currScale=1;var a=e.slideIndex||1,r=e.stepIndex||0;t.remoteSlide=a,t.remoteStep=r,t.needUpdateSlideAndStep=!0,t.isInitFinsh=!1,t.setNewPptFrameSrc(t.rPathAddress+t.PresAddress),t.loading.loadingStart()},setNewPptFrameSrc:function(e){console.log("set newppt src:",e),e?a("#newppt_frame").attr("src",e):a("#newppt_frame").removeAttr("src")},clearAll:function(){var e=this;e.isResized=!1,e.isOpenPptFile=!1,e.firstLoaded=!1,e.sendMessagePermission=this.options.sendMessagePermission||!0,e.recvRemoteDataing=this.options.recvRemoteDataing||!1,e.contentHolder=null,e.contentHolderParent=null,e.pptVesselElemnt=null,e.pptZoomElemnt=null,e.lcToolContainer=null,e.presSettings={},e.aynamicPptData={old:{slide:null,step:null,fileid:null},now:{slide:null,step:null,fileid:null}},e.recvCount=0,e.setNewPptFrameSrc(""),e.newpptFrame=null},recvInitEventHandler:function(e,t){var n=this;n.isInitFinsh=!0,n.changeAynamicPptData(),n.playerControlClass.HandleSlideChange(e),n.onInitaliseSettingsHandler(),n.changeFileElementProperty(),n.needUpdateSlideAndStep&&(null!=n.remoteSlide&&null!=n.remoteStep&&(n.jumpToAnim(n.remoteSlide,n.remoteStep),n.remoteSlide=null,n.remoteStep=null),n.needUpdateSlideAndStep=!1),n.remoteActionData&&(n.postMessage(n.remoteActionData),n.remoteActionData=null);var r={Width:n.remoteData.view.width,Height:n.remoteData.view.height};a(document).trigger("updateLcScaleWhenAynicPPTInit",[r]),n.loading.loadingEnd()},recvSlideChangeEventHandler:function(e,t){var a=this;a.changeAynamicPptData(),a.playerControlClass.HandleSlideChange(e),a.changeFileElementProperty(),(a.isLoadInitSlideAndStep||(a.isLoadInitSlideAndStep=!0,0!==a.remoteData.slide||0!==a.remoteData.step))&&a.sendMessageToRemote({action:"slide"},t)},recvStepChangeEventHandler:function(e,t){var a=this;a.changeAynamicPptData(),a.changeFileElementProperty(),(a.isLoadInitSlideAndStep||(a.isLoadInitSlideAndStep=!0,0!==a.remoteData.slide||0!==a.remoteData.step))&&a.sendMessageToRemote({action:"step"},t)},newDopPresentation:function(e,t){var r=n.newPptAynamicPPT.that;if(r.options=e||r.options,r.resetParameter(r.options),r.playbackController=null,r.remoteData.slidesCount=null,r.isPlayedPresentation=null,r.remoteData.view=null,r.presentation=null,r.isLoadInitSlideAndStep=!1,r.isResized||(r.resizeUpdatePPT(r),r.isResized=!0),!r.firstLoaded){r.firstLoaded=!0,a("#ppt_prev_page , #ppt_next_page , #btnPause , #btnPlay , #ppt_next_page_slide ,#ppt_prev_page_slide , #btnGoto , #resizer , #aynamic_ppt_click  , #tool_zoom_big_ppt , #tool_zoom_small_ppt , #prev_page_phone_slide , #next_page_phone_slide").off("click mousedown"),a("#ppt_prev_page_slide,#prev_page_phone_slide").click(function(){var e=a(this).attr("data-plugs");if("newppt"==e)return r.recvCount=0,r.gotoPreviousStep(),!1}),a("#ppt_next_page_slide,#next_page_phone_slide").click(function(){var e=a(this).attr("data-plugs");if("newppt"==e)return r.recvCount=0,r.gotoNextStep(),!1}),a("#tool_zoom_big_ppt").off("click"),a("#tool_zoom_big_ppt").click(function(){var e=a(this).attr("data-plugs");"newppt"==e&&(r.currScale+=.5,r.currScale>=3&&(r.currScale=3),r.checkZoomStatus(),r.autoChangePptSize(r))}),a("#tool_zoom_small_ppt").off("click"),a("#tool_zoom_small_ppt").click(function(){var e=a(this).attr("data-plugs");"newppt"==e&&(r.currScale-=.5,r.currScale<=1&&(r.currScale=1),r.checkZoomStatus(),r.autoChangePptSize(r))}),r.checkZoomStatus();var i={eventSelector:"#ppt_prev_page , #ppt_next_page , #btnPause , #btnPlay , #ppt_next_page_slide ,#ppt_prev_page_slide , #btnGoto , #resizer , #aynamic_ppt_click , #prev_page_phone_slide , #next_page_phone_slide ",eventName:"click mousedown",rolePermissionNotExecute:"chairman",needClassBegin:!0};a(document).trigger("cancelEvent",[i])}return r},checkZoomStatus:function(){var e=this;e.currScale>=3?a("#tool_zoom_big_ppt").addClass("disabled").attr("disabled","disabled"):a("#tool_zoom_big_ppt").removeClass("disabled").removeAttr("disabled"),e.currScale<=1?a("#tool_zoom_small_ppt").addClass("disabled").attr("disabled","disabled"):a("#tool_zoom_small_ppt").removeClass("disabled").removeAttr("disabled"),a(document).trigger("updateLcScale",[e.currScale])},resetParameter:function(e){this.playbackController=null,this.slidesCount=null,this.isPlayedPresentation=null,this.view=null,this.presentation=null,this.options=e||this.options||{},this.rPathAddress=e.rPathAddress,this.PresAddress=e.PresAddress,this.fileid=e.fileid||null,this.remoteSlide=e.remoteSlide||null,this.remoteStep=e.remoteStep||null,this.needUpdateSlideAndStep=!1,this.currScale=1,this.recvCount=0,this.isOpenPptFile=!1,this.aynamicPptData={old:{slide:null,step:null,fileid:null},now:{slide:null,step:null,fileid:null}},this.formatedTotalTime=null,this.presSettings={},this.isTouchDevice=null,this.ipadKeyPadFlg=null,this.isPlaying=!1,this.remoteData={}},postMessage:function(e){var t=this;if(t.newpptFrame=t.newpptFrame||document.getElementById("newppt_frame"),t.newpptFrame.getAttribute("src")){var a="tk_dynamicPPT",n={source:a,data:e};n=JSON.stringify(n),t.newpptFrame&&t.newpptFrame.contentWindow?t.newpptFrame.contentWindow.postMessage(n,"*"):console.error("postMessage error【that.newpptFrame ，that.newpptFrame.contentWindow 】:",t.newpptFrame,t.newpptFrame.contentWindow)}},jumpToAnim:function(e,t,a,r,i){var o=n.newPptAynamicPPT.that;if(o.jumpToAnimTimer=o.jumpToAnimTimer||null,o.isInitFinsh){var s={action:"jumpToAnim",data:{slide:e,step:t,timeOffset:r,autoStart:i,initiative:a}};o.postMessage(s)}},onInitaliseSettingsHandler:function(){var e=n.newPptAynamicPPT.that;a(document).trigger("updateSlidesCountToLcElement",{pagenum:e.remoteData.slidesCount})},gotoPreviousStep:function(){var e=this;if(e.isInitFinsh){var t={action:"gotoPreviousStep"};e.postMessage(t)}},gotoNextStep:function(){var e=this;if(e.isInitFinsh){e.recvCount=0;var t={action:"gotoNextStep"};e.postMessage(t)}},gotoNextSlide:function(e){var t=this;if(t.isInitFinsh){var a=t.remoteData;if(void 0==a.slide||void 0==a.step)return;var n={slide:a.slide+1,step:a.step};if(t.remoteData.slidesCount&&n.slide<t.remoteData.slidesCount){t.recvCount=0;var r={action:"gotoNextSlide",autoStart:e};t.postMessage(r)}}},gotoPreviousSlide:function(e){var t=this;if(t.isInitFinsh){var a=t.remoteData;if(void 0==a.slide||void 0==a.step)return;var n={slide:a.slide+1,step:a.step};if(t.remoteData.slidesCount&&n.slide>1){t.recvCount=0;var r={action:"gotoPreviousSlide",autoStart:e};t.postMessage(r)}}},isInitiative:function(e){return e&&e.initiative},loading:{loadingStart:function(){a("#preloader_newppt").css("display","block")},loadingEnd:function(){a("#preloader_newppt").css("display","none")}}},t.default=r,e.exports=t.default}).call(t,a(32))},258:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},h=a(2),p=r(h),g=a(10),m=r(g),f=a(18),v=r(f),b=a(12),y=r(b),S=a(19),T=r(S),k=a(20),w=r(k),C=a(24),P=r(C),D=a(115),_=r(D),A=function(e){function t(e){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={show:!0,selectMouse:!0},this.containerWidthAndHeight={width:0,height:0},this.instanceId=void 0!==this.props.instanceId?this.props.instanceId:"default",this.whiteboardElementId="whiteboard_container_"+this.instanceId,this.fileid=void 0,this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.cacheMaxPageNum=1,this.cacheMinPageNum=1,this.filePreLoadCurrPage=1,this.filePreLoadStep=2}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;m.default.Window.addEventListener(v.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomDisconnected,e.handlerRoomDisconnected.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener(v.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("receive-msglist-ShowPage-lastDocument",e.handlerReceiveMsglistShowPageLastDocument.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("saveLcStackToStorage",e.handlerSaveLcStackToStorage.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("resizeHandler",e.handlerResizeHandler.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("setFileDataToLcElement",e.handlerSetFileDataToLcElement.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("getFileDataFromLcElement",e.handlerGetFileDataFromLcElement.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("resetLcDefault",e.handlerResetLcDefault.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("closeLoading",e.handlerCloseLoading.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateLcScaleWhenAynicPPTInitHandler",e.handlerUpdateLcScaleWhenAynicPPTInitHandler.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("recoverCurrpageLcData",e.handlerRecoverCurrpageLcData.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboardPrevPage",e.handlerWhiteboardPrevPage.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboardNextPage",e.handlerWhiteboardNextPage.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboardAddPage",e.handlerWhiteboardAddPage.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateAppPermissions_whiteboardPagingPage",e.handlerUpdateAppPermissions_whiteboardPagingPage.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("openDocuemntOrMediaFile",e.handlerOpenDocuemntOrMediaFile.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboard_updateWhiteboardToolsInfo",e.handlerWhiteboard_updateWhiteboardToolsInfo.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboard_updateTextFont",e.handlerWhiteboard_updateTextFont.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateSelectMouse",e.handlerUpdateSelectMouse.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("checkSelectMouseState",e.handlerCheckSelectMouseState.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("changeStrokeSize",e.handlerChangeStrokeSize.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("changeStrokeColor",e.handlerChangeStrokeColor.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateAppPermissions_canDraw",e.handlerUpdateAppPermissions_canDraw.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateAppPermissions_h5DocumentActionClick",e.handlerUpdateAppPermissions_h5DocumentActionClick.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("updateAppPermissions_dynamicPptActionClick",e.handlerUpdateAppPermissions_dynamicPptActionClick.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("lcTextEditing",e.handlerLcTextEditing.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("skipPage_general",e.handlerSkipPage_general.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("preloadWhiteboardImg",e.handlerPreloadWhiteboardImg.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("receive-msglist-whiteboardMarkTool",e.handlerReceive_msglist_whiteboardMarkTool.bind(e),e.listernerBackupid),m.default.CoreController.addEventListener("whiteboard_activeCommonWhiteboardTool",e.handlerWhiteboard_activeCommonWhiteboardTool.bind(e),e.listernerBackupid),e._lcInit()}},{key:"componentWillUnmount",value:function(){var e=this;m.default.Window.removeBackupListerner(e.listernerBackupid),m.default.CoreController.removeBackupListerner(e.listernerBackupid),_.default.destroyWhiteboardInstance(e.instanceId)}},{key:"componentDidUpdate",value:function(e,t){t.selectMouse!==this.state.selectMouse&&this.handlerCheckSelectMouseState(),t.show!==this.state.show&&this.state.show&&_.default.checkWhiteboardCanvasSize(this.instanceId,{isResize:!0})}},{key:"handlerOnResize",value:function(){var e=this;if(e.props.fatherContainerId){var t=n("#"+e.props.fatherContainerId);if(t&&t.length>0){var a={width:t.width(),height:t.height()};e.containerWidthAndHeight=a,_.default.updateContainerWidthAndHeight(e.instanceId,a)}}_.default.resizeWhiteboardHandler(e.instanceId)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ShowPage":var n=t._saveFileidReturnOpen(a.data),r={message:{data:a.data,open:n,source:"room-pubmsg"}};t._handlerReceiveShowPageSignalling(r);break;case"whiteboardMarkTool":var i=a.data.selectMouse;t.handlerUpdateSelectMouse({type:"updateSelectMouse",message:{selectMouse:i}})}}},{key:"handlerReceive_msglist_whiteboardMarkTool",value:function(e){var t=this,a=e.message,n=a.data.selectMouse;t.handlerUpdateSelectMouse({type:"updateSelectMouse",message:{selectMouse:n}})}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":w.default.handler.getAppPermissions("endClassbeginRevertToStartupLayout")&&_.default.clearWhiteboardAllDataById(t.instanceId)}}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!y.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");var e=this;_.default.clearWhiteboardAllDataById(e.instanceId)}},{key:"handlerRoomDisconnected",value:function(e){var t=this;_.default.clearWhiteboardAllDataById(t.instanceId)}},{key:"handlerReceiveMsglistShowPageLastDocument",value:function(e){var t=this,a=t._saveFileidReturnOpen(e.message.data);e.message.open=a,t._handlerReceiveShowPageSignalling(e)}},{key:"handlerSaveLcStackToStorage",value:function(e){var t=this;_.default.saveWhiteboardStackToStorage(t.instanceId,{saveRedoStack:v.default.hasRole.roleChairman})}},{key:"handlerResizeHandler",value:function(e){var t=this;e&&e.message&&void 0!=e.message.eleWHPercent&&_.default.updateWhiteboardMagnification(t.instanceId,e.message.eleWHPercent),t.handlerOnResize()}},{key:"handlerSetFileDataToLcElement",value:function(e){var t=this;_.default.updateWhiteboardFiledata(t.instanceId,e.message.filedata)}},{key:"handlerGetFileDataFromLcElement",value:function(e){var t=this,a=e.message.callback;if(a&&"function"==typeof a){var n=_.default.getWhiteboardFiledata(t.instanceId);a(n)}}},{key:"handlerResetLcDefault",value:function(e){var t=this;_.default.resetDedaultWhiteboardMagnification(t.instanceId)}},{key:"handlerCloseLoading",value:function(e){var t=this;_.default.hideWhiteboardLoading(t.instanceId)}},{key:"handlerUpdateLcScaleWhenAynicPPTInitHandler",value:function(e){var t=this;_.default.updateWhiteboardWatermarkImageScalc(t.instanceId,e.message.lcLitellyScalc),_.default.setWhiteboardWatermarkImage(t.instanceId,"")}},{key:"handlerRecoverCurrpageLcData",value:function(e){var t=this;t._recoverCurrpageLcData()}},{key:"handlerWhiteboardPrevPage",value:function(){var e=this;e._whiteboardPaging(!1,!0)}},{key:"handlerWhiteboardNextPage",value:function(){var e=this;e._whiteboardPaging(!0,!0)}},{key:"handlerWhiteboardAddPage",value:function(){var e=this;e.handlerSaveLcStackToStorage();var t=_.default.getWhiteboardFiledata(e.instanceId);t.pagenum+=1;var a={totalPage:t.pagenum,fileid:t.fileid};_.default.updateWhiteboardFiledata(e.instanceId,t),P.default.sendSignallingFromWBPageCount(a),e._whiteboardPaging(!0,!0)}},{key:"handlerUpdateAppPermissions_whiteboardPagingPage",value:function(){var e=this;"general"===e.props.fileTypeMark&&m.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"whiteboard",data:_.default.getWhiteboardFiledata(e.instanceId)}})}},{key:"handlerInitAppPermissions",value:function(){var e=this;e.handlerUpdateAppPermissions_canDraw(),e.handlerUpdateAppPermissions_whiteboardPagingPage(),e.handlerCheckSelectMouseState()}},{key:"handlerOpenDocuemntOrMediaFile",value:function(e){var t=this,a=e.message,n=t._saveFileidReturnOpen(a);a.isGeneralFile&&t._handlerReceiveShowPageSignalling({message:{data:a,open:n,source:"commonFileClickEvent"}})}},{key:"handlerWhiteboard_updateWhiteboardToolsInfo",value:function(e){_.default.updateWhiteboardToolsInfo(this.instanceId,e.message.whiteboardToolsInfo)}},{key:"handlerWhiteboard_updateTextFont",value:function(e){var t=this;_.default.updateTextFont(t.instanceId)}},{key:"handlerUpdateSelectMouse",value:function(e){var t=e.message.selectMouse;if(this.state.selectMouse!==t){var a=this.props.fileTypeMark,n=!1;switch(a){case"dynamicPPT":n=t;break;case"h5document":n=t;break;default:n=!1}this.setState({selectMouse:t,show:!n})}}},{key:"handlerCheckSelectMouseState",value:function(e){var t=void 0;e&&e.message&&e.message.fileTypeMark&&(t=e.message.fileTypeMark);var a=this.state,n=a.selectMouse,r=a.show;t=t||this.props.fileTypeMark;var i=!1;switch(t){case"dynamicPPT":i=n;break;case"h5document":i=n;break;default:i=!1}r!==!i&&this.setState({show:!i})}},{key:"handlerChangeStrokeSize",value:function(e){var t=this,a=e.message.strokeJson,n=a.pencil,r=a.text,i=a.eraser,o=a.shape,s={pencilWidth:n,fontSize:r,eraserWidth:i,shapeWidth:o};_.default.updateWhiteboardToolsInfo(t.instanceId,s);var l=!0,c=!1,u=void 0;try{for(var h,p=Object.entries(e.message.selectedTool)[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var g=d(h.value,2),m=g[0],f=g[1];if(f)switch(m){case"pencil":_.default.updatePencilWidth(t.instanceId,{pencilWidth:n});break;case"text":_.default.updateTextFont(t.instanceId,{fontSize:r});break;case"eraser":_.default.updateEraserWidth(t.instanceId,{eraserWidth:i});break;case"shape":_.default.updateShapeWidth(t.instanceId,{shapeWidth:o})}}}catch(e){c=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(c)throw u}}}},{key:"handlerChangeStrokeColor",value:function(e){var t=this;_.default.updateColor(t.instanceId,{primary:"#"+e.message.selectColor})}},{key:"handlerUpdateAppPermissions_canDraw",
value:function(){var e=this;_.default.changeWhiteboardDeawPermission(w.default.handler.getAppPermissions("canDraw"),e.instanceId)}},{key:"handlerUpdateAppPermissions_h5DocumentActionClick",value:function(){this.handlerCheckSelectMouseState()}},{key:"handlerUpdateAppPermissions_dynamicPptActionClick",value:function(){this.handlerCheckSelectMouseState()}},{key:"handlerLcTextEditing",value:function(e){var t=this,a=e.message.callback;a&&"function"==typeof a&&a(_.default.isWhiteboardTextEditing(t.instanceId))}},{key:"handlerSkipPage_general",value:function(e){var t=this;if("general"===t.props.fileTypeMark){var a=e.message.currpage;t._skipWhiteboardPaging(a)}}},{key:"handlerPreloadWhiteboardImg",value:function(e){var t=e.message.url;_.default.preloadWhiteboardImg(t)}},{key:"sendSignallingToServer",value:function(e,t,a,n,r,i,o,s){var l=!1;P.default.sendSignallingFromSharpsChange(l,e,t,a,n,r,i,o,s)}},{key:"delSignallingToServer",value:function(e,t,a,n){var r=!0;P.default.sendSignallingFromSharpsChange(r,e,t,a,n)}},{key:"resizeWhiteboardSizeCallback",value:function(e){this.props.resizeWhiteboardSizeCallback&&"function"==typeof this.props.resizeWhiteboardSizeCallback&&this.props.resizeWhiteboardSizeCallback(e)}},{key:"noticeUpdateToolDescCallback",value:function(e){m.default.CoreController.dispatchEvent({type:"commonWhiteboardTool_noticeUpdateToolDesc",message:{registerWhiteboardToolsList:e}})}},{key:"handlerWhiteboard_activeCommonWhiteboardTool",value:function(e){var t=e.message.toolKey;_.default.activeWhiteboardTool(t,this.instanceId)}},{key:"_lcInit",value:function(){var e=this;if(!_.default.hasWhiteboardById(e.instanceId)){var t={whiteboardElementId:e.whiteboardElementId,id:e.instanceId,handler:{sendSignallingToServer:e.sendSignallingToServer.bind(e),delSignallingToServer:e.delSignallingToServer.bind(e),resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),noticeUpdateToolDescCallback:e.noticeUpdateToolDescCallback.bind(e)},productionOptions:{}},a={tool_pencil:{},tool_highlighter:{},tool_line:{},tool_arrow:{},tool_eraser:{},tool_text:{},tool_rectangle:{},tool_rectangle_empty:{},tool_ellipse:{},tool_ellipse_empty:{},tool_mouse:{},tool_laser:{},action_undo:{},action_redo:{},action_clear:{},zoom_big:{},zoom_small:{}};_.default.productionWhiteboard(t),_.default.registerWhiteboardTools(e.instanceId,a),_.default.clearRedoAndUndoStack(e.instanceId),_.default.hasWhiteboardFiledata(e.instanceId)||_.default.updateWhiteboardFiledata(e.instanceId,_.default.getWhiteboardDefaultFiledata()),e.handlerOnResize()}}},{key:"_handlerReceiveShowPageSignalling",value:function(e){var t=this,a=e.message.data,n=e.message.open;if(!a.isMedia&&a.isGeneralFile){var r=e.message.source;if("room-pubmsg"===r&&!n&&a.filedata.fileid===t.fileid&&Number(a.filedata.currpage)===_.default.getWhiteboardFiledata(this.instanceId).currpage)return;t.handlerSaveLcStackToStorage(),_.default.updateWhiteboardFiledata(t.instanceId,a.filedata);var i=!0;t._recviceCommonDocumentShowPage(i,n)}}},{key:"_recviceCommonDocumentShowPage",value:function(e,t){var a=this,n="general";a.props.changeFileTypeMark(n),e=null==e||void 0==e||e,m.default.CoreController.dispatchEvent({type:"setNewPptFrameSrc",message:{src:""}}),m.default.CoreController.dispatchEvent({type:"setH5FileFrameSrc",message:{src:""}}),_.default.resetDedaultWhiteboardMagnification(a.instanceId);var r=_.default.getWhiteboardFiledata(a.instanceId),i=r.swfpath,o=r.currpage,s=r.pagenum,l=r.filetype;if("whiteboard"===l)_.default.updateWhiteboardWatermarkImageScalc(a.instanceId,16/9),e&&_.default.setWhiteboardWatermarkImage(a.instanceId,"",{resetDedaultWhiteboardMagnification:!1});else{var d=i.lastIndexOf("."),c=i.substring(d),u=i.replace(c,"-"+o+c);if(e){var h=v.default.SERVICEINFO.protocolAndHostname+":"+v.default.SERVICEINFO.port;_.default.setWhiteboardWatermarkImage(a.instanceId,h+u,{resetDedaultWhiteboardMagnification:!1});var p=1,g=1;t?(a.cacheMaxPageNum=o,a.filePreLoadCurrPage=o,a.cacheMinPageNum=o,a.cacheMaxPageNum+a.filePreLoadStep<=s?a.cacheMaxPageNum+=a.filePreLoadStep:a.cacheMaxPageNum<s&&(a.cacheMaxPageNum+=s-a.cacheMaxPageNum),a.cacheMinPageNum-a.filePreLoadStep>=1?a.cacheMinPageNum-=a.filePreLoadStep:a.cacheMinPageNum=1,g=a.cacheMaxPageNum,p=a.cacheMinPageNum):(a.filePreLoadCurrPage<o?(p=a.cacheMaxPageNum+1,o>a.cacheMaxPageNum&&(a.cacheMaxPageNum=o),a.cacheMaxPageNum+a.filePreLoadStep<=s?a.cacheMaxPageNum+=a.filePreLoadStep:a.cacheMaxPageNum<s&&(a.cacheMaxPageNum+=s-a.cacheMaxPageNum),g=a.cacheMaxPageNum):a.filePreLoadCurrPage>o&&(g=a.cacheMinPageNum-1,o<a.cacheMinPageNum&&(a.cacheMinPageNum=o),a.cacheMinPageNum-a.filePreLoadStep>=1?a.cacheMinPageNum-=a.filePreLoadStep:a.cacheMinPageNum=1,p=a.cacheMinPageNum),a.filePreLoadCurrPage=o);for(var f=p;f<=g;f++)if(f!==o){var b=i.lastIndexOf("."),y=i.substring(b),S=i.replace(y,"-"+f+y),T=v.default.SERVICEINFO.protocolAndHostname+":"+v.default.SERVICEINFO.port;a.handlerPreloadWhiteboardImg({type:"preloadWhiteboardImg",message:{url:T+S}})}}}a._recoverCurrpageLcData(),m.default.CoreController.dispatchEvent({type:"updatePagdingState",message:{source:"whiteboard",data:_.default.getWhiteboardFiledata(a.instanceId)}}),a.handlerCheckSelectMouseState({type:"checkSelectMouseState",message:{fileTypeMark:n}})}},{key:"_recoverCurrpageLcData",value:function(){var e=this,t={loadRedoStack:v.default.hasRole.roleChairman};_.default.loadCurrpageWhiteboard(e.instanceId,t)}},{key:"_whiteboardPaging",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],a=arguments.length<=2||void 0===arguments[2]||arguments[2],n=this,r=_.default.getWhiteboardFiledata(n.instanceId);if(e===!0){if(r.currpage>=r.pagenum)return;r.currpage++}else if(0==e){if(r.currpage<=1)return;r.currpage--}n.handlerSaveLcStackToStorage(),_.default.updateWhiteboardFiledata(n.instanceId,r),n._recviceCommonDocumentShowPage(a);var i=this._toShowPageData(r);if(m.default.CoreController.dispatchEvent({type:"documentPageChange",message:i}),t){var o=!1,s="DocumentFilePage_ShowPage";P.default.sendSignallingFromShowPage(o,s,i)}}},{key:"_skipWhiteboardPaging",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],a=arguments.length<=2||void 0===arguments[2]||arguments[2],n=this,r=_.default.getWhiteboardFiledata(n.instanceId);r.currpage=e,n.handlerSaveLcStackToStorage(),_.default.updateWhiteboardFiledata(n.instanceId,r),n._recviceCommonDocumentShowPage(a);var i=this._toShowPageData(r);if(m.default.CoreController.dispatchEvent({type:"documentPageChange",message:i}),t){var o=!1,s="DocumentFilePage_ShowPage";P.default.sendSignallingFromShowPage(o,s,i)}}},{key:"_toShowPageData",value:function(e){var t={isMedia:!1,isDynamicPPT:!1,isGeneralFile:!0,isH5Document:!1,action:"",mediaType:"",filedata:e};return t}},{key:"_saveFileidReturnOpen",value:function(e){var t=this,a=void 0;if(!e.isMedia){var n=e.filedata.fileid;a=t.fileid!=n,t.fileid=n}return a}},{key:"render",value:function(){var e=this,t=e.props,a=t.fileTypeMark,n=i(t,["fileTypeMark"]),r=e.state.show;return p.default.createElement("div",l({id:e.whiteboardElementId,style:{display:r?"block":"none"},className:"overflow-hidden  scroll-literally-container tk-filetype-"+a},T.default.filterContainDataAttribute(n)))}}]),t}(p.default.Component);A.propTypes={instanceId:h.PropTypes.string.isRequired},t.default=A,e.exports=t.default}).call(t,a(32))},259:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},c=a(2),u=r(c),h=a(36),p=(r(h),a(258)),g=r(p),m=a(256),f=r(m),v=a(10),b=r(v),y=a(252),S=r(y),T=function(e){function t(e){i(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={fileTypeMark:"general",literallyWrapClass:"",literallyWrapStyle:{}},this.fatherContainerId="white_board_outer_layout",this.whiteboardContainerId="big_literally_wrap"}return o(t,e),l(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"changeFileTypeMark",value:function(e){this.state.fileTypeMark!==e&&(b.default.CoreController.dispatchEvent({type:"changeFileTypeMark",message:{fileTypeMark:e}}),this.setState({fileTypeMark:e}))}},{key:"resizeWhiteboardSizeCallback",value:function(e){e&&void 0!==e.addClassName&&(this.state.literallyWrapClass=e.addClassName,delete e.addClassName);var t=n("#"+this.whiteboardContainerId),a=!1,r=!1,i=!0,o=!1,l=void 0;try{for(var d,c=Object.entries(e)[Symbol.iterator]();!(i=(d=c.next()).done);i=!0){var u=s(d.value,2),h=u[0],p=u[1];"marginTop"!==h||0===Number(p.replace(/(px|%)/g,""))?"marginLeft"!==h||0===Number(p.replace(/(px|%)/g,""))?("width"!==h&&"height"!==h||(this.state.literallyWrapStyle[h]=p),t[0].style[h]=p):r=!0:a=!0}}catch(e){o=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw l}}if(a){var g=t.height();t.css({"margin-top":-g/2+"px"})}if(r){var m=t.width();t.css({"margin-left":-m/2+"px"})}this.setState({literallyWrapClass:this.state.literallyWrapClass,literallyWrapStyle:this.state.literallyWrapStyle})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:e.fatherContainerId,className:"white-board-outer-layout"},"  ",u.default.createElement("div",{id:e.whiteboardContainerId,className:"big-literally-wrap "+this.state.literallyWrapClass}," ",u.default.createElement(g.default,{instanceId:"default",resizeWhiteboardSizeCallback:e.resizeWhiteboardSizeCallback.bind(e),fatherContainerId:e.fatherContainerId,fileTypeMark:e.state.fileTypeMark,changeFileTypeMark:e.changeFileTypeMark.bind(e)}),u.default.createElement(f.default,{styleJson:this.state.literallyWrapStyle,fileTypeMark:e.state.fileTypeMark,changeFileTypeMark:e.changeFileTypeMark.bind(e)}),u.default.createElement(S.default,{styleJson:this.state.literallyWrapStyle,fileTypeMark:e.state.fileTypeMark,changeFileTypeMark:e.changeFileTypeMark.bind(e)})))}}]),t}(u.default.Component);t.default=T,e.exports=t.default}).call(t,a(32))},260:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=r(d),u=a(12),h=r(u),p=a(18),g=r(p),m=a(22),f=r(m),v=a(24),b=r(v),y=a(117),S=(r(y),a(10)),T=r(S),k=a(20),w=r(k),C=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={show:{allTools:!1},disabledBlackBoard:!1,teachExpansionColumnDisplay:null,answerShow:!1,startAndStop:!1,restarting:!1,timeDescArray:[0,5,0,0],initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],brr:[],crr:[],idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],allNumbers:0,trueLV:0,allStudentChosseAnswer:{},tableObject:{},round:!1,dialShow:!1,responderShow:!1,beginIsStatus:!1,studentRes:!1,timerShow:!1,userAdmin:"",disabledAnswer:!1,disabledTurnplate:!1,disabledTimer:!1,disabledResponder:!1,isPublished:!1,toolsShow:{answer:!1,turnplate:!1,timer:!1,responder:!1,moreBlackboard:!1},teachToolUl:"",boxToolClick:!1},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.destTopShare=!1}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;T.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomConnected,e.handlerRoomConnected.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("receive-msglist-BlackBoard",e.handlerReceive_msglist_BlackBoard.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("callAllWrapOnClick",e.handlerCallAllWrapOnClick.bind(e),e.listernerBackupid),T.default.CoreController.addEventListener("whiteboardToolBox",e.whiteboardToolBox.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;T.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerReceive_msglist_BlackBoard",value:function(e){this.handlerRoomPubmsg(e);var t=e.message;"BlackBoard"===t.name&&this.setState({disabledBlackBoard:!0})}},{key:"handlerCallAllWrapOnClick",value:function(e){if("mobile"===TK.SDKTYPE){var t=e.message.event,a=this.props.parentId||"teach_header_tool_vessel";t.target.id===a||n(t.target)&&n(t.target).parents("#"+a).length>0||this.whiteboardToolBox()}}},{key:"allLiMouseLeave",value:function(){}},{key:"handlerRoomConnected",value:function(e){this.setState({disabledBlackBoard:!1,disabledAnswer:!1,disabledTurnplate:!1,disabledTimer:!1,disabledResponder:!1})}},{key:"handlerMsglistTimerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=e.message.timerShowArr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value,this.setState({disabledTimer:!0})}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}}},{key:"handlerMsglistDialShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=e.message.dialShowArr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value,this.setState({disabledTurnplate:!0})}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}}},{key:"handlerMsglistAnswerShow",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=e.message.answerShowArr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value,this.setState({disabledAnswer:!0})}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=e.message.qiangDaQiArr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)r.value,this.setState({disabledResponder:!0})}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard":this.setState({disabledBlackBoard:!0});break;case"answer":this.setState({disabledAnswer:!0});break;case"dial":this.setState({disabledTurnplate:!0});break;case"timer":this.setState({disabledTimer:!0});break;case"qiangDaQi":this.setState({disabledResponder:!0})}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"BlackBoard":this.setState({disabledBlackBoard:!1});break;case"answer":this.setState({disabledAnswer:!1});break;case"dial":this.setState({disabledTurnplate:!1});break;case"timer":this.setState({disabledTimer:!1});break;case"qiangDaQi":this.setState({disabledResponder:!1});break;case"ClassBegin":this.setState({disabledAnswer:!1,disabledTurnplate:!1,disabledTimer:!1,disabledResponder:!1,disabledBlackBoard:!1})}}},{key:"handlerInitAppPermissions",value:function(){var e={answer:!0,turnplate:!0,timer:!0,responder:!0,moreBlackboard:!0};Object.assign(this.state.toolsShow,e),this.state.show.allTools=w.default.handler.getAppPermissions("allUserTools"),this.setState({show:this.state.show,destTopShare:this.state.toolsShow})}},{key:"teachExpansionController",value:function(e){e.preventDefault(),e.stopPropagation(),this.state.boxToolClick=!this.state.boxToolClick,this.setState({boxToolClick:this.state.boxToolClick}),this.state.boxToolClick?(this.state.teachExpansionColumnDisplay="block",this.state.teachToolUl="block",this.setState({teachExpansionColumnDisplay:this.state.teachExpansionColumnDisplay,teachToolUl:this.state.teachToolUl}),T.default.CoreController.dispatchEvent({type:"teacherToolBox"})):this.teachBoxLeftMouseOut()}},{key:"whiteboardToolBox",value:function(){this.teachBoxLeftMouseOut()}},{key:"teachBoxLeftMouseOut",value:function(){this.state.boxToolClick=!1,this.setState({boxToolClick:this.state.boxToolClick}),this.state.teachExpansionColumnDisplay="none",this.setState({teachExpansionColumnDisplay:this.state.teachExpansionColumnDisplay})}},{key:"answerAssemblyShowHandel",value:function(e){if(this.state.disabledAnswer)return!1;e.preventDefault(),e.stopPropagation(),this.state.teachToolUl="none",this.state.answerShow=!0,this.setState({answerShow:this.state.answerShow,teachToolUl:this.state.teachToolUl}),this.teachBoxLeftMouseOut();var t=this.state.round,a=this.state.initArr,n=this.state.brr,r=this.state.trueLV,i=this.state.allNumbers,o=this.state.allStudentChosseAnswer,s=this.state.idA,l=this.state.idB,d=this.state.idC,c=this.state.idD,u=this.state.idE,h=this.state.idF,p=this.state.idG,g=this.state.idH,m=this.state.tableObject,f=this.state.isPublished,v=document.getElementById("result-teach-mytime").textContent,y=Array.from(new Set(this.state.crr));y=y.sort();var S=this.state.answerShow,k={optionalAnswers:a,quizTimes:v,rightAnswers:y,isRound:t,studentSelect:n,trueLV:r,allNumbers:i,dataChoose:o,dataTable:m,isPublished:f,idAS:s,idBS:l,idCS:d,idDS:c,idES:u,idFS:h,idGS:p,idHS:g,isShow:S};b.default.sendSignallingAnswerToStudent(k),T.default.CoreController.dispatchEvent({type:"handleAnswerShow",className:"answer-implement-bg",isShow:S})}},{key:"turntableAssemblyShowHandel",value:function(e){if(this.state.disabledTurnplate)return!1;e.preventDefault(),e.stopPropagation(),this.state.teachToolUl="none",this.state.dialShow=!0,this.setState({dialShow:this.state.dialShow,teachToolUl:this.state.teachToolUl}),this.teachBoxLeftMouseOut();var t=0,a=this.state.dialShow,n={rotationAngle:"rotate("+900*t+"deg)",isShow:a};b.default.sendSignallingDialToStudent(n)}},{key:"timerAssemblyShowHandel",value:function(e){if(this.state.disabledTimer)return!1;e.preventDefault(),e.stopPropagation(),this.state.teachToolUl="none",this.state.timerShow=!0,this.state.restarting=!1,this.setState({timerShow:this.state.timerShow,restarting:this.state.restarting,teachToolUl:this.state.teachToolUl}),this.teachBoxLeftMouseOut();var t=this.state.startAndStop,a=this.state.timeDescArray,n=this.state.timerShow,r=this.state.restarting,i={isStatus:t,sutdentTimerArry:a,isShow:n,isRestart:r};b.default.sendSignallingTimerToStudent(i),T.default.CoreController.dispatchEvent({type:"handleTurnShow",className:"timer-implement-bg",isShow:n})}},{key:"responderAssemblyShowHandel",value:function(e){var t=this;if(t.state.disabledResponder)return!1;e.preventDefault(),e.stopPropagation(),t.state.teachToolUl="none",t.state.responderShow=!0,t.setState({responderShow:t.state.responderShow,teachToolUl:t.state.teachToolUl}),this.teachBoxLeftMouseOut();var a=t.state.responderShow,n=t.state.beginIsStatus,r=this.state.userAdmin,i={isShow:a,begin:n,userAdmin:r},o=!1;b.default.sendSignallingQiangDaQi(o,i),T.default.CoreController.dispatchEvent({type:"responderShow",className:"responder-implement-bg",isShow:a})}},{key:"handleBlackBoardClick",value:function(){var e=!1,t={blackBoardState:"_prepareing",currentTapKey:"blackBoardCommon",currentTapPage:1};b.default.sendSignallingFromBlackBoard(t,e)}},{key:"render",value:function(){var e=this,t=this.props.left,a=e.state,n=a.show,r=(a.onClick,a.toolsShow),i=n.allTools,o=0;0==f.default.getTkRoom().getRoomProperties().roomtype&&(o-=1);var s=!0,l=!1,d=void 0;try{for(var u,p=Object.values(r)[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var g=u.value;if(g&&o++,o>5){o=5;break}}}catch(e){l=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw d}}return c.default.createElement("ol",{className:"all-participant-function add-fl clear-float  h-tool",id:"teach_header_tool_vessel",style:{display:i?"block":"none"}}," ",c.default.createElement("li",{className:"tl-all-participant-tools "+("block"===this.state.teachExpansionColumnDisplay?"active":""),id:"tl-all-participant-tools-id",title:h.default.language.languageData.toolCase.toolBox.text,onMouseLeave:e.allLiMouseLeave.bind(this),onClick:this.teachExpansionController.bind(this)},c.default.createElement("button",null,c.default.createElement("span",{className:"tool-box-wrap",id:"tool-box"})),c.default.createElement("div",{className:"teach-expansion-column ",style:{display:this.state.teachExpansionColumnDisplay,width:"calc(100% * "+o+")",right:t<2.5&&"number"==typeof t?"calc(-100% * "+o+")":"100%"}},c.default.createElement("ul",{className:"teach-box-left clear-float",ref:"teachBoxLeftStyle",style:{display:this.state.teachToolUl}},c.default.createElement("li",{className:"answer-implement-bg "+(this.state.disabledAnswer?"disabled":""),disabled:this.state.disabledAnswer,onClick:this.answerAssemblyShowHandel.bind(this),style:{display:r.answer?"":"none"}},c.default.createElement("span",{className:"icon"})),c.default.createElement("li",{className:"turnplate-implement-bg "+(this.state.disabledTurnplate?"disabled":""),disabled:this.state.disabledTurnplate,onClick:this.turntableAssemblyShowHandel.bind(this),style:{display:r.turnplate?"":"none"}},c.default.createElement("span",{className:"icon"})),c.default.createElement("li",{className:"timer-implement-bg "+(this.state.disabledTimer?"disabled":""),disabled:this.state.disabledTimer,onClick:this.timerAssemblyShowHandel.bind(this),style:{display:r.timer?"":"none"}},c.default.createElement("span",{className:"icon"})),c.default.createElement("li",{className:"responder-implement-bg "+(this.state.disabledResponder?"disabled":""),disabled:this.state.disabledResponder,onClick:this.responderAssemblyShowHandel.bind(this),style:{display:r.responder&&0!=f.default.getTkRoom().getRoomProperties().roomtype?"":"none"}},c.default.createElement("span",{className:"icon"})),c.default.createElement("li",{className:"tl-more-black-board "+(this.state.disabledBlackBoard?"disabled":""),title:h.default.language.languageData.header.tool.blackBoard.title.open,disabled:this.state.disabledBlackBoard,id:"more_black_board",style:{display:r.moreBlackboard?"":"none"},onClick:this.handleBlackBoardClick.bind(this)},c.default.createElement("span",{className:"icon"}))))))}}]),t}(c.default.Component);t.default=C,e.exports=t.default}).call(t,a(32))},261:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(36),u=n(c),h=a(12),p=n(h),g=a(18),m=n(g),f=a(19),v=(n(f),a(10)),b=n(v),y=a(20),S=(n(y),a(22)),T=n(S),k=a(24),w=n(k),C=function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={optionUl:"",initArr:[],brr:[],allResult:"",allResultX:"",allResultHover:"",crr:[],trueSelect:"",answerTeachWrapDiv:"none",resultStudentDisplay:null,beginStyle:null,lisStyle:!1,flag:null,resultTeachStyleDisplay:null,changeOneAnswerStyle:"none",mySelect:"",trueLV:0,allNumbers:0,afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],allStudentNameA:[],allStudentNameB:[],allStudentNameC:[],allStudentNameD:[],allStudentNameE:[],allStudentNameF:[],allStudentNameG:[],allStudentNameH:[],liA:"hidden",liB:"hidden",liC:"hidden",liD:"hidden",liE:"hidden",liF:"hidden",liG:"hidden",liH:"hidden",idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],userAdmin:"",dataInit:[],trueResultDivStyle:"",teacherSendTime:"",xiangQingText:"",columnar:"",tableStyle:"",tableObject:"",userSelect:[]},this.selects=!1,this.stop=null,this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;b.default.CoreController.addEventListener("receive-msglist-submitAnswers",e.handlerMsglistResultStudent.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;b.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":m.default.hasRole.roleStudent&&t._updateAnswerShow(a);break;case"submitAnswers":m.default.hasRole.roleStudent&&t._updateSubmitAnswerShow(a)}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t.state.resultStudentDisplay="none",t.state.answerTeachWrapDiv="none",t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultStudentDisplay:t.state.resultStudentDisplay});break;case"answer":t.state.answerTeachWrapDiv="none",t.state.resultStudentDisplay="none",t.state.userSelect=[],t.state.crr=[],t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultStudentDisplay:t.state.answerTeachWrapDiv,crr:t.state.crr,userSelect:t.state.userSelect})}}},{key:"handlerMsglistAnswerShow",value:function(e){var t=this,a=(e.message.answerShowArr,!0),n=!1,r=void 0;try{for(var i,o=e.message.answerShowArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;m.default.hasRole.roleStudent&&t._updateAnswerShow(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"handlerMsglistResultStudent",value:function(e){var t=this,a=(e.message.submitAnswersArr,!0),n=!1,r=void 0;try{for(var i,o=e.message.submitAnswersArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;m.default.hasRole.roleStudent&&T.default.getTkRoom().getMySelf().id==s.fromID&&t._updateSubmitAnswerShow(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_updateSubmitAnswerShow",value:function(e){e.data.sendUserID==T.default.getTkRoom().getMySelf().id&&(this.state.userSelect=e.data.mySelect,this.setState({userSelect:this.state.userSelect}))}},{key:"_updateAnswerShow",value:function(e){var t=this;if(0==e.data.isShow){t.state.brr=e.data.rightAnswers,t.state.lisStyle=!1,t.state.answerAddStyle="hidden",t.state.answerReduceStyle="hidden",t.state.answerTeachWrapDiv="block",t.state.teacherSendTime=e.ts,t.state.changeOneAnswerStyle="none",u.default.findDOMNode(t.refs.submitAndChange).textContent=p.default.language.languageData.answers.submitAnswer.text,t.state.beginStyle="",t.state.initArr=e.data.optionalAnswers;var a=!0,n=!1,r=void 0;try{for(var i,o=t.state.initArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.sel=!1}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}if(t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,answerAddStyle:t.state.answerAddStyle,initArr:t.state.initArr,brr:t.state.brr,lisStyle:t.state.lisStyle,beginStyle:t.state.beginStyle,changeOneAnswerStyle:t.state.changeOneAnswerStyle,teacherSendTime:t.state.teacherSendTime}),e.data.isRound){t.state.trueLV=e.data.trueLV,t.state.allNumbers=e.data.allNumbers,t.state.dataInit=e.data.optionalAnswers,t.setState({trueLV:t.state.trueLV,allNumbers:t.state.allNumbers,dataInit:t.state.dataInit}),t.coordArr(),t.trueArr(),t.state.idA=[],t.state.idB=[],t.state.idC=[],t.state.idD=[],t.state.idE=[],t.state.idF=[],t.state.idG=[],t.state.idH=[],t.state.afterArrayA=[],t.state.afterArrayB=[],t.state.afterArrayC=[],t.state.afterArrayD=[],t.state.afterArrayE=[],t.state.afterArrayF=[],t.state.afterArrayG=[],t.state.afterArrayH=[];for(var l in e.data.dataChoose)for(var c in e.data.dataChoose[l])e.data.dataChoose[l][c].map(function(a,n){if("A"==a){t.state.idA=e.data.idAS,t.state.afterArrayA=[],t.setState({afterArray:t.state.afterArray});var r=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idA.length<13?t.state.idA.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idA.length));t.state.afterArrayA.push(r),t.setState({afterArrayA:t.state.afterArrayA,idA:t.state.idA})}if("B"==a){t.state.idB=e.data.idBS,t.state.afterArrayB=[],t.setState({afterArray:t.state.afterArray});var i=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idB.length<13?t.state.idB.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idB.length));t.state.afterArrayB.push(i),t.setState({afterArrayB:t.state.afterArrayB,idB:t.state.idB})}if("C"==a){t.state.idC=e.data.idCS,t.state.afterArrayC=[],t.setState({afterArray:t.state.afterArray});var o=d.default.createElement("div",{className:"answer-stu-lis",
key:n,style:{height:t.state.idC.length<13?t.state.idC.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idC.length));t.state.afterArrayC.push(o),t.setState({afterArrayC:t.state.afterArrayC,idC:t.state.idC})}if("D"==a){t.state.idD=e.data.idDS,t.state.afterArrayD=[];var s=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idD.length<13?t.state.idD.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idD.length));t.state.afterArrayD.push(s),t.setState({afterArrayD:t.state.afterArrayD,idD:t.state.idD})}if("E"==a){t.state.idE=e.data.idES,t.state.afterArrayE=[];var l=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idE.length<13?t.state.idE.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idE.length));t.state.afterArrayE.push(l),t.setState({afterArrayE:t.state.afterArrayE,idE:t.state.idE})}if("F"==a){t.state.idF=e.data.idFS,t.state.afterArrayF=[];var s=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idF.length<13?t.state.idF.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idF.length));t.state.afterArrayF.push(s),t.setState({afterArrayF:t.state.afterArrayF,idF:t.state.idF})}if("G"==a){t.state.idG=e.data.idGS,t.state.afterArrayG=[];var c=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idG.length<13?t.state.idG.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idG.length));t.state.afterArrayG.push(c),t.setState({afterArrayG:t.state.afterArrayG,idG:t.state.idG})}if("H"==a){t.state.idH=e.data.idHS,t.state.afterArrayH=[];var u=d.default.createElement("div",{className:"answer-stu-lis",key:n,style:{height:t.state.idH.length<13?t.state.idH.length/10+"rem":"1.2rem"}},d.default.createElement("p",null,t.state.idH.length));t.state.afterArrayH.push(u),t.setState({afterArrayH:t.state.afterArrayH,idH:t.state.idH})}});t.coordArrX(),setTimeout(function(){t.mySelectArr(t.state.userSelect)},10),t.state.resultStudentDisplay="block",document.getElementById("result-teach-mytimes").textContent=e.data.quizTimes,t.state.resultStudentDisplay="block",t.state.answerTeachWrapDiv="none",t.state.beginStyle="",t.state.trueResultDivStyle="hidden",t.state.columnar="block",t.state.tableStyle="none",t.state.tableObject=e.data.dataTable,u.default.findDOMNode(t.refs.submitAndChange).textContent=p.default.language.languageData.answers.submitAnswer.text,t.state.xiangQingText=p.default.language.languageData.answers.details.text,t.setState({columnar:t.state.columnar,tableStyle:t.state.tableStyle,tableObject:t.state.tableObject,resultStudentDisplay:t.state.resultStudentDisplay,answerTeachWrapDiv:t.state.answerTeachWrapDiv,beginStyle:t.state.beginStyle,trueResultDivStyle:t.state.trueResultDivStyle,xiangQingText:t.state.xiangQingText,userSelect:t.state.userSelect}),e.data.isPublished&&(t.state.trueResultDivStyle="visible",t.setState({trueResultDivStyle:t.state.trueResultDivStyle}))}else t.state.resultStudentDisplay="none",t.state.answerTeachWrapDiv="block",u.default.findDOMNode(t.refs.submitAndChange).textContent=p.default.language.languageData.answers.submitAnswer.text,t.state.beginStyle="",t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultStudentDisplay:t.state.resultStudentDisplay,beginStyle:t.state.beginStyle})}else t.state.crr=[],t.state.answerTeachWrapDiv="none",t.state.resultStudentDisplay="none",t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultStudentDisplay:t.state.resultStudentDisplay,crr:t.state.crr})}},{key:"_loadTimeDescArray",value:function(e){var t=this,a=[];return e.map(function(e,n){var r=d.default.createElement("li",{className:"answer-teach-lis",key:e.id,style:{background:t.state.initArr[n].sel?"#2196f3":null},onClick:t.changeColor.bind(t,n)},e.name);a.push(r)}),{beforeArray:a}}},{key:"_loadTableDescArray",value:function(e){var t=[];if(""!=e){var a=Array.from(new Set(this.state.brr));a=a.sort();for(var n in e){var r=n+"0",i=n+"1",o=n+"2",s=e[n][i].toString()==a.toString(),l=parseInt(e[n][o]/60)<10?"0"+parseInt(e[n][o]/60):parseInt(e[n][o]/60),c=parseInt(e[n][o]%60)<10?"0"+parseInt(e[n][o]%60):parseInt(e[n][o]%60),u=d.default.createElement("tr",{key:n},d.default.createElement("td",null,e[n][r]),d.default.createElement("td",{className:s?"table-true-result":"table-false-result"},e[n][i]),d.default.createElement("td",null,l,":",c));t.push(u)}}return{afterArry:t}}},{key:"changeColor",value:function(e,t){if(this.state.lisStyle)return!1;this.state.crr=[],this.state.crr.length=0,this.setState({crr:this.state.crr}),this.state.initArr[e].sel=!this.state.initArr[e].sel,this.setState({initArr:this.state.initArr}),0==this.state.initArr[e].sel&&(this.state.beginStyle="",this.setState({beginStyle:this.state.beginStyle}));var a=!0,n=!1,r=void 0;try{for(var i,o=this.state.initArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.sel&&(this.state.beginStyle="#2196f3",this.setState({beginStyle:this.state.beginStyle}))}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}for(var l=0;l<this.state.initArr.length;l++)this.state.initArr[l].sel&&(this.state.crr.push(this.state.initArr[l].name),this.state.crr=Array.from(new Set(this.state.crr)),this.setState({crr:this.state.crr}));this.state.crr.length>0&&(this.state.changeOneAnswerStyle="none",this.setState({changeOneAnswerStyle:this.state.changeOneAnswerStyle}))}},{key:"beginAnswer",value:function(e){if(0==this.state.crr.length)return u.default.findDOMNode(this.refs.submitAndChange).textContent=p.default.language.languageData.answers.submitAnswer.text,this.state.changeOneAnswerStyle="block",this.setState({changeOneAnswerStyle:this.state.changeOneAnswerStyle}),!1;if(this.state.crr.length>0&&(this.state.changeOneAnswerStyle="none",this.setState({changeOneAnswerStyle:this.state.changeOneAnswerStyle})),this.state.lisStyle=!this.state.lisStyle,this.setState({lisStyle:this.state.lisStyle}),1==this.state.lisStyle){this._initSelectArr();var t=this.state.crr,a=!1;this.state.userAdmin=T.default.getTkRoom().getMySelf().nickname,this.setState({userAdmin:this.state.userAdmin});var n=this.state.teacherSendTime,r=this.state.userAdmin,i=T.default.getTkRoom().getMySelf().id,o=this.state.initArr,s={mySelect:t,sendStudentName:r,sendUserID:i,times:n,optionalAnswers:o};e.target.textContent=p.default.language.languageData.answers.changeAnswer.text,w.default.sendSignallingDataStudentToTeacherAnswer(a,s)}else{this.state.crr=[],this.state.beginStyle="#074496",this.setState({crr:this.state.crr,beginStyle:this.state.beginStyle});var l=!0,d=!1,c=void 0;try{for(var h,g=this.state.initArr[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){var m=h.value;m.sel=!1}}catch(e){d=!0,c=e}finally{try{!l&&g.return&&g.return()}finally{if(d)throw c}}e.target.textContent=p.default.language.languageData.answers.submitAnswer.text}}},{key:"_initSelectArr",value:function(){this.state.crr=[],this.state.crr.length=0,this.setState({crr:this.state.crr});for(var e=0;e<this.state.initArr.length;e++)1==this.state.initArr[e].sel&&(this.state.crr.push(this.state.initArr[e].name),this.setState({crr:this.state.crr}))}},{key:"coordArrX",value:function(){var e=this;this.state.allResultX=this.state.dataInit.map(function(t,a){return"A"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayA):"B"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayB):"C"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayC):"D"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayD):"E"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayE):"F"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayF):"G"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayG):"H"==t.name?d.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},e.state.afterArrayH):void 0}),this.setState({allResultX:this.state.allResultX})}},{key:"coordArr",value:function(){this.state.allResult=this.state.dataInit.map(function(e,t){return d.default.createElement("li",{key:e.id},e.name)}),this.setState({allResult:this.state.allResult})}},{key:"trueArr",value:function(){this.state.trueSelect=this.state.brr.map(function(e,t){return d.default.createElement("span",{className:"spans",key:t},e)}),this.setState({trueSelect:this.state.trueSelect})}},{key:"mySelectArr",value:function(e){var t=Array.from(new Set(e));t=t.sort(),this.state.mySelect=t.map(function(e,t){return d.default.createElement("span",{className:"spans",key:t},e)}),this.setState({mySelect:this.state.mySelect})}},{key:"xiangQingHandel",value:function(){this.state.isXiangQing=!this.state.isXiangQing,this.setState({isXiangQing:this.state.isXiangQing}),this.state.isXiangQing?(this.state.columnar="none",this.state.tableStyle="block",this.state.xiangQingText=p.default.language.languageData.answers.statistics.text,this.setState({columnar:this.state.columnar,tableStyle:this.state.tableStyle,xiangQingText:this.state.xiangQingText})):(this.state.columnar="block",this.state.tableStyle="none",this.state.xiangQingText=p.default.language.languageData.answers.details.text,this.setState({columnar:this.state.columnar,tableStyle:this.state.tableStyle,xiangQingText:this.state.xiangQingText}))}},{key:"render",value:function(){var e=this.state,t=e.initArr,a=e.tableObject;this.state.crr=Array.from(new Set(this.state.crr));var n=this._loadTimeDescArray(t),r=n.beforeArray,i=this._loadTableDescArray(a),o=i.afterArry;return d.default.createElement("div",null,d.default.createElement("div",{className:"answer-teach-wrapDiv",style:{display:this.state.answerTeachWrapDiv},ref:"dragBox"},d.default.createElement("div",{className:"answer-teach-header"},d.default.createElement("div",{className:"answer-teach-header-left"},d.default.createElement("span",{className:"answer-teach-headerImg"}),d.default.createElement("span",{className:"answer-teach-header-left-grey"},p.default.language.languageData.answers.headerTopLeft.text),d.default.createElement("span",{className:"answer-teach-header-left-green"},p.default.language.languageData.answers.headerMiddel.text)),d.default.createElement("div",{className:"answer-teach-header-right",style:{display:"none"}})),d.default.createElement("div",{className:"answer-teach-content"},d.default.createElement("ul",{className:"answer-teach-optionUl"},r),d.default.createElement("p",{className:"changeOneAnswer",style:{display:this.state.changeOneAnswerStyle}},p.default.language.languageData.answers.selectAnswer.text),d.default.createElement("div",{className:"answer-teach-add",style:{visibility:this.state.answerAddStyle}},"+"),d.default.createElement("div",{className:"answer-teach-reduce",style:{visibility:this.state.answerReduceStyle}},"-"),d.default.createElement("div",{className:"answer-teach-begin",onClick:this.beginAnswer.bind(this),style:{background:this.state.beginStyle},ref:"submitAndChange"},p.default.language.languageData.answers.submitAnswer.text))),d.default.createElement("div",{className:"result-teach-wrapDiv",style:{display:this.state.resultStudentDisplay},ref:"resultRef"},d.default.createElement("div",{className:"result-teach-header"},d.default.createElement("div",{className:"result-teach-header-left"},d.default.createElement("span",{className:"result-teach-headerImg"}),d.default.createElement("span",{className:"result-teach-header-left-grey"},p.default.language.languageData.answers.headerTopLeft.text),d.default.createElement("span",{id:"result-teach-mytimes",ref:"timeText"})),d.default.createElement("p",{className:"result-teach-close",style:{display:this.state.resultTeachStyleDisplay}},"  ")),d.default.createElement("div",{className:"result-teach-content"},d.default.createElement("p",{className:"answersPeople"},p.default.language.languageData.answers.numberOfAnswer.text,":",d.default.createElement("span",{ref:"ans"},this.state.allNumbers),d.default.createElement("span",{className:"xiang-qing-div",onClick:this.xiangQingHandel.bind(this)},"(",this.state.xiangQingText,")")),d.default.createElement("span",{className:"result-teach-accuracy-right"},d.default.createElement("span",{className:"result-teach-accuracy-right-text"},p.default.language.languageData.answers.tureAccuracy.text,"："),d.default.createElement("span",{style:{color:"red"}},this.state.trueLV,"%")),d.default.createElement("div",{className:"result-teach-coordinate-div",style:{display:this.state.columnar}},d.default.createElement("span",{className:"result-teach-heart-span"},"0"),d.default.createElement("div",{className:"result-teach-staff-div"},d.default.createElement("ul",{className:"result-student-allResult"},this.state.allResultX)),d.default.createElement("ul",{className:"result-teach-allResult"},this.state.allResult)),d.default.createElement("div",{className:"answer-table-div",style:{display:this.state.tableStyle}},d.default.createElement("table",{className:"answer-table"},d.default.createElement("tbody",null,d.default.createElement("tr",{className:"answer-table-first-tr"},d.default.createElement("th",null,p.default.language.languageData.answers.student.text),d.default.createElement("th",null,p.default.language.languageData.answers.TheSelectedTheAnswer.text),d.default.createElement("th",null,p.default.language.languageData.answers.AnswerTime.text)),o))),d.default.createElement("div",{className:"result-teach-true-result",style:{visibility:this.state.trueResultDivStyle}},d.default.createElement("span",{style:{color:"white"}},p.default.language.languageData.answers.trueAnswer.text,":"),d.default.createElement("span",{className:"result-teach-trueSelect"},this.state.trueSelect)),d.default.createElement("div",{className:"result-teach-true-result"},d.default.createElement("span",{style:{color:"white"}},p.default.language.languageData.answers.myAnswer.text,":"),d.default.createElement("span",{className:"result-teach-trueSelect"},this.state.mySelect)))))}}]),t}(d.default.Component);t.default=C,e.exports=t.default},262:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},c=a(2),u=n(c),h=a(36),p=(n(h),a(12)),g=n(p),m=a(18),f=n(m),v=a(19),b=n(v),y=a(10),S=n(y),T=a(20),k=(n(T),a(22)),w=(n(k),a(24)),C=n(w),P=a(261),D=n(P),_=a(56),A=(n(_),function(e){function t(e){i(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var a=this.props.id;this.state=r({optionUl:"",initArr:[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],brr:[],allResult:"",allResultX:"",crr:[],trueSelect:"",endQuestion:null,restartQuestion:null,answerTeachWrapDiv:"none",resultTeachDisplay:null,beginStyle:null,lisStyle:!1,flag:null,plusStyle:"#368bcb",reduceStyle:"#368bcb",resultTeachStyleDisplay:null,numz:0,afterArrayA:[],afterArrayB:[],afterArrayC:[],afterArrayD:[],afterArrayE:[],afterArrayF:[],afterArrayG:[],afterArrayH:[],studentNumbers:[],allStudentNameA:[],allStudentNameB:[],allStudentNameC:[],allStudentNameD:[],allStudentNameE:[],allStudentNameF:[],allStudentNameG:[],allStudentNameH:[],allNumbers:0,studentSendArry:[],liA:"hidden",liB:"hidden",liC:"hidden",liD:"hidden",liE:"hidden",liF:"hidden",liG:"hidden",liH:"hidden",idA:[],idB:[],idC:[],idD:[],idE:[],idF:[],idG:[],idH:[],trueNum:0,trueLV:0,allStudentChosseAnswer:{},round:!1,isShow:!1,dataInit:[],publishAnswerText:"",xiangQingText:"",tableStyle:"",columnar:"",isXiangQing:!1,tableArry:[],tableObject:{},isPublished:!1,publishedWarning:"none",publishedWarningColor:"#074496",servicerTimes:""},a,{left:0,top:0,offsetX:0,offsetY:0}),this.liArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1},{id:4,name:"E",sel:!1},{id:5,name:"F",sel:!1},{id:6,name:"G",sel:!1},{id:7,name:"H",sel:!1}],this.selects=!1,this.stop=null,this.isHasTransition=!1,this[a]={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;e.trueArr(),S.default.Window.addEventListener(f.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("handleAnswerShow",e.handleAnswerShow.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("receive-msglist-submitAnswers",e.handlerMsglistResultStudent.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("receive-msglist-answer",e.handlerMsglistAnswerShow.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener("receive-msglist-AnswerDrag",e.handlerMsglistAnswerDrag.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),S.default.CoreController.addEventListener(f.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid)}},{key:"componentDidUpdate",value:function(){1==this.isHasTransition&&(this.isHasTransition=!1)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;b.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant||f.default.hasRole.rolePatrol)&&t._teacherRecevedServiceDataShow(a);break;case"submitAnswers":t._updateStudentShow(a);break;case"AnswerDrag":var n=t.props.id;this.isHasTransition=!0;var i=a.data,o=i.percentLeft,s=i.percentTop;this[n]={percentLeft:o,percentTop:s},b.default.percentageChangeToRem(t,o,s,n),this.setState(r({},n,this.state[n]));break;case"UpdateTime":t.state.servicerTimes=a.ts,t.setState({servicerTimes:t.state.servicerTimes})}}},{key:"handlerMsglistAnswerDrag",value:function(e){var t=this,a=e.message.AnswerDragArray,n=this,i=n.props.id;a.map(function(e,a){var o=e.data,s=o.percentLeft,l=o.percentTop;t[i]={percentLeft:s,percentTop:l},b.default.percentageChangeToRem(n,s,l,i),n.setState(r({},i,n.state[i]))})}},{key:"handleAnswerShow",value:function(e){var t=this;"answer-implement-bg"==e.className&&"none"==t.state.answerTeachWrapDiv&&(t.state.answerTeachWrapDiv="block",t.state.resultTeachDisplay="none",t.state.plusStyle="#368bcb",t.state.reduceStyle="#368bcb",t.clearTeacherShowData(),t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultTeachDisplay:t.state.resultTeachDisplay,plusStyle:t.state.plusStyle,reduceStyle:t.state.plusStyle}))}},{key:"handlerMsglistAnswerShow",value:function(e){var t=this,a=!0,n=!1,r=void 0;try{for(var i,o=e.message.answerShowArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant||f.default.hasRole.rolePatrol)&&t._teacherRecevedServiceDataShow(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_teacherRecevedServiceDataShow",value:function(e){var t=this;setTimeout(function(){t.coordArr(e.data.optionalAnswers),t.state.crr=e.data.rightAnswers,t.state.init=e.data.optionalAnswers,t.state.dataInit=e.data.optionalAnswers,t.setState({crr:t.state.crr,dataInit:t.state.dataInit,initArr:t.state.initArr}),e.data.isShow?(t.clearTeacherShowData(),t.state.initArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],t.state.plusStyle="#368bcb",t.state.reduceStyle="#368bcb",t.state.answerTeachWrapDiv="block",t.state.resultTeachDisplay="none",t.state.publishedWarning="none",t.setState({plusStyle:t.state.plusStyle,reduceStyle:t.state.plusStyle,answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultTeachDisplay:t.state.resultTeachDisplay,initArr:t.state.initArr,publishedWarning:t.state.publishedWarning})):e.data.isRound?(clearInterval(t.stop),t.state.endQuestion="none",t.state.answerTeachWrapDiv="none",t.state.resultTeachDisplay="block",t.state.restartQuestion="block",t.state.tableArry=[],t.state.xiangQingText=g.default.language.languageData.answers.details.text,t.state.publishAnswerText=g.default.language.languageData.answers.PublishTheAnswer.text,t.state.resultTeachStyleDisplay="block",t.state.crr=e.data.rightAnswers,t.state.dataInit=e.data.optionalAnswers,document.getElementById("result-teach-mytime").textContent="",document.getElementById("result-teach-mytime").textContent=e.data.quizTimes,t.setState({tableArry:t.state.tableArry,publishAnswerText:t.state.publishAnswerText,xiangQingText:t.state.xiangQingText,endQuestion:t.state.endQuestion,restartQuestion:t.state.restartQuestion,crr:t.state.crr,dataInit:t.state.dataInit,answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultTeachDisplay:t.state.resultTeachDisplay,resultTeachStyleDisplay:t.state.resultTeachStyleDisplay}),e.data.isPublished&&(t.state.publishedWarning="none",t.state.publishAnswerText=g.default.language.languageData.answers.published.text,t.setState({publishAnswerText:t.state.publishAnswerText,publishedWarning:t.state.publishedWarning})),t.trueArr(),t.coordArr(t.state.dataInit),t.coordArrX(t.state.dataInit)):(clearInterval(t.stop),t.state.servicerTimes<e.ts?t.state.numz=0:t.state.numz=t.state.servicerTimes-e.ts-1,t.time_fun(),t.state.endQuestion="block",t.state.restartQuestion="none",t.state.answerTeachWrapDiv="none",t.state.resultTeachDisplay="block",t.state.resultTeachStyleDisplay="none",t.state.columnar="block",t.state.tableStyle="none",t.state.publishedWarningColor="#074496",t.state.dataInit=e.data.optionalAnswers,t.state.xiangQingText=g.default.language.languageData.answers.details.text,t.state.publishAnswerText=g.default.language.languageData.answers.PublishTheAnswer.text,t.state.afterArrayA=[],t.state.afterArrayB=[],t.state.afterArrayC=[],t.state.afterArrayD=[],t.state.afterArrayE=[],t.state.afterArrayF=[],t.state.afterArrayG=[],t.state.afterArrayH=[],t.state.afterArray=[],t.state.allStudentName=[],t.state.allStudentChosseAnswer={},t.state.publishedWarning="none",t.state.trueLV=0,t.state.allNumbers=0,t.state.idA=[],t.state.idB=[],t.state.idC=[],t.state.idD=[],t.state.idE=[],t.state.idF=[],t.state.idG=[],t.state.idH=[],t.trueArr(),t.coordArr(t.state.dataInit),t.coordArrX(t.state.dataInit),t.setState({numz:t.state.numz,publishedWarningColor:t.state.publishedWarningColor,columnar:t.state.columnar,tableStyle:t.state.tableStyle,publishedWarning:t.state.publishedWarning,publishAnswerText:t.state.publishAnswerText,xiangQingText:t.state.xiangQingText,answerTeachWrapDiv:t.state.answerTeachWrapDiv,allStudentChosseAnswer:t.state.allStudentChosseAnswer,resultTeachDisplay:t.state.resultTeachDisplay,crr:t.state.crr,dataInit:t.state.dataInit,endQuestion:t.state.endQuestion,restartQuestion:t.state.restartQuestion,afterArray:t.state.afterArray,afterArrayA:t.state.afterArrayA,afterArrayB:t.state.afterArrayB,afterArrayC:t.state.afterArrayC,afterArrayD:t.state.afterArrayD,afterArrayE:t.state.afterArrayE,afterArrayF:t.state.afterArrayF,afterArrayG:t.state.afterArrayG,afterArrayH:t.state.afterArrayH,trueLV:t.state.trueLV,allNumbers:t.state.allNumbers,idA:t.state.idA,idB:t.state.idB,idC:t.state.idC,idD:t.state.idD,idE:t.state.idE,idF:t.state.idF,idG:t.state.idG,idH:t.state.idH,resultTeachStyleDisplay:t.state.resultTeachStyleDisplay}))},10)}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"answer":t.state.answerTeachWrapDiv="none",t.state.resultTeachDisplay="none",t.state.tableObject={},t.setState({tableObject:t.state.tableObject,answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultTeachDisplay:t.state.resultTeachDisplay});break;case"ClassBegin":t.state.answerTeachWrapDiv="none",t.state.resultTeachDisplay="none",t.setState({answerTeachWrapDiv:t.state.answerTeachWrapDiv,resultTeachDisplay:t.state.resultTeachDisplay})}}},{key:"handlerMsglistResultStudent",value:function(e){var t=this,a=e.message.submitAnswersArr;if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant||f.default.hasRole.rolePatrol)for(var n in a)t._updateStudentShow(a[n])}},{key:"handlerMsglistAnswerIconShow",value:function(e){this.state.answerTeachWrapDiv="block",this.setState({answerTeachWrapDiv:this.state.answerTeachWrapDiv})}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!g.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");var e=this;e.clearTeacherShowData()}},{key:"_updateStudentShow",value:function(e){var t=this;t.state.studentNumbers.push(e.fromID);var a=e.fromID;t.setState({studentNumbers:t.state.studentNumbers});var n=e.data.mySelect,r=e.data.sendStudentName,i=a+"0",o=a+"1",s=a+"2";t.state.tableObject[a]={},t.state.tableObject[a][i]=e.data.sendStudentName,t.state.tableObject[a][o]=e.data.mySelect,t.state.tableObject[a][s]=e.ts-e.data.times,t.state.allStudentChosseAnswer[a]={},t.state.allStudentChosseAnswer[a][r]=n,t.setState({allStudentChosseAnswer:t.state.allStudentChosseAnswer,tableObject:t.state.tableObject});for(var l=0;l<t.state.studentNumbers.length;l++)e.fromID==t.state.studentNumbers[l]&&(t.state.allStudentChosseAnswer[a][r]=n,t.state.tableObject[a][i]=e.data.sendStudentName,t.state.tableObject[a][o]=e.data.mySelect,t.state.tableObject[a][s]=e.ts-e.data.times,t.setState({allStudentChosseAnswer:t.state.allStudentChosseAnswer,tableObject:t.state.tableObject}));var d=Array.from(new Set(t.state.studentNumbers));t.state.allNumbers=d.length,t.state.idA=[],t.state.idB=[],t.state.idC=[],t.state.idD=[],t.state.idE=[],t.state.idF=[],t.state.idG=[],t.state.idH=[],t.state.afterArrayA=[],t.state.afterArrayB=[],t.state.afterArrayC=[],t.state.afterArrayD=[],t.state.afterArrayE=[],t.state.afterArrayF=[],t.state.afterArrayG=[],t.state.afterArrayH=[],t.state.trueNum=0,t.setState({afterArrayA:t.state.afterArrayA,afterArrayB:t.state.afterArrayB,afterArrayC:t.state.afterArrayC,afterArrayD:t.state.afterArrayD,afterArrayE:t.state.afterArrayE,afterArrayF:t.state.afterArrayF,afterArrayG:t.state.afterArrayG,afterArrayH:t.state.afterArrayH}),e.data.mySelect.length;for(var c in t.state.allStudentChosseAnswer){var h=function(a){var n=a;t.state.allStudentChosseAnswer[c][n].map(function(e,a){if("A"==e){t.state.idA.push(n),t.state.afterArrayA=[],t.setState({afterArray:t.state.afterArray});var r=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idA.length<13?t.state.idA.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idA.length));t.state.afterArrayA.push(r),t.setState({afterArrayA:t.state.afterArrayA,idA:t.state.idA})}if("B"==e){t.state.idB.push(n),t.state.afterArrayB=[],t.setState({afterArray:t.state.afterArray});var i=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idB.length<13?t.state.idB.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idB.length));t.state.afterArrayB.push(i),t.setState({afterArrayB:t.state.afterArrayB,idB:t.state.idB})}if("C"==e){t.state.idC.push(n),t.state.afterArrayC=[],t.setState({afterArray:t.state.afterArray});var o=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idC.length<13?t.state.idC.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idC.length));t.state.afterArrayC.push(o),t.setState({afterArrayC:t.state.afterArrayC,idC:t.state.idC})}if("D"==e){t.state.idD.push(n),t.state.afterArrayD=[];var s=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idD.length<13?t.state.idD.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idD.length));t.state.afterArrayD.push(s),t.setState({afterArrayD:t.state.afterArrayD,idD:t.state.idD})}if("E"==e){t.state.idE.push(n),t.state.afterArrayE=[];var l=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idE.length<13?t.state.idE.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idE.length));t.state.afterArrayE.push(l),t.setState({afterArrayE:t.state.afterArrayE,idE:t.state.idE})}if("F"==e){t.state.idF.push(n),t.state.afterArrayF=[];var d=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idF.length<13?t.state.idF.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idF.length));t.state.afterArrayF.push(d),t.setState({afterArrayF:t.state.afterArrayF,idF:t.state.idF})}if("G"==e){t.state.idG.push(n),t.state.afterArrayG=[];var c=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idG.length<13?t.state.idG.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idG.length));t.state.afterArrayG.push(c),t.setState({afterArrayG:t.state.afterArrayG,idG:t.state.idG})}if("H"==e){t.state.idH.push(n),t.state.afterArrayH=[];var h=u.default.createElement("div",{className:"answer-stu-lis",key:a,style:{height:t.state.idH.length<13?t.state.idH.length/10+"rem":"1.2rem"}},u.default.createElement("p",null,t.state.idH.length));t.state.afterArrayH.push(h),t.setState({afterArrayH:t.state.afterArrayH,idH:t.state.idH})}});var r=e.data.optionalAnswers;t.coordArr(r),t.coordArrX(r);var i=Array.from(new Set(t.state.crr));i=i.sort(),t.state.allStudentChosseAnswer[c][n].sort().toString()==i.toString()?(t.state.trueNum++,t.setState({trueNum:t.state.trueNum}),t.state.trueLV=t.state.trueNum/t.state.allNumbers*100,t.state.trueLV=t.state.trueLV.toFixed(0),t.setState({trueLV:t.state.trueLV})):(Array.from(new Set(t.state.studentNumbers)),t.state.trueLV=t.state.trueNum/t.state.allNumbers*100,t.state.trueLV=t.state.trueLV.toFixed(0),t.setState({trueLV:t.state.trueLV}))};for(var p in t.state.allStudentChosseAnswer[c])h(p)}}},{key:"_loadTableDescArray",value:function(e){var t=[],a=Array.from(new Set(this.state.crr));a=a.sort();for(var n in e){var r=n+"0",i=n+"1",o=n+"2",s=e[n][i].toString()==a.toString(),l=parseInt(e[n][o]/60)<10?"0"+parseInt(e[n][o]/60):parseInt(e[n][o]/60),d=parseInt(e[n][o]%60)<10?"0"+parseInt(e[n][o]%60):parseInt(e[n][o]%60),c=u.default.createElement("tr",{key:n},u.default.createElement("td",null,e[n][r]),u.default.createElement("td",{className:s?"table-true-result":"table-false-result"},e[n][i]),u.default.createElement("td",null,l,":",d));
t.push(c)}return{afterArry:t}}},{key:"_loadTimeDescArray",value:function(e){var t=this,a=[];return e.map(function(e,n){var r=u.default.createElement("li",{className:"answer-teach-lis",key:e.id,style:{background:t.state.initArr[n].sel?"#2196f3":null},onClick:t.changeColor.bind(t,n)},e.name);a.push(r)}),{beforeArray:a}}},{key:"addHandel",value:function(e){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){var t=this.state.initArr.length;if(t>=2&&(this.state.plusStyle="#368bcb",this.state.reduceStyle="#368bcb",this.setState({plusStyle:this.state.plusStyle,reduceStyle:this.state.reduceStyle})),t>7)return this.state.plusStyle="#202C4A",this.setState({plusStyle:this.state.plusStyle}),!1;7==t&&(this.state.plusStyle="#202C4A",this.setState({plusStyle:this.state.plusStyle})),this.liArr[t].sel=!1,this.state.initArr.push(this.liArr[t]),this.setState({optionUl:this.state.optionUl,initArr:this.state.initArr})}}},{key:"reduceHandel",value:function(e){var t=[];if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){var a=this.state.initArr.length;a>=2&&(this.state.plusStyle="#368bcb",this.setState({plusStyle:this.state.plusStyle})),a>=3&&(this.state.initArr.pop(),this.state.reduceStyle="#368bcb",this.setState({reduceStyle:this.state.reduceStyle,plusStyle:this.state.plusStyle})),3==a&&(this.state.reduceStyle="#202C4A",this.setState({reduceStyle:this.state.reduceStyle}));var n=!0,r=!1,i=void 0;try{for(var o,l=Object.entries(this.state.initArr)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var d=s(o.value,2),c=(d[0],d[1]);t.push(c.sel),t.indexOf(!0)>=0?(this.state.beginStyle="#2196f3",this.setState({beginStyle:this.state.beginStyle})):(this.state.beginStyle="",this.setState({beginStyle:this.state.beginStyle}))}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}this.setState({initArr:this.state.initArr})}}},{key:"changeColor",value:function(e,t){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){this.state.crr=[],this.state.initArr[e].sel=!this.state.initArr[e].sel,this.setState({initArr:this.state.initArr,crr:this.state.crr}),0==this.state.initArr[e].sel&&(this.state.beginStyle="",this.setState({beginStyle:this.state.beginStyle}));var a=!0,n=!1,r=void 0;try{for(var i,o=this.state.initArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.sel&&(this.state.beginStyle="#2196f3",this.setState({beginStyle:this.state.beginStyle}))}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}}},{key:"beginAnswer",value:function(e){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){for(var t=(this.state.initArr.length,0);t<this.state.initArr.length;t++)this.state.initArr[t].sel&&(this.state.crr.push(this.state.initArr[t].name),this.state.crr=Array.from(new Set(this.state.crr)),this.setState({crr:this.state.crr}));if(""==e.target.style.background)return!1;this.state.afterArrayA=[],this.state.afterArrayB=[],this.state.afterArrayC=[],this.state.afterArrayD=[],this.state.afterArrayE=[],this.state.afterArrayF=[],this.state.afterArrayG=[],this.state.afterArrayH=[],this.state.answerTeachWrapDiv="none",this.state.resultTeachDisplay="block",this.state.resultTeachStyleDisplay="none",this.state.endQuestion="block",this.state.restartQuestion="none",this.state.columnar="block",this.state.tableStyle="none",this.state.publishedWarningColor="#074496",this.state.publishAnswerText=g.default.language.languageData.answers.PublishTheAnswer.text,this.state.xiangQingText=g.default.language.languageData.answers.details.text,this.state.isPublished=!1,this.state.publishedWarning="none",this.setState({publishedWarningColor:this.state.publishedWarningColor,columnar:this.state.columnar,tableStyle:this.state.tableStyle,publishedWarning:this.state.publishedWarning,isPublished:this.state.isPublished,xiangQingText:this.state.xiangQingText,publishAnswerText:this.state.publishAnswerText,answerTeachWrapDiv:this.state.answerTeachWrapDiv,resultTeachDisplay:this.state.resultTeachDisplay,resultTeachStyleDisplay:this.state.resultTeachStyleDisplay,endQuestion:this.state.endQuestion,restartQuestion:this.state.restartQuestion,afterArray:this.state.afterArray,afterArrayA:this.state.afterArrayA,afterArrayB:this.state.afterArrayB,afterArrayC:this.state.afterArrayC,afterArrayD:this.state.afterArrayD,afterArrayE:this.state.afterArrayE,afterArrayF:this.state.afterArrayF,afterArrayG:this.state.afterArrayG,afterArrayH:this.state.afterArrayH,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,idA:this.state.idA,idB:this.state.idB,idC:this.state.idC,idD:this.state.idD,idE:this.state.idE,idF:this.state.idF,idG:this.state.idG,idH:this.state.idH}),clearInterval(this.stop),document.getElementById("result-teach-mytime").textContent="00:00:00",this.trueArr(),this.time_fun();var a=!0,n=!1,r=void 0;try{for(var i,o=this.state.initArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.sel=!1,this.setState({initArr:this.state.initArr})}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}this.state.isShow=!1,this.setState({isShow:this.state.isShow});var l=this.state.isShow,d=this.state.round,c=this.state.initArr,u=this.state.brr,h=this.state.trueLV,p=this.state.allNumbers,m=this.state.allStudentChosseAnswer,v=this.state.tableObject,b=this.state.idA,y=this.state.idB,S=this.state.idC,T=this.state.idD,k=this.state.idE,w=this.state.idF,P=this.state.idG,D=this.state.idH,_=this.state.isPublished,A=document.getElementById("result-teach-mytime").textContent,E=Array.from(new Set(this.state.crr));E=E.sort();var I={optionalAnswers:c,quizTimes:A,rightAnswers:E,isRound:d,studentSelect:u,trueLV:h,allNumbers:p,dataChoose:m,dataTable:v,isPublished:_,idAS:b,idBS:y,idCS:S,idDS:T,idES:k,idFS:w,idGS:P,idHS:D,isShow:l};C.default.sendSignallingAnswerToStudent(I),this.coordArr(this.state.initArr),this.coordArrX(this.state.initArr)}}},{key:"coordArrX",value:function(e){this.state.allResultX=e.map(function(t,a){return u.default.createElement("li",{key:a,style:{width:1/e.length*100-5+"%"}},t.name)}),this.setState({allResultX:this.state.allResultX})}},{key:"coordArr",value:function(e){var t=this;this.state.allResult=e.map(function(e,a){return"A"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayA):"B"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayB):"C"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayC):"D"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayD):"E"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayE):"F"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayF):"G"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayG):"H"==e.name?u.default.createElement("li",{key:a,style:{width:"7.5%",left:"0.5%"}},t.state.afterArrayH):void 0}),this.setState({allResult:this.state.allResult})}},{key:"trueArr",value:function(){var e=Array.from(new Set(this.state.crr));e=e.sort(),this.state.trueSelect=e.map(function(e,t){return u.default.createElement("span",{className:"spans",key:t},e)}),this.setState({trueSelect:this.state.trueSelect})}},{key:"two_char",value:function(e){return e>=10?e:"0"+e}},{key:"time_fun",value:function(){var e=this;e.stop=setInterval(function(){e.setState({numz:e.state.numz+1});var t=new Date(0,0);t.setSeconds(e.state.numz);var a=t.getHours(),n=t.getMinutes(),r=t.getSeconds();document.getElementById("result-teach-mytime").textContent=e.two_char(a)+":"+e.two_char(n)+":"+e.two_char(r)},1e3),e.setState({stop:e.state.stop})}},{key:"endHandel",value:function(){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){clearInterval(this.stop),this.state.endQuestion="none",this.state.restartQuestion="block",this.state.resultTeachStyleDisplay="block",this.state.round=!0,this.state.isPublished=!0,this.setState({endQuestion:this.state.endQuestion,restartQuestion:this.state.restartQuestion,round:this.state.round,resultTeachStyleDisplay:this.state.resultTeachStyleDisplay,isPublished:this.state.isPublished}),this.state.isShow=!1,this.setState({isShow:this.state.isShow});var e=this.state.isShow,t=document.getElementById("result-teach-mytime").textContent,a=this.state.initArr,n=Array.from(new Set(this.state.crr)),r=n.sort(),i=this.state.brr,o=this.state.trueLV,s=this.state.round,l=this.state.allNumbers,d=this.state.allStudentChosseAnswer,c=this.state.tableObject,u=this.state.isPublished,h=this.state.idA,p=this.state.idB,g=this.state.idC,m=this.state.idD,v=this.state.idE,b=this.state.idF,y=this.state.idG,S=this.state.idH,T={optionalAnswers:a,quizTimes:t,rightAnswers:r,isRound:s,studentSelect:i,trueLV:o,allNumbers:l,dataChoose:d,dataTable:c,isPublished:u,idAS:h,idBS:p,idCS:g,idDS:m,idES:v,idFS:b,idGS:y,idHS:S,isShow:e};C.default.sendSignallingAnswerToStudent(T),this.state.isPublished=!0,this.setState({isPublished:this.state.isPublished})}}},{key:"restartHandel",value:function(){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){this.clearTeacherShowData(),clearInterval(this.stop),document.getElementById("result-teach-mytime").textContent="00:00:00",this.state.initArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],this.state.answerTeachWrapDiv="block",this.state.allStudentName=[],this.state.tableArry=[],this.state.allStudentChosseAnswer={},this.state.round=!1,this.state.crr=[],this.state.brr=[],this.state.trueLV=0,this.state.allNumbers=0,this.state.studentNumbers=[],this.state.tableObject={},this.state.isPublished=!1,this.state.publishAnswerText="",this.state.allResult="",this.setState({allResult:this.state.allResult,publishAnswerText:this.state.publishAnswerText,tableObject:this.state.tableObject,tableArry:this.state.tableArry,allStudentChosseAnswer:this.state.allStudentChosseAnswer,studentNumbers:this.state.studentNumbers,brr:this.state.brr,crr:this.state.crr,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,answerTeachWrapDiv:this.state.answerTeachWrapDiv,allStudentName:this.state.allStudentName,round:this.state.round,initArr:this.state.initArr,isPublished:this.state.isPublished}),this.state.isShow=!0,this.setState({isShow:this.state.isShow});var e=this.state.isShow,t=document.getElementById("result-teach-mytime").textContent,a=this.state.initArr,n=Array.from(new Set(this.state.crr)),r=n.sort(),i=this.state.brr,o=this.state.trueLV,s=this.state.round,l=this.state.allNumbers,d=this.state.allStudentChosseAnswer,c=this.state.tableObject,u=this.state.isPublished,h=this.state.idA,p=this.state.idB,g=this.state.idC,m=this.state.idD,v=this.state.idE,b=this.state.idF,y=this.state.idG,S=this.state.idH,T={optionalAnswers:a,quizTimes:t,rightAnswers:r,isRound:s,studentSelect:i,trueLV:o,allNumbers:l,dataChoose:d,dataTable:c,isPublished:u,idAS:h,idBS:p,idCS:g,idDS:m,idES:v,idFS:b,idGS:y,idHS:S,isShow:e},k=!0;C.default.sendSignallingAnswerToStudent(T,k),k=!1,C.default.sendSignallingAnswerToStudent(T,k)}}},{key:"publishAnswerHandel",value:function(e){if(0==this.state.isPublished)return this.state.publishedWarning="block",this.setState({publishedWarning:this.state.publishedWarning}),!1;e.target.textContent=g.default.language.languageData.answers.published.text,this.state.publishedWarningColor="#3C75BB",this.state.publishedWarning="none",this.setState({publishAnswerText:this.state.publishAnswerText,publishedWarning:this.state.publishedWarning,publishedWarningColor:this.state.publishedWarningColor});var t=this.state.isShow,a=document.getElementById("result-teach-mytime").textContent,n=this.state.initArr,r=Array.from(new Set(this.state.crr)),i=r.sort(),o=this.state.brr,s=this.state.trueLV,l=this.state.round,d=this.state.allNumbers,c=this.state.allStudentChosseAnswer,u=this.state.tableObject,h=this.state.isPublished,p=this.state.idA,m=this.state.idB,f=this.state.idC,v=this.state.idD,b=this.state.idE,y=this.state.idF,S=this.state.idG,T=this.state.idH,k={optionalAnswers:n,quizTimes:a,rightAnswers:i,isRound:l,studentSelect:o,trueLV:s,allNumbers:d,dataChoose:c,dataTable:u,isPublished:h,idAS:p,idBS:m,idCS:f,idDS:v,idES:b,idFS:y,idGS:S,idHS:T,isShow:t};C.default.sendSignallingAnswerToStudent(k)}},{key:"xiangQingHandel",value:function(){this.state.isXiangQing=!this.state.isXiangQing,this.state.publishedWarning="none",this.setState({isXiangQing:this.state.isXiangQing,publishedWarning:this.state.publishedWarning}),this.state.isXiangQing?(this.state.columnar="none",this.state.tableStyle="block",this.state.xiangQingText=g.default.language.languageData.answers.statistics.text,this.setState({columnar:this.state.columnar,tableStyle:this.state.tableStyle,xiangQingText:this.state.xiangQingText})):(this.state.columnar="block",this.state.tableStyle="none",this.state.xiangQingText=g.default.language.languageData.answers.details.text,this.setState({columnar:this.state.columnar,tableStyle:this.state.tableStyle,xiangQingText:this.state.xiangQingText}))}},{key:"clearTeacherShowData",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.state.initArr[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;i.sel=!1,this.setState({initArr:this.state.initArr})}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}clearInterval(this.stop),this.state.trueNum=0,this.state.numz=0,this.state.brr=[],this.state.crr=[],this.state.afterArrayA=[],this.state.afterArrayB=[],this.state.afterArrayC=[],this.state.afterArrayD=[],this.state.afterArrayE=[],this.state.afterArrayF=[],this.state.afterArrayG=[],this.state.afterArrayH=[],this.state.afterArray=[],this.state.studentNumbers=[],this.state.allStudentName=[],this.state.tableObject={},this.state.trueLV=0,this.state.allNumbers=0,this.state.idA=[],this.state.idB=[],this.state.idC=[],this.state.idD=[],this.state.idE=[],this.state.idF=[],this.state.idG=[],this.state.idH=[],this.state.tableArry=[],this.state.initArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],document.getElementById("result-teach-mytime").textContent="00:00:00",this.state.endQuestion="block",this.state.restartQuestion="none",this.state.beginStyle="",this.state.resultTeachDisplay="none",this.state.plusStyle="#368bcb",this.state.reduceStyle="#368bcb",this.state.publishedWarning="none",this.setState({numz:this.state.numz,publishedWarning:this.state.publishedWarning,tableObject:this.state.tableObject,tableArry:this.state.tableArry,endQuestion:this.state.endQuestion,studentNumbers:this.state.studentNumbers,restartQuestion:this.state.restartQuestion,answerTeachWrapDiv:this.state.answerTeachWrapDiv,resultTeachDisplay:this.state.resultTeachDisplay,beginStyle:this.state.beginStyle,brr:this.state.brr,crr:this.state.crr,initArr:this.state.initArr,afterArray:this.state.afterArray,afterArrayA:this.state.afterArrayA,afterArrayB:this.state.afterArrayB,afterArrayC:this.state.afterArrayC,afterArrayD:this.state.afterArrayD,afterArrayE:this.state.afterArrayE,afterArrayF:this.state.afterArrayF,afterArrayG:this.state.afterArrayG,afterArrayH:this.state.afterArrayH,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,idA:this.state.idA,idB:this.state.idB,idC:this.state.idC,idD:this.state.idD,idE:this.state.idE,idF:this.state.idF,idG:this.state.idG,idH:this.state.idH,trueNum:this.state.trueNum,plusStyle:this.state.plusStyle,reduceStyle:this.state.plusStyle})}},{key:"answerTeachCloseHandel",value:function(){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){this.state.answerTeachWrapDiv="none",this.clearTeacherShowData();var e=!0,t=!1,a=void 0;try{for(var n,i=this.state.initArr[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.sel=!1,this.setState({initArr:this.state.initArr})}}catch(e){t=!0,a=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw a}}clearInterval(this.stop),this.state.allStudentChosseAnswer={},this.state.tableObject={},this.state.tableArry=[],document.getElementById("result-teach-mytime").textContent="00:00:00",this.state.round=!1,this.state.plusStyle="#368bcb",this.state.reduceStyle="#368bcb",this.state.endQuestion="block",this.state.restartQuestion="none",this.state.crr=[],this.state.trueSelect="",this.state.beginStyle="",this.state.trueLV=0,this.state.allNumbers=0,this.state.initArr=[{id:0,name:"A",sel:!1},{id:1,name:"B",sel:!1},{id:2,name:"C",sel:!1},{id:3,name:"D",sel:!1}],this.state.isPublished=!1,this.state.publishAnswerText=g.default.language.languageData.answers.PublishTheAnswer.text,this.state.publishedWarning="none",this.setState({publishedWarning:this.state.publishedWarning,publishAnswerText:this.state.publishAnswerText,isPublished:this.state.isPublished,tableObject:this.state.tableObject,tableArry:this.state.tableArry,allStudentChosseAnswer:this.state.allStudentChosseAnswer,answerTeachWrapDiv:this.state.answerTeachWrapDiv,initArr:this.state.initArr,beginStyle:this.state.beginStyle,plusStyle:this.state.plusStyle,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,reduceStyle:this.state.plusStyle,crr:this.state.crr,trueSelect:this.state.trueSelect,endQuestion:this.state.endQuestion,restartQuestion:this.state.restartQuestion,round:this.state.round});var s={answerClose:"none"},l=!0;C.default.sendSignallingAnswerToStudent(s,l);var d=this.props.id;this.state[d].left=0,this.state[d].top=0,this.setState(r({},d,this.state[d]))}}},{key:"resultTeachCloseHandel",value:function(){if(f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){this.clearTeacherShowData(),clearInterval(this.stop),this.state.round=!1,this.state.allStudentChosseAnswer={},this.state.tableObject={},this.state.tableArry=[],this.state.isPublished=!1,document.getElementById("result-teach-mytime").textContent="00:00:00",this.state.plusStyle="#368bcb",this.state.reduceStyle="#368bcb",this.state.resultTeachDisplay="none",this.state.endQuestion="block",this.state.restartQuestion="none",this.state.crr=[],this.state.trueSelect="",this.state.trueLV=0,this.state.allNumbers=0,this.state.publishAnswerText=g.default.language.languageData.answers.PublishTheAnswer.text,this.state.publishedWarning="none",this.setState({publishedWarning:this.state.publishedWarning,isPublished:this.state.isPublished,publishAnswerText:this.state.publishAnswerText,tableObject:this.state.tableObject,tableArry:this.state.tableArry,allStudentChosseAnswer:this.state.allStudentChosseAnswer,resultTeachDisplay:this.state.resultTeachDisplay,plusStyle:this.state.plusStyle,round:this.state.round,trueLV:this.state.trueLV,allNumbers:this.state.allNumbers,reduceStyle:this.state.plusStyle,crr:this.state.crr,trueSelect:this.state.trueSelect,endQuestion:this.state.endQuestion,restartQuestion:this.state.restartQuestion});var e={answerClose:"none"},t=!0;C.default.sendSignallingAnswerToStudent(e,t);var a=this.props.id;this.state[a].left=0,this.state[a].top=0,this.setState(r({},a,this.state[a]))}}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=g.default.windowInnerWidth/f.default.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=g.default.windowInnerWidth/f.default.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=b.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;if(a.state[n].offsetX=0,a.state[n].offsetY=0,f.default.hasRole.roleChairman||f.default.hasRole.roleTeachingAssistant){var r=a.state[n],i=r.left,o=r.top,s=b.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;a[n]={percentLeft:l,percentTop:d};var c={percentLeft:a[n].percentLeft,percentTop:a[n].percentTop,isDrag:!0};C.default.sendSignallingFromAnswerDrag(c)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.initArr,n=(t.brr,t.tableObject),r=this.props.id,i=this._loadTimeDescArray(a),o=i.beforeArray,s=this._loadTableDescArray(n),l=s.afterArry,d={onStart:e.handlerOnStartDrag.bind(e),onDrag:e.handlerOnDragging.bind(e),onStop:e.handlerOnStopDrag.bind(e)},c={position:"absolute",zIndex:110,display:"inline-block",left:this.state[r].left+"rem",top:this.state[r].top+"rem",transitionProperty:this.isHasTransition?"left,top":void 0,transitionDuration:this.isHasTransition?"0.4s":void 0};return u.default.createElement(_.DraggableCore,d,u.default.createElement("div",{id:"answerDrag",style:c},u.default.createElement("div",{className:"answer-teach-wrapDiv",style:{display:this.state.answerTeachWrapDiv},ref:"dragBox"},u.default.createElement("div",{className:"answer-teach-header"},u.default.createElement("div",{className:"answer-teach-header-left"},u.default.createElement("span",{className:"answer-teach-headerImg"}),u.default.createElement("span",{className:"answer-teach-header-left-grey"},g.default.language.languageData.answers.headerTopLeft.text),u.default.createElement("span",{className:"answer-teach-header-left-green"},g.default.language.languageData.answers.headerMiddel.text)),u.default.createElement("div",{className:"answer-teach-header-right",onClick:this.answerTeachCloseHandel.bind(this)})),u.default.createElement("div",{className:"answer-teach-content"},u.default.createElement("ul",{className:"answer-teach-optionUl"},o),u.default.createElement("div",{className:"answer-teach-add",ref:"addDiv",onClick:this.addHandel.bind(this),style:{background:this.state.plusStyle}},"+"),u.default.createElement("div",{className:"answer-teach-reduce",ref:"reduceDiv",onClick:this.reduceHandel.bind(this),style:{background:this.state.reduceStyle}},"-"),u.default.createElement("div",{className:"answer-teach-begin",onClick:this.beginAnswer.bind(this),style:{background:this.state.beginStyle}},g.default.language.languageData.answers.beginAnswer.text))),u.default.createElement("div",{className:"result-teach-wrapDiv",style:{display:this.state.resultTeachDisplay},ref:"resultRef"},u.default.createElement("div",{className:"result-teach-header"},u.default.createElement("div",{className:"result-teach-header-left"},u.default.createElement("span",{className:"result-teach-headerImg"}),u.default.createElement("span",{className:"result-teach-header-left-grey"},g.default.language.languageData.answers.headerTopLeft.text),u.default.createElement("span",{id:"result-teach-mytime"})),u.default.createElement("p",{className:"result-teach-close",onClick:this.resultTeachCloseHandel.bind(this),style:{display:this.state.resultTeachStyleDisplay}})),u.default.createElement("div",{className:"result-teach-content"},u.default.createElement("p",{className:"answersPeople"},g.default.language.languageData.answers.numberOfAnswer.text,":",u.default.createElement("span",{ref:"anss"},this.state.allNumbers),u.default.createElement("span",{className:"xiang-qing-div",onClick:this.xiangQingHandel.bind(this)},"(",this.state.xiangQingText,")")),u.default.createElement("span",{className:"result-teach-accuracy-right"},u.default.createElement("span",{className:"result-teach-accuracy-right-text"},g.default.language.languageData.answers.tureAccuracy.text,"："),u.default.createElement("span",{style:{color:"red"}},this.state.trueLV,"%")),u.default.createElement("div",{className:"result-teach-coordinate-div",style:{display:this.state.columnar}},u.default.createElement("span",{className:"result-teach-heart-span"},"0"),u.default.createElement("div",{className:"result-teach-staff-div"},u.default.createElement("ul",{className:"result-student-allResult"},this.state.allResult)),u.default.createElement("ul",{className:"result-teach-allResult"},this.state.allResultX)),u.default.createElement("div",{className:"answer-table-div",style:{display:this.state.tableStyle}},u.default.createElement("table",{className:"answer-table"},u.default.createElement("tbody",null,u.default.createElement("tr",{className:"answer-table-first-tr"},u.default.createElement("th",null,g.default.language.languageData.answers.student.text),u.default.createElement("th",null,g.default.language.languageData.answers.TheSelectedTheAnswer.text),u.default.createElement("th",null,g.default.language.languageData.answers.AnswerTime.text)),l))),u.default.createElement("div",{className:"result-teach-true-result"},u.default.createElement("span",{style:{color:"white"}},g.default.language.languageData.answers.trueAnswer.text,":"),u.default.createElement("span",{className:"result-teach-trueSelect"},this.state.trueSelect),u.default.createElement("span",{className:"result-teach-published-warning",style:{display:this.state.publishedWarning}},g.default.language.languageData.answers.end.text),u.default.createElement("span",{className:"publish-the-answer",onClick:this.publishAnswerHandel.bind(this),style:{background:this.state.publishedWarningColor,display:"none"}},this.state.publishAnswerText)),u.default.createElement("div",{className:"result-teach-end-question",style:{display:this.state.endQuestion},onClick:this.endHandel.bind(this)},g.default.language.languageData.answers.endAnswer.text),u.default.createElement("div",{className:"result-teach-restart-question",style:{display:this.state.restartQuestion},onClick:this.restartHandel.bind(this)},g.default.language.languageData.answers.restarting.text))),u.default.createElement(D.default,null)))}}]),t}(u.default.Component));t.default=A,e.exports=t.default},263:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(12),h=n(u),p=a(18),g=n(p),m=a(10),f=n(m),v=a(24),b=n(v),y=a(19),S=n(y),T=a(56),k=(n(T),function(e){function t(e){var a;i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props.id;this.state=(a={dialTeachComponentBgDisplay:"none",dialIconClose:!1,turnTableDeg:"rotate(0)",dialShow:!1,deg:50,numdeg:0,num:0,isClick:!1},r(a,n,{left:4.4,top:0,offsetX:0,offsetY:0}),r(a,"msgDeg",!1),a),this[n]={},this.isHasTransition=!1,this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;f.default.Window.addEventListener(g.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("receive-msglist-dial",e.handlerMsglistDialShow.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,e.handlerroomUserpropertyChanged.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("receive-msglist-DialDrag",e.handlerMsglistDialDrag.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;f.default.Window.removeBackupListerner(e.listernerBackupid),f.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;S.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"componentDidUpdate",value:function(){1==this.isHasTransition&&(this.isHasTransition=!1)}},{key:"handlerroomUserpropertyChanged",value:function(e){var t=e.message,a=(e.user,!0),n=!1,r=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0)i.value}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"handlerMsglistDialShow",value:function(e){var t=this;this.state.msgDeg=!0,this.setState({msgDeg:this.state.msgDeg});var a=!0,n=!1,r=void 0;try{for(var i,o=e.message.dialShowArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;g.default.hasRole.roleChairman||g.default.hasRole.roleTeachingAssistant||g.default.hasRole.rolePatrol?s.data.isShow?(t.state.turnTableDeg="rotate(0)",t.state.dialTeachComponentBgDisplay="block",t.state.dialIconClose=!0,t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose})):(t.state.dialTeachComponentBgDisplay="block",t.state.turnTableDeg=s.data.rotationAngle,t.state.dialIconClose=!0,t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose,isClick:t.state.isClick})):s.data.isShow?(t.state.turnTableDeg="rotate(0)",t.state.dialIconClose=!1,t.state.dialTeachComponentBgDisplay="block",t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose})):(t.state.dialTeachComponentBgDisplay="block",t.state.turnTableDeg=s.data.rotationAngle,t.state.dialIconClose=!1,t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose}))}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"handlerMsglistDialDrag",value:function(e){var t=this,a=e.message.DialDragArray,n=this,i=n.props.id;a.map(function(e,a){var o=e.data,s=o.percentLeft,l=o.percentTop;t[i]={percentLeft:s,percentTop:l},S.default.percentageChangeToRem(n,s,l,i),n.setState(r({},i,n.state[i]))})}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"dial":t.handlerDisplayTeachTool(a);break;case"DialDrag":var n=t.props.id;this.isHasTransition=!0;var i=a.data,o=i.percentLeft,s=i.percentTop;this[n]={percentLeft:o,percentTop:s},S.default.percentageChangeToRem(t,o,s,n),this.setState(r({},n,this.state[n]))}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"dial":var n=this.props.id;t.state.dialTeachComponentBgDisplay="none",t.state.num=0,t.state.numdeg=0,t.state.deg=50,t.state[n].left=4.4,t.state[n].top=0,t.setState(r({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,num:t.state.num,numdeg:t.state.numdeg,deg:t.state.deg},n,t.state[n]));break;case"ClassBegin":t.state.dialTeachComponentBgDisplay="none",t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay})}}},{key:"handlerDisplayTeachTool",value:function(e){var t=this;g.default.hasRole.roleChairman||g.default.hasRole.roleTeachingAssistant||g.default.hasRole.rolePatrol?e.data.isShow?(t.state.dialTeachComponentBgDisplay="block",t.state.dialIconClose=!0,
t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose})):(t.state.dialTeachComponentBgDisplay="block",t.state.turnTableDeg=e.data.rotationAngle,t.state.dialIconClose=!1,t.state.msgDeg=!1,t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose,msgDeg:t.state.msgDeg}),setTimeout(function(){t.state.dialIconClose=!0,t.state.isClick=!1,t.setState({dialIconClose:t.state.dialIconClose,isClick:t.state.isClick})},4e3)):e.data.isShow?(t.state.turnTableDeg="rotate(0)",t.state.dialIconClose=!1,t.state.dialTeachComponentBgDisplay="block",t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose})):(t.state.dialTeachComponentBgDisplay="block",t.state.turnTableDeg=e.data.rotationAngle,t.state.dialIconClose=!1,t.setState({dialTeachComponentBgDisplay:t.state.dialTeachComponentBgDisplay,turnTableDeg:t.state.turnTableDeg,dialIconClose:t.state.dialIconClose}))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!h.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");var e=this;e.setState({dialTeachComponentBgDisplay:"none",dialIconClose:!1,turnTableDeg:"rotate(0)",dialShow:!1})}},{key:"opointer",value:function(e){if(g.default.hasRole.roleStudent||this.state.isClick===!0||g.default.hasRole.rolePatrol)return!1;if(this.state.isClick)return!1;this.state.msgDeg&&(this.state.turnTableDeg="rotate(0)"),this.state.msgDeg=!1,this.state.isClick=!0,this.state.dialShow=!1;var t=Math.floor(5*Math.random()+1);this.state.num=t+this.state.num,this.state.numdeg+=t*this.state.deg+360*Math.floor(2*Math.random()+3),90!=this.state.numdeg.toString().substr(-2)&&30!=this.state.numdeg.toString().substr(-2)&&10!=this.state.numdeg.toString().substr(-2)&&50!=this.state.numdeg.toString().substr(-2)&&70!=this.state.numdeg.toString().substr(-2)||(this.state.numdeg=this.state.numdeg+30),this.setState({dialShow:this.state.dialShow,num:this.state.num,numdeg:this.state.numdeg,deg:this.state.deg,isClick:this.state.isClick,msgDeg:this.state.msgDeg});var a=this.state.dialShow,n={rotationAngle:"rotate("+this.state.numdeg+"deg)",isShow:a};b.default.sendSignallingDialToStudent(n)}},{key:"dialClosePHandle",value:function(){if(g.default.hasRole.roleChairman||g.default.hasRole.roleTeachingAssistant){this.state.num=0,this.state.numdeg=0,this.state.deg=50,this.state.turnTableDeg="rotate(0)",this.state.dialTeachComponentBgDisplay="none",this.setState({dialTeachComponentBgDisplay:this.state.dialTeachComponentBgDisplay,turnTableDeg:this.state.turnTableDeg,num:this.state.num,numdeg:this.state.numdeg,deg:this.state.deg});var e={dialClose:"none"},t=!0;b.default.sendSignallingDialToStudent(e,t),this.state.studentNameArr=[],this.setState({studentNameArr:this.state.studentNameArr});var a=this.props.id;this.state[a].left=4.4,this.state[a].top=0,this.setState(r({},a,this.state[a]))}}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=h.default.windowInnerWidth/g.default.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=h.default.windowInnerWidth/g.default.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=S.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;if(a.state[n].offsetX=0,a.state[n].offsetY=0,g.default.hasRole.roleChairman||g.default.hasRole.roleTeachingAssistant){var r=a.state[n],i=r.left,o=r.top,s=S.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;a[n]={percentLeft:l,percentTop:d};var c={percentLeft:a[n].percentLeft,percentTop:a[n].percentTop,isDrag:!0};b.default.sendSignallingFromDialDrag(c)}}},{key:"render",value:function(){var e=this,t=(this.state.studentNameArr,this.props),a=(t.getItem,t.id),n={onStart:e.handlerOnStartDrag.bind(e),onDrag:e.handlerOnDragging.bind(e),onStop:e.handlerOnStopDrag.bind(e)},r={position:"absolute",zIndex:110,display:this.state.dialTeachComponentBgDisplay,width:g.default.hasRole.roleStudent?"3rem":"3.2rem",height:g.default.hasRole.roleStudent?"3rem":"3.4rem",transitionProperty:this.isHasTransition?"left,top":void 0,transitionDuration:this.isHasTransition?"0.4s":void 0,left:this.state[a].left+"rem",top:this.state[a].top+"rem"};return c.default.createElement(T.DraggableCore,n,c.default.createElement("div",{id:"dialDrag",style:r},c.default.createElement("div",{className:"dial-teachComponent-bg",ref:"dialTeachComponentBg",style:{display:this.state.dialTeachComponentBgDisplay,top:g.default.hasRole.roleStudent?"0":"0.4rem"}},c.default.createElement("button",{alt:"pointer",style:{backgroundColor:this.state.a},className:"dial-teachComponent-pointer-button",onClick:this.opointer.bind(this)}),c.default.createElement("div",{className:"dial-teachComponent-turntable",ref:"turnTable",style:{transition:"transform 4s ease",transform:this.state.turnTableDeg}}),c.default.createElement("div",{className:"dialCloseP",onClick:this.dialClosePHandle.bind(this),style:{display:this.state.dialIconClose?"block":"none"}}))))}}]),t}(c.default.Component));t.default=k,e.exports=t.default},264:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(36),h=(n(u),a(12)),p=n(h),g=a(18),m=(n(g),n(g)),f=a(19),v=n(f),b=a(10),y=n(b),S=a(20),T=(n(S),a(22)),k=n(T),w=a(24),C=n(w),P=a(56),D=(n(P),function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var a=this.props.id;this.state=r({responderStudentIsShow:"none",responderTop:"",responderLeft:"",timesRun:3,studentText:"",userName:null,isClick:!1,userSort:{},userArry:[],translateMove:null},a,{left:4.4,top:0,offsetX:0,offsetY:0}),this.intervals=void 0,this.getUserPublishState=null,this.timeOutIntervals=void 0,this.isHasTransition=!1,this[a]={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomUserpropertyChanged,e.handlerRoomUserpropertyChanged.bind(e),e.listernerBackupid),y.default.Window.addEventListener(m.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-QiangDaZhe",e.handlerMsglistQiangDaZhe.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;y.default.Window.removeBackupListerner(e.listernerBackupid),y.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;v.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"componentDidUpdate",value:function(){this.isHasTransition===!0&&(this.isHasTransition=!1)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(k.default.getTkRoom().getMySelf(),a.name){case"qiangDaQi":m.default.hasRole.roleStudent&&this.getUserPublishState>0&&t._teacherRecevedServiceQiangDaQiData(a);break;case"QiangDaZhe":m.default.hasRole.roleStudent&&t._teacherRecevedServiceQiangDaZheData(a);break;case"ResponderDrag":var n=t.props.id;this.isHasTransition=!0;var i=a.data,o=i.percentLeft,s=i.percentTop;this[n]={percentLeft:o,percentTop:s},v.default.percentageChangeToRem(t,o,s,n),this.setState(r({},n,this.state[n]))}}},{key:"handlerRoomDelmsg",value:function(e){var t,a=this,n=e.message;switch(n.name){case"ClassBegin":a.state.responderStudentIsShow="none",a.setState({responderStudentIsShow:a.state.responderStudentIsShow});break;case"qiangDaQi":var i=this.props.id;n.data.isShow===!1&&(this.state[i].left=4.4,this.state[i].top=0),a.state.responderStudentIsShow="none",a.state.isClick=!1,a.state.timesRun=3,a.state.userArry=[],a.state.userSort={},a.state.studentText=a.state.timesRun,a.setState((t={},r(t,i,this.state[i]),r(t,"userArry",a.state.userArry),r(t,"userSort",a.state.userSort),r(t,"responderStudentIsShow",a.state.responderStudentIsShow),r(t,"isClick",a.state.isClick),r(t,"timesRun",a.state.timesRun),r(t,"studentText",a.state.studentText),t))}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=k.default.getTkRoom().getMySelf();t.id===e.user.id&&void 0!=e.message.publishstate&&(this.getUserPublishState=e.message.publishstate)}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=this,a=(k.default.getTkRoom().getMySelf(),!0),n=!1,r=void 0;try{for(var i,o=e.message.qiangDaQiArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;m.default.hasRole.roleStudent&&this.getUserPublishState>0&&t._teacherRecevedServiceQiangDaQiData(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"handlerMsglistQiangDaZhe",value:function(e){var t=this,a=!0,n=!1,r=void 0;try{for(var i,o=e.message.QiangDaZheArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;m.default.hasRole.roleStudent&&t._teacherRecevedServiceQiangDaZheData(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_teacherRecevedServiceQiangDaQiData",value:function(e){var t=this,a=t.props.id,n=p.default.serviceTime/1e3-e.ts;if(e.data.begin){if(t.state.responderStudentIsShow="block",n>=8){if(t.state.studentText=p.default.language.languageData.responder.noContest.text,0!==Object.keys(t[a]).length){var i=t[a],o=i.percentLeft,s=i.percentTop;v.default.percentageChangeToRem(t,o,s,a)}else t.state[a].left=4.4,t.state[a].top=0;t.setState(r({studentText:t.state.studentText},a,this.state[a]))}else t.intervals=setInterval(function(){var e;t.state.timesRun-=1,0===t.state.timesRun?v.default.percentageChangeToRem(t,.2,.2,a):1===t.state.timesRun?v.default.percentageChangeToRem(t,.4,.6,a):2===t.state.timesRun&&v.default.percentageChangeToRem(t,.7,.2,a),t.state.studentText=t.state.timesRun,t.setState((e={},r(e,a,t.state[a]),r(e,"timesRun",t.state.timesRun),r(e,"studentText",t.state.studentText),e)),t.state.timesRun<=0&&(clearInterval(t.intervals),t.state.studentText=p.default.language.languageData.responder.answer.text,t.setState({studentText:t.state.studentText}),0==t.state.isClick&&(t.timeOutIntervals=setTimeout(function(){if(t.isHasTransition=!0,t.state.studentText=p.default.language.languageData.responder.noContest.text,0!==Object.keys(t[a]).length){var e=t[a],n=e.percentLeft,i=e.percentTop;v.default.percentageChangeToRem(t,n,i,a)}else t.state[a].left=4.4,t.state[a].top=0;t.setState(r({studentText:t.state.studentText},a,t.state[a]))},4500)))},1e3);t.setState({responderStudentIsShow:t.state.responderStudentIsShow})}else e.data.isShow&&(t.state.timesRun=3,t.state.responderStudentIsShow="none",t.state.studentText=3,t.setState({timesRun:t.state.timesRun,responderStudentIsShow:t.state.responderStudentIsShow,studentText:t.state.studentText}))}},{key:"_teacherRecevedServiceQiangDaZheData",value:function(e){var t=this,a=t.props.id;if(e.data.isClick){var n;t.state.userSort[e.fromID]={},t.state.userSort[e.fromID][e.seq]=e.data.userAdmin,t.setState({userSort:t.state.userSort}),t.state.userArry=[];for(var i in t.state.userSort)for(var o in t.state.userSort[i])t.state.userArry.push(o),t.state.userArry=t.state.userArry.sort(),t.setState({userArry:t.state.userArry}),void 0!=t.state.userSort[i][t.state.userArry[0]]&&(t.state.studentText=t.state.userSort[i][t.state.userArry[0]],t.setState({studentText:t.state.studentText,firstUser:t.state.firstUser}));if(clearInterval(t.intervals),clearTimeout(t.timeOutIntervals),0!==Object.keys(t[a]).length){var s=t[a],l=s.percentLeft,d=s.percentTop;v.default.percentageChangeToRem(t,l,d,a)}else t.state[a].left=4.4,t.state[a].top=0;t.isHasTransition=!0,t.setState((n={},r(n,a,this.state[a]),r(n,"studentText",t.state.studentText),n))}}},{key:"studentResponder",value:function(){var e=k.default.getTkRoom().getMySelf();if(this.getUserPublishState>0&&m.default.hasRole.roleStudent&&this.state.studentText==p.default.language.languageData.responder.answer.text&&0==this.state.isClick){this.state.userAdmin=e.nickname,this.setState({userAdmin:this.state.userAdmin}),this.state.isClick=!0,this.setState({isClick:this.state.isClick});var t=this.state.userAdmin,a=this.state.isClick,n={userAdmin:t,isClick:a},r=!1;C.default.sendSignallingQiangDaZhe(r,n)}}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=v.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;a.state[n].offsetX=0,a.state[n].offsetY=0}},{key:"render",value:function(){var e=this,t=e.props.id,a={onStart:e.handlerOnStartDrag.bind(e),onDrag:e.handlerOnDragging.bind(e),onStop:e.handlerOnStopDrag.bind(e)},n={display:this.state.responderStudentIsShow,left:this.state[t].left+"rem",top:this.state[t].top+"rem",transitionProperty:this.isHasTransition?"left,top":void 0,transitionDuration:this.isHasTransition?"0.5s":void 0};return c.default.createElement(P.DraggableCore,a,c.default.createElement("div",{className:"responder-circle-student",id:t,style:n},c.default.createElement("div",{className:"responder-black-circle-student"}),c.default.createElement("div",{className:"responder-begin-circle-student "+("number"==typeof this.state.studentText?"disabled":""),onClick:this.studentResponder.bind(this)},this.state.studentText)))}}]),t}(c.default.Component));t.default=D,e.exports=t.default},265:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(36),h=(n(u),a(12)),p=n(h),g=a(18),m=(n(g),n(g)),f=a(19),v=n(f),b=a(10),y=n(b),S=a(20),T=(n(S),a(22)),k=(n(T),a(24)),w=n(k),C=a(56),P=(n(C),function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var a=this.props.id;this.state=r({responderIsShow:"none",closeImg:"none",restartImg:"none",startAngle:-(.5*Math.PI),tmpAngle:-(.5*Math.PI),answerText:p.default.language.languageData.responder.begin.text,responderShow:!1,beginIsStatus:!1,studentRes:!1,userAdmin:"",firstUser:!1,userSort:{},userArry:[],teacherTimeOut:null,beginTimeOut:null},a,{left:4.4,top:0,offsetX:0,offsetY:0}),this[a]={},this.isHasTransition=!1,this.stop=void 0,this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.mH=300,this.mW=300,this.r=this.mW/2,this.cR=this.r-10,this.endAngle=this.startAngle+2*Math.PI,this.xAngle=1*(Math.PI/180),this.fontSize=35,this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;y.default.Window.addEventListener(m.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("responderShow",e.responderShow.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-qiangDaQi",e.handlerMsglistQiangDaQi.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-QiangDaZhe",e.handlerMsglistQiangDaZhe.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;y.default.Window.removeBackupListerner(e.listernerBackupid),y.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;v.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"componentDidUpdate",value:function(){1==this.isHasTransition&&(this.isHasTransition=!1)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"qiangDaQi":(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t._teacherRecevedServiceQiangDaQiData(a);break;case"QiangDaZhe":(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t._teacherRecevedServiceQiangDaZheData(a);break;case"ResponderDrag":var n=t.props.id;this.isHasTransition=!0;var i=a.data,o=i.percentLeft,s=i.percentTop;this[n]={percentLeft:o,percentTop:s},v.default.percentageChangeToRem(t,o,s,n),this.setState(r({},n,this.state[n]))}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t.state.responderIsShow="none",t.setState({responderIsShow:t.state.responderIsShow});break;case"qiangDaQi":if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol){a.data.isShow?(t.state.responderIsShow="block",clearTimeout(t.state.teacherTimeOut),window.cancelAnimationFrame(t.state.stop),t.state.beginIsStatus=!1,t.state.firstUser=!1,t.state.userSort={},t.state.userArry=[],t.setState({teacherTimeOut:t.state.teacherTimeOut,responderIsShow:t.state.responderIsShow,beginIsStatus:t.state.beginIsStatus,firstUser:t.state.firstUser,userSort:t.state.userSort,userArry:t.state.userArry})):(t.state.responderIsShow="none",t.state.teacherTimeOut="",t.setState({teacherTimeOut:t.state.teacherTimeOut,responderIsShow:t.state.responderIsShow}));break}}}},{key:"handlerMsglistQiangDaQi",value:function(e){var t=this,a=!0,n=!1,r=void 0;try{for(var i,o=e.message.qiangDaQiArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t._teacherRecevedServiceQiangDaQiData(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"handlerMsglistQiangDaZhe",value:function(e){var t=this,a=!0,n=!1,r=void 0;try{for(var i,o=e.message.QiangDaZheArr[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t._teacherRecevedServiceQiangDaZheData(s)}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_teacherRecevedServiceQiangDaQiData",value:function(e){var t=this,a=p.default.serviceTime/1e3-e.ts;if(e.data.isShow){t.state.responderIsShow="block",t.state.closeImg="block",t.state.restartImg="none",t.state.answerText=p.default.language.languageData.responder.begin.text;var n=document.getElementById("myCanvas");n.style.display="block",t.setState({responderIsShow:t.state.responderIsShow,closeImg:t.state.closeImg,restartImg:t.state.restartImg,answerText:t.state.answerText}),clearTimeout(t.state.teacherTimeOut),e.data.begin&&(a>=8?(clearTimeout(t.state.teacherTimeOut),t.state.closeImg="block",t.state.restartImg="block",t.state.responderIsShow="block",0==t.state.firstUser?(t.clearCanvasData(),t.state.answerText=p.default.language.languageData.responder.noContest.text,t.setState({answerText:t.state.answerText})):(t.state.answerText=t.state.answerText,t.setState({answerText:t.state.answerText})),t.setState({answerText:t.state.answerText,closeImg:t.state.closeImg,restartImg:t.state.restartImg,responderIsShow:t.state.responderIsShow})):(t.canvasDraw(),t.state.closeImg="none",t.state.beginIsStatus=e.data.begin,t.state.answerText=p.default.language.languageData.responder.inAnswer.text,t.setState({beginIsStatus:t.state.beginIsStatus,closeImg:t.state.closeImg,answerText:t.state.answerText}),t.state.teacherTimeOut=setTimeout(function(){t.state.closeImg="block",t.state.restartImg="block",t.state.responderIsShow="block",0==t.state.firstUser?(t.clearCanvasData(),t.state.answerText=p.default.language.languageData.responder.noContest.text,t.setState({answerText:t.state.answerText})):(t.state.answerText=t.state.answerText,t.setState({answerText:t.state.answerText})),t.setState({teacherTimeOut:t.state.teacherTimeOut,answerText:t.state.answerText,closeImg:t.state.closeImg,restartImg:t.state.restartImg,responderIsShow:t.state.responderIsShow,beginIsStatus:t.state.beginIsStatus})},8e3)))}}},{key:"_teacherRecevedServiceQiangDaZheData",value:function(e){var t=this;if(e.data.isClick){clearTimeout(t.state.teacherTimeOut),t.clearCanvasData(),t.state.closeImg="block",t.state.restartImg="block",t.state.userSort[e.fromID]={},t.state.userSort[e.fromID][e.seq]=e.data.userAdmin,t.setState({userSort:t.state.userSort}),t.state.userArry=[];for(var a in t.state.userSort)for(var n in t.state.userSort[a])t.state.userArry.push(n),t.state.userArry=t.state.userArry.sort(),t.setState({userArry:t.state.userArry}),void 0!=t.state.userSort[a][t.state.userArry[0]]&&(t.state.answerText=t.state.userSort[a][t.state.userArry[0]],t.setState({answerText:t.state.answerText,firstUser:t.state.firstUser}));t.state.firstUser=!0,t.setState({firstUser:t.state.firstUser})}else t.state.firstUser=!1,t.setState({firstUser:t.state.firstUser})}},{key:"responderShow",value:function(e){var t=this;if("responder-implement-bg"==e.className&&"none"==t.state.responderIsShow){var a=document.getElementById("myCanvas");a.style.display="block",t.state.responderIsShow="block",t.state.closeImg="block",t.setState({responderIsShow:t.state.responderIsShow,closeImg:t.state.closeImg})}}},{key:"canvasDraw",value:function(){window.cancelAnimationFrame(this.state.stop);var e=this;e.c=document.getElementById("myCanvas"),e.ctx=e.c.getContext("2d"),e.c.width=300,e.c.height=300,e.ctx.clearRect(0,0,300,300),e.state.tmpAngle>=e.endAngle||(e.state.tmpAngle+e.xAngle>e.endAngle?e.state.tmpAngle=e.endAngle:e.state.tmpAngle+=e.xAngle,e.ctx.clearRect(0,0,e.mW,e.mH),e.ctx.beginPath(),e.ctx.lineWidth=9,e.ctx.strokeStyle="#1e2b49",e.ctx.arc(e.r,e.r,e.cR,e.state.startAngle,e.state.tmpAngle),e.ctx.stroke(),e.ctx.closePath(),e.stop=requestAnimationFrame(e.canvasDraw.bind(e)))}},{key:"beginResponder",value:function(){var e=this;if((m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant)&&0==this.state.beginIsStatus){this.canvasDraw(),this.state.responderShow=!0,this.state.beginIsStatus=!0,clearTimeout(this.state.beginTimeOut),this.state.beginTimeOut=setTimeout(function(){e.state.closeImg="block",e.state.restartImg="block",e.setState({closeImg:e.state.closeImg,restartImg:e.state.restartImg}),0==e.state.firstUser&&(e.state.answerText=p.default.language.languageData.responder.noContest.text,e.setState({answerText:e.state.answerText}));var t=document.getElementById("myCanvas");t.style.display="none"},8e3);var t=this.state.responderShow,a=this.state.beginIsStatus,n=this.state.userAdmin,r={isShow:t,begin:a,userAdmin:n},i=!1;w.default.sendSignallingQiangDaQi(i,r),this.state.answerText=p.default.language.languageData.responder.inAnswer.text,this.setState({answerText:this.state.answerText,responderShow:this.state.responderShow,beginTimeOut:this.state.beginTimeOut})}}},{key:"closeResponder",value:function(){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){var e=this,t=document.getElementById("myCanvas");t.style.display="none",e.state.responderIsShow="none",e.state.beginIsStatus=!1,e.state.responderShow=!1,e.state.userSort={},e.state.userArry=[],e.state.closeImg="none",e.state.restartImg="none",e.state.answerText=p.default.language.languageData.responder.begin.text,e.setState({closeImg:e.state.closeImg,restartImg:e.state.restartImg,answerText:e.state.answerText,responderIsShow:e.state.responderIsShow,beginIsStatus:e.state.beginIsStatus,responderShow:e.state.responderShow});var a={isShow:!1},n=!0;w.default.sendSignallingQiangDaQi(n,a),e.clearCanvasData();var i=this.props.id;this.state[i].left=4.4,this.state[i].top=0,this.setState(r({},i,this.state[i]))}}},{key:"restartResponder",value:function(){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){this.clearCanvasData();var e=document.getElementById("myCanvas");e.style.display="block",this.state.closeImg="none",this.state.restartImg="none",this.state.answerText=p.default.language.languageData.responder.begin.text,this.state.beginIsStatus=!1,this.state.responderShow=!0,this.state.firstUser=!1,this.state.userSort={},this.state.userArry=[],this.setState({firstUser:this.state.firstUser,responderShow:this.state.responderShow,beginIsStatus:this.state.beginIsStatus,userSort:this.state.userSort,userArry:this.state.userArry});var t=this.state.responderShow,a=this.state.beginIsStatus,n=this.state.userAdmin,r={isShow:t,begin:a,userAdmin:n},i=!0;w.default.sendSignallingQiangDaQi(i,r),i=!1,w.default.sendSignallingQiangDaQi(i,r),this.setState({beginIsStatus:this.state.beginIsStatus,startAngle:this.state.startAngle,tmpAngle:this.state.tmpAngle,closeImg:this.state.closeImg,restartImg:this.state.restartImg})}}},{key:"clearCanvasData",value:function(){var e=document.getElementById("myCanvas"),t=e.getContext("2d"),a=e.width=300,n=e.height=300;t.clearRect(0,0,a,n),window.cancelAnimationFrame(this.state.stop),this.state.startAngle=-(.5*Math.PI),this.endAngle=this.state.startAngle+2*Math.PI,this.xAngle=1*(Math.PI/180),this.fontSize=35,this.state.tmpAngle=this.state.startAngle}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=v.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;if(a.state[n].offsetX=0,a.state[n].offsetY=0,m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){var r=a.state[n],i=r.left,o=r.top,s=v.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;this[n]={percentLeft:l,percentTop:d};var c={percentLeft:a[n].percentLeft,percentTop:a[n].percentTop,isDrag:!0};w.default.sendSignallingFromResponderDrag(c)}}},{key:"render",value:function(){var e=this,t=e.props.id,a={onStart:e.handlerOnStartDrag.bind(e),onDrag:e.handlerOnDragging.bind(e),onStop:e.handlerOnStopDrag.bind(e)},n={position:"absolute",zIndex:110,display:this.state.responderIsShow,transitionProperty:this.isHasTransition?"left,top":void 0,transitionDuration:this.isHasTransition?"0.5s":void 0,left:this.state[t].left+"rem",top:this.state[t].top+"rem"};return c.default.createElement(C.DraggableCore,a,c.default.createElement("div",{id:t,className:"responder-circle",style:n},c.default.createElement("canvas",{id:"myCanvas"},p.default.language.languageData.responder.update.text),c.default.createElement("div",{className:"myCanvas-bg-div"}),c.default.createElement("div",{className:"responder-black-circle"}),c.default.createElement("div",{className:"responder-begin-circle "+(this.state.beginIsStatus?"disabled":""),onClick:this.beginResponder.bind(this)},this.state.answerText),c.default.createElement("div",{className:"responder-close-img",onClick:this.closeResponder.bind(this),style:{display:this.state.closeImg}},p.default.language.languageData.responder.close.text),c.default.createElement("div",{className:"responder-restart-img",onClick:this.restartResponder.bind(this),style:{display:this.state.restartImg}},p.default.language.languageData.responder.restart.text)))}}]),t}(c.default.Component));t.default=P,e.exports=t.default},266:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},l=a(2),d=n(l),c=a(36),u=(n(c),a(12)),h=n(u),p=a(18),g=n(p),m=a(19),f=(n(m),a(10)),v=n(f),b=a(20),y=n(b),S=a(22),T=(n(S),a(24)),k=(n(T),function(e){function t(e){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),
this.state={hoursDiv:"",secondsDiv:"",number:"",timeDescArray:[],triangleStyles:"",numContentBorder:"",timerTeachToolWrapDisplay:"none",studentInit:!1,startAndStop:!1,restarting:!1,startAndStopImg:"none",servicerTimes:"",ado:"none",backGroundTs:0,backGroundTrue:0,backGroundFalse:0,startTime:0},this.stop=null,this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),v.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),v.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),v.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid)}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"timer":g.default.hasRole.roleStudent&&t.handleTimerShow(a);break;case"UpdateTime":t.state.servicerTimes=a.ts,t.setState({servicerTimes:t.state.servicerTimes})}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"timer":clearInterval(t.stop),t.state.startAndStopImg="none",t.state.timeDescArray=[0,5,0,0],t.state.timerTeachToolWrapDisplay="none",t.setState({timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,startAndStopImg:t.state.startAndStopImg,timeDescArray:t.state.timeDescArray});break;case"ClassBegin":t.state.timerTeachToolWrapDisplay="none",t.setState({timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay})}}},{key:"handlerMsglistTimerShow",value:function(e){var t=this,a=e.message.timerShowArr[0];g.default.hasRole.roleStudent&&t.handleTimerShow(a)}},{key:"handleTimerShow",value:function(e){if(e.data.isShow)return!1;var t=this;setTimeout(function(){var a=0;a=t.state.servicerTimes<e.ts?0:t.state.servicerTimes-e.ts+1,t.state.timerTeachToolWrapDisplay="block",t.state.timeDescArray=e.data.sutdentTimerArry,t.setState({timeDescArray:t.state.timeDescArray,timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay});var n=600*t.state.timeDescArray[0]+60*t.state.timeDescArray[1]+10*t.state.timeDescArray[2]+1*t.state.timeDescArray[3],r=n-a;if(e.data.isStatus)if(clearInterval(t.stop),t.state.numContentBorder="black",t.state.startAndStopImg="none",t.setState({startAndStopImg:t.state.startAndStopImg,numContentBorder:t.state.numContentBorder}),t.stop=setInterval(t.timeReduce.bind(t),1e3),r>0){r>n&&(r=n);var i=parseInt(r/60)<10?"0"+parseInt(r/60):parseInt(r/60),o=parseInt(r%60)<10?"0"+parseInt(r%60):parseInt(r%60);t.state.timeDescArray[0]=i.substring(0,1),t.state.timeDescArray[1]=i.substring(1),t.state.timeDescArray[2]=parseInt(o/10),t.state.timeDescArray[3]=parseInt(o%10),t.setState({timeDescArray:t.state.timeDescArray})}else clearInterval(t.stop),t.state.timeDescArray[0]=0,t.state.timeDescArray[1]=0,t.state.timeDescArray[2]=0,t.state.timeDescArray[3]=0,t.state.numContentBorder="red",t.state.startAndStopImg="block",t.setState({timeDescArray:t.state.timeDescArray,numContentBorder:t.state.numContentBorder,startAndStopImg:t.state.startAndStopImg});else t.state.timeDescArray=e.data.sutdentTimerArry,t.setState({timeDescArray:t.state.timeDescArray}),t.state.startAndStopImg="block",t.state.numContentBorder="black",t.setState({startAndStopImg:t.state.startAndStopImg,numContentBorder:t.state.numContentBorder}),clearInterval(t.stop)},10)}},{key:"handlerInitAppPermissions",value:function(){this.state.studentInit=y.default.handler.getAppPermissions("studentInit"),this.setState({studentInit:this.state.studentInit}),0==this.state.studentInit&&(this.state.triangleStyles="hidden",this.state.againStuBtnStyle="none",this.state.startStuBtnStyle="none",this.state.startAndStopImg="none",this.setState({triangleStyle:this.state.triangleStyles,againStuBtnStyle:this.state.againStuBtnStyle,startStuBtnStyle:this.state.startStuBtnStyle,startAndStopImg:this.state.startAndStopImg}))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!h.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");var e=this;e.setState({hoursDiv:"",secondsDiv:"",number:"",timeDescArray:[],triangleStyles:"",numContentBorder:"",timerTeachToolWrapDisplay:"none",studentInit:!1,startAndStop:!1,restarting:!1,startAndStopImg:"none",servicerTimes:""}),this.stop=null}},{key:"_loadTimeDescArrays",value:function(e){var t=this,a=[],n=[];return e.forEach(function(e,r){var i=d.default.createElement("div",{className:"timer-teachTool-num-divs",key:r},d.default.createElement("div",{className:"timer-teachTool-triangle-tops",style:{visibility:t.state.triangleStyles}}),d.default.createElement("div",{className:"timer-teachTool-num-contents",style:{color:t.state.numContentBorder}},e),d.default.createElement("div",{className:"timer-teachTool-triangle-downs",style:{visibility:t.state.triangleStyles}}));r>1?n.push(i):a.push(i)}),{afterArrays:n,beforeArrays:a}}},{key:"timeReduce",value:function(){var e=this;e.state.timeDescArray[3]--,e.state.timeDescArray[3]<0&&(e.state.timeDescArray[3]=9,e.state.timeDescArray[2]--),e.state.timeDescArray[2]<0&&(e.state.timeDescArray[2]=5,e.state.timeDescArray[1]--),e.state.timeDescArray[1]<0&&(e.state.timeDescArray[1]=9,e.state.timeDescArray[0]--),e.state.timeDescArray[0]<0&&(e.state.timeDescArray=[0,0,0,0],e.state.numContentBorder="red",clearInterval(e.stop),e.playAudioToAudiooutput()),0==e.state.timeDescArray[0]&&0==e.state.timeDescArray[1]&&0==e.state.timeDescArray[2]&&0==e.state.timeDescArray[3]&&(e.state.timeDescArray=[0,0,0,0],e.playAudioToAudiooutput(),e.state.numContentBorder="red",clearInterval(e.stop)),e.setState({timeDescArray:e.state.timeDescArray,numContentBorder:e.state.numContentBorder})}},{key:"playAudioToAudiooutput",value:function(){var e=document.getElementById("ring_audio_student");e&&L.Utils.mediaPlay(e)}},{key:"render",value:function(){var e=this.state.timeDescArray,t=this._loadTimeDescArrays(e),a=t.afterArrays,n=t.beforeArrays;return d.default.createElement("div",{className:"timer-teachTool-wraps",style:{display:this.state.timerTeachToolWrapDisplay},ref:"timerTeachToolWrap"},d.default.createElement("div",{className:"timer-teachTool-headers"},d.default.createElement("span",null),d.default.createElement("span",null,h.default.language.languageData.timers.timerSetInterval.text),d.default.createElement("span",{className:"timer-teachTool-closeSpans"})),n,d.default.createElement("div",{className:"timer-teachTool-colons"},d.default.createElement("div",null),d.default.createElement("div",null)),a,d.default.createElement("div",{className:"stop-btn-Imgs",style:{display:this.state.startAndStopImg}}),d.default.createElement("audio",{id:"ring_audio_student",preload:"auto",src:"./music/ring.mp3?ts="+this.listernerBackupid,className:"audio-play"}))}}]),t}(d.default.Component));t.default=k,e.exports=t.default},267:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(36),h=(n(u),a(12)),p=n(h),g=a(18),m=n(g),f=a(19),v=n(f),b=a(10),y=n(b),S=a(20),T=n(S),k=a(22),w=(n(k),a(266)),C=n(w),P=a(24),D=n(P),_=a(56),A=(n(_),function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var a=this.props.id;this.state=r({hoursDiv:"",secondsDiv:"",number:"",timeDescArray:[0,5,0,0],triangleStyle:"",againBtnStyle:"",startBtnStyle:"",numContentBorder:"",timerTeachToolWrapDisplay:"none",timerStuStyle:"",restarting:!1,studentInit:!1,startAndStop:!1,startAndStopImg:"none",isShow:!1,againUnClickableStyle:"block"},a,{left:6.6,top:0,offsetX:0,offsetY:0}),this.stop=null,this.isHasTransition=!1,this[a]={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;y.default.Window.addEventListener(m.default.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("handleTurnShow",e.handleTurnShow.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-timer",e.handlerMsglistTimerShow.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener(m.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController,e.handlerRoomPlaybackClearAll.bind(e),e.listernerBackupid),y.default.CoreController.addEventListener("receive-msglist-TimerDrag",e.handlerMsglistTimerDrag.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;y.default.CoreController.removeBackupListerner(e.listernerBackupid),y.default.Window.removeBackupListerner(e.listernerBackupid)}},{key:"componentDidUpdate",value:function(){1==this.isHasTransition&&(this.isHasTransition=!1)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;v.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"timer":(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t.handleTimerShow(a);break;case"TimerDrag":var n=t.props.id;this.isHasTransition=!0;var i=a.data,o=i.percentLeft,s=i.percentTop;this[n]={percentLeft:o,percentTop:s},v.default.percentageChangeToRem(t,o,s,n),this.setState(r({},n,this.state[n]))}}},{key:"handlerRoomDelmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"ClassBegin":t.state.timerTeachToolWrapDisplay="none",t.setState({timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay});break;case"timer":clearInterval(t.stop),t.state.startAndStopImg="none",t.state.timeDescArray=[0,5,0,0],t.state.timerTeachToolWrapDisplay="none",t.setState({timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,startAndStopImg:t.state.startAndStopImg,timeDescArray:t.state.timeDescArray})}}},{key:"handlerMsglistTimerShow",value:function(e){var t=this,a=e.message.timerShowArr[0];(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant||m.default.hasRole.rolePatrol)&&t.handleTimerShow(a)}},{key:"handlerMsglistTimerDrag",value:function(e){var t=this,a=e.message.TimerDragArray,n=this,i=n.props.id;a.map(function(e,a){var o=e.data,s=o.percentLeft,l=o.percentTop;t[i]={percentLeft:s,percentTop:l},v.default.percentageChangeToRem(n,s,l,i),n.setState(r({},i,n.state[i]))})}},{key:"handleTimerShow",value:function(e){var t=this,a=p.default.serviceTime/1e3-e.ts;t.state.timeDescArray=e.data.sutdentTimerArry;var n=600*t.state.timeDescArray[0]+60*t.state.timeDescArray[1]+10*t.state.timeDescArray[2]+1*t.state.timeDescArray[3],r=n-a;if(e.data.isShow)t.state.startBtnStyle="block",t.state.timerTeachToolWrapDisplay="block",t.state.againBtnStyle="none",t.state.numContentBorder="black",t.state.againUnClickableStyle="block",t.state.startAndStopImg="none",t.state.triangleStyle="visible",t.setState({timeDescArray:t.state.timeDescArray,timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,againUnClickableStyle:t.state.againUnClickableStyle,startBtnStyle:t.state.startBtnStyle,startAndStopImg:t.state.startAndStopImg});else if(e.data.isStatus)if(clearInterval(t.stop),t.state.againBtnStyle="block",t.state.startBtnStyle="none",t.state.againUnClickableStyle="none",t.state.timerTeachToolWrapDisplay="block",t.state.numContentBorder="black",t.state.triangleStyle="hidden",t.state.startAndStopImg="block",t.setState({startAndStopImg:t.state.startAndStopImg,timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,startBtnStyle:t.state.startBtnStyle,numContentBorder:t.state.numContentBorder,againBtnStyle:t.state.againBtnStyle,triangleStyle:t.state.triangleStyle,againUnClickableStyle:t.state.againUnClickableStyle}),t.stop=setInterval(t.timeReduce.bind(t),1e3),r>0){r>n&&(r=n);var i=parseInt(r/60)<10?"0"+parseInt(r/60):parseInt(r/60),o=parseInt(r%60)<10?"0"+parseInt(r%60):parseInt(r%60);t.state.timeDescArray[0]=i.substring(0,1),t.state.timeDescArray[1]=i.substring(1),t.state.timeDescArray[2]=parseInt(o/10),t.state.timeDescArray[3]=parseInt(o%10),t.setState({timeDescArray:t.state.timeDescArray})}else clearInterval(t.stop),t.state.timeDescArray[0]=0,t.state.timeDescArray[1]=0,t.state.timeDescArray[2]=0,t.state.timeDescArray[3]=0,t.state.numContentBorder="red",t.setState({timeDescArray:t.state.timeDescArray,numContentBorder:t.state.numContentBorder});else e.data.isRestart?(t.state.timeDescArray=e.data.sutdentTimerArry,t.state.againUnClickableStyle="block",t.state.timerTeachToolWrapDisplay="block",t.state.startBtnStyle="block",t.state.againBtnStyle="none",t.state.triangleStyle="visible",t.state.startAndStop=!1,t.state.numContentBorder="black",t.state.startAndStopImg="none",t.setState({timeDescArray:t.state.timeDescArray,timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,numContentBorder:t.state.numContentBorder,startAndStopImg:t.state.startAndStopImg,startBtnStyle:t.state.startBtnStyle,againBtnStyle:t.state.againBtnStyle,triangleStyle:t.state.triangleStyle,startAndStop:t.state.startAndStop,againUnClickableStyle:t.state.againUnClickableStyle})):(t.state.timeDescArray=e.data.sutdentTimerArry,t.state.startBtnStyle="block",t.state.againBtnStyle="block",t.state.againUnClickableStyle="none",t.state.timerTeachToolWrapDisplay="block",t.state.triangleStyle="hidden",t.state.startAndStop=!1,t.state.numContentBorder="black",t.state.startAndStopImg="none",t.setState({timeDescArray:t.state.timeDescArray,timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,numContentBorder:t.state.numContentBorder,startAndStopImg:t.state.startAndStopImg,startBtnStyle:t.state.startBtnStyle,againBtnStyle:t.state.againBtnStyle,triangleStyle:t.state.triangleStyle,startAndStop:t.state.startAndStop,againUnClickableStyle:t.state.againUnClickableStyle}),clearInterval(t.stop))}},{key:"handleTurnShow",value:function(e){var t=this;"timer-implement-bg"==e.className&&"none"==t.state.timerTeachToolWrapDisplay&&(t.state.startBtnStyle="block",t.state.againBtnStyle="none",t.state.startAndStopImg="none",t.state.triangleStyle="visible",t.state.timerTeachToolWrapDisplay="block",t.state.againUnClickableStyle="block",t.state.startAndStop=!1,t.state.numContentBorder="black",clearInterval(t.stop),t.state.timeDescArray=[0,5,0,0],t.setState({timerTeachToolWrapDisplay:t.state.timerTeachToolWrapDisplay,startAndStop:t.state.startAndStop,startBtnStyle:t.state.startBtnStyle,againBtnStyle:t.state.againBtnStyle,triangleStyle:t.state.triangleStyle,numContentBorder:t.state.numContentBorder,timeDescArray:t.state.timeDescArray,againUnClickableStyle:t.state.againUnClickableStyle,startAndStopImg:t.state.startAndStopImg}))}},{key:"handlerInitAppPermissions",value:function(){this.state.studentInit=T.default.handler.getAppPermissions("studentInit"),this.setState({studentInit:this.state.studentInit}),this.state.studentInit&&(this.state.triangleStyle="visible",this.state.againBtnStyle="none",this.state.againUnClickableStyle="block",this.state.startBtnStyle="block",this.state.startAndStopImg="none",this.setState({triangleStyle:this.state.triangleStyles,againStuBtnStyle:this.state.againStuBtnStyle,startStuBtnStyle:this.state.startStuBtnStyle,startAndStopImg:this.state.startAndStopImg,againUnClickableStyle:this.state.againUnClickableStyle}))}},{key:"handlerRoomPlaybackClearAll",value:function(){if(!p.default.playback)return void L.Logger.error("No playback environment, no execution event[roomPlaybackClearAll] handler ");var e=this;e.setState({hoursDiv:"",secondsDiv:"",number:"",timeDescArray:[0,5,0,0],triangleStyle:"",againBtnStyle:"",startBtnStyle:"",numContentBorder:"",timerTeachToolWrapDisplay:"none",timerStuStyle:"",restarting:!1,studentInit:!1,startAndStop:!1,startAndStopImg:"none",isShow:!1,againUnClickableStyle:"block"}),this.stop=null}},{key:"_loadTimeDescArray",value:function(e){var t=this,a=[],n=[];return e.forEach(function(e,r){var i=c.default.createElement("div",{className:"timer-teachTool-num-div",key:r},c.default.createElement("div",{className:"timer-teachTool-triangle-top",style:{visibility:t.state.triangleStyle},onClick:t.AddHandel.bind(t,r)}),c.default.createElement("div",{className:"timer-teachTool-num-content",style:{color:t.state.numContentBorder}},e),c.default.createElement("div",{className:"timer-teachTool-triangle-down",style:{visibility:t.state.triangleStyle},onClick:t.ReduceHandel.bind(t,r)}));r>1?n.push(i):a.push(i)}),{afterArray:n,beforeArray:a}}},{key:"AddHandel",value:function(e,t){(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[0]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[0]=t.target.nextSibling.textContent)),1===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[1]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[1]=t.target.nextSibling.textContent)),2===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[2]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>5&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[2]=t.target.nextSibling.textContent)),3===e&&(t.target.nextSibling.textContent++,this.state.timeDescArray[3]=t.target.nextSibling.textContent,t.target.nextSibling.textContent>9&&(t.target.nextSibling.textContent=0,this.state.timeDescArray[3]=t.target.nextSibling.textContent=0)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"ReduceHandel",value:function(e,t){(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant)&&(0===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[0]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[0]=t.target.previousSibling.textContent)),1===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[1]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[1]=t.target.previousSibling.textContent)),2===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[2]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=5,this.state.timeDescArray[2]=t.target.previousSibling.textContent)),3===e&&(t.target.previousSibling.textContent--,this.state.timeDescArray[3]=t.target.previousSibling.textContent,t.target.previousSibling.textContent<0&&(t.target.previousSibling.textContent=9,this.state.timeDescArray[3]=t.target.previousSibling.textContent)),this.setState({timeDescArray:this.state.timeDescArray}))}},{key:"startBtnHandel",value:function(e){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){clearInterval(this.stop),this.state.numContentBorder="black",this.state.startAndStop=!0,this.state.restarting=!1,this.setState({startAndStop:this.state.startAndStop,numContentBorder:this.state.numContentBorder,restarting:this.state.restarting}),this.state.startBtnStyle="none",this.state.startAndStopImg="block",this.state.triangleStyle="hidden",this.state.againBtnStyle="block",this.state.againUnClickableStyle="none",this.setState({startAndStopImg:this.state.startAndStopImg,startBtnStyle:this.state.startBtnStyle,againBtnStyle:this.state.againBtnStyle,triangleStyle:this.state.triangleStyle,againUnClickableStyle:this.state.againUnClickableStyle}),0===this.state.timeDescArray[0]&&0===this.state.timeDescArray[1]&&0===this.state.timeDescArray[2]&&0===this.state.timeDescArray[3]&&(this.state.timeDescArray=[0,0,0,0],this.state.numContentBorder="red",clearInterval(this.stop)),this.stop=setInterval(this.timeReduce.bind(this),1e3);var t=this.state.startAndStop,a=this.state.timeDescArray,n=this.state.isShow,r=this.state.restarting,i={isStatus:t,sutdentTimerArry:a,isShow:n,isRestart:r};D.default.sendSignallingTimerToStudent(i)}}},{key:"stopBtnHandel",value:function(){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){this.state.startAndStop=!1,this.state.restarting=!1,this.state.startAndStopImg="none",this.state.triangleStyle="hidden",this.state.startBtnStyle="block",this.state.againUnClickableStyle="none",this.state.againBtnStyle="block",this.setState({startAndStopImg:this.state.startAndStopImg,startBtnStyle:this.state.startBtnStyle,againBtnStyle:this.state.againBtnStyle,startAndStop:this.state.startAndStop,triangleStyle:this.state.triangleStyle,againUnClickableStyle:this.state.againUnClickableStyle}),clearInterval(this.stop);var e=this.state.startAndStop,t=this.state.isShow,a=this.state.timeDescArray,n=this.state.restarting,r={isStatus:e,sutdentTimerArry:a,isShow:t,isRestart:n};D.default.sendSignallingTimerToStudent(r)}}},{key:"firstArr",value:function(){var e=this;this.handlersetAnswerMessage(recvEventData),this.state.optionUl=this.state.initArr.map(function(t,a){return c.default.createElement("li",{className:"answer-teach-lis",key:t.id,onClick:e.changeColor.bind(e,a)},t.name)}),this.setState({optionUl:this.state.optionUl})}},{key:"againBtnHandel",value:function(e){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){this.state.numContentBorder="black",this.setState({numContentBorder:this.state.numContentBorder}),this.state.restarting=!0,this.state.startAndStop=!1,this.state.triangleStyle="visible",this.state.againBtnStyle="none",this.state.startAndStopImg="none",this.state.startBtnStyle="block",this.state.againUnClickableStyle="block",clearInterval(this.stop),this.state.numContentBorder="black",this.state.timeDescArray=[0,5,0,0],this.setState({triangleStyle:this.state.triangleStyle,againBtnStyle:this.state.againBtnStyle,startBtnStyle:this.state.startBtnStyle,timeDescArray:this.state.timeDescArray,startAndStopImg:this.state.startAndStopImg,startAndStop:this.state.startAndStop,restarting:this.state.restarting,numContentBorder:this.state.numContentBorder,againUnClickableStyle:this.state.againUnClickableStyle});var t=this.state.startAndStop,a=this.state.timeDescArray,n=this.state.isShow,r=this.state.restarting,i={isStatus:t,sutdentTimerArry:a,isShow:n,isRestart:r};D.default.sendSignallingTimerToStudent(i)}}},{key:"timeReduce",value:function(){var e=this;e.state.timeDescArray[3]--,e.state.timeDescArray[3]<0&&(e.state.timeDescArray[3]=9,e.state.timeDescArray[2]--),e.state.timeDescArray[2]<0&&(e.state.timeDescArray[2]=5,e.state.timeDescArray[1]--),e.state.timeDescArray[1]<0&&(e.state.timeDescArray[1]=9,e.state.timeDescArray[0]--),e.state.timeDescArray[0]<0&&(e.state.timeDescArray=[0,0,0,0],e.state.numContentBorder="red",e.state.startBtnStyle="none",clearInterval(e.stop),e.playAudioToAudiooutput()),0==e.state.timeDescArray[0]&&0==e.state.timeDescArray[1]&&0==e.state.timeDescArray[2]&&0==e.state.timeDescArray[3]&&(e.playAudioToAudiooutput(),e.state.timeDescArray=[0,0,0,0],e.state.numContentBorder="red",e.state.startBtnStyle="none",clearInterval(e.stop)),e.setState({timeDescArray:e.state.timeDescArray,startBtnStyle:e.state.startBtnStyle,numContentBorder:e.state.numContentBorder})}},{key:"timerCloseHandel",value:function(){if(m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){this.state.timeDescArray=[0,5,0,0],this.state.triangleStyle="visible",this.state.startAndStop=!1,this.state.againBtnStyle="none",this.state.startAndStopImg="none",this.state.numContentBorder="black",this.state.againUnClickableStyle="block",clearInterval(this.stop),this.setState({timeDescArray:this.state.timeDescArray,triangleStyle:this.state.triangleStyle,startAndStop:this.state.startAndStop,numContentBorder:this.state.numContentBorder,startAndStopImg:this.state.startAndStopImg,againBtnStyle:this.state.againBtnStyle,againUnClickableStyle:this.state.againUnClickableStyle}),this.state.timerTeachToolWrapDisplay="none",this.setState({timerTeachToolWrapDisplay:this.state.timerTeachToolWrapDisplay});var e=this.state.startAndStop,t=this.state.isShow,a=this.state.timeDescArray,n={isStatus:e,sutdentTimerArry:a,isShow:t},i=!0;D.default.sendSignallingTimerToStudent(n,i);var o=this.props.id;this.state[o].left=6.6,this.state[o].top=0,this.setState(r({},o,this.state[o]))}}},{key:"playAudioToAudiooutput",value:function(){var e=document.getElementById("ring_audio");L.Utils.mediaPlay(e)}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=p.default.windowInnerWidth/m.default.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=v.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;if(a.state[n].offsetX=0,a.state[n].offsetY=0,m.default.hasRole.roleChairman||m.default.hasRole.roleTeachingAssistant){var r=a.state[n],i=r.left,o=r.top,s=v.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;a[n]={percentLeft:l,percentTop:d};var c={percentLeft:a[n].percentLeft,percentTop:a[n].percentTop,isDrag:!0};D.default.sendSignallingFromTimerDrag(c)}}},{key:"render",value:function(){var e=this,t=this.state.timeDescArray,a=this.props.id,n=this._loadTimeDescArray(t),r=n.afterArray,i=n.beforeArray,o={onStart:e.handlerOnStartDrag.bind(e),onDrag:e.handlerOnDragging.bind(e),onStop:e.handlerOnStopDrag.bind(e)},s={position:"absolute",zIndex:110,display:"inline-block",left:this.state[a].left+"rem",top:this.state[a].top+"rem",transitionProperty:this.isHasTransition?"left,top":void 0,transitionDuration:this.isHasTransition?"0.4s":void 0};return c.default.createElement(_.DraggableCore,o,c.default.createElement("div",{id:"timerDrag",style:s},c.default.createElement("div",{className:"timer-teachTool-wrap",style:{display:this.state.timerTeachToolWrapDisplay},ref:"timerTeachToolWrap"},c.default.createElement("div",{className:"timer-teachTool-header"},c.default.createElement("span",null),c.default.createElement("span",null,p.default.language.languageData.timers.timerSetInterval.text),c.default.createElement("span",{className:"timer-teachTool-closeSpan",onClick:this.timerCloseHandel.bind(this)})),i,c.default.createElement("div",{className:"timer-teachTool-colon"},c.default.createElement("div",null),c.default.createElement("div",null)),r,c.default.createElement("div",{className:"timer-teachTool-startBtn",ref:"timerStartBtn",style:{display:this.state.startBtnStyle},onClick:this.startBtnHandel.bind(this),title:p.default.language.languageData.timers.timerBegin.text}),c.default.createElement("div",{className:"timer-teachTool-stopBtn",style:{display:this.state.startAndStopImg},onClick:this.stopBtnHandel.bind(this),title:p.default.language.languageData.timers.timerStop.text}),c.default.createElement("div",{className:"timer-teachTool-againBtn",style:{display:this.state.againBtnStyle},onClick:this.againBtnHandel.bind(this),title:p.default.language.languageData.timers.again.text}),c.default.createElement("div",{className:"timer-teachTool-againBtn-unclickable",style:{display:this.state.againUnClickableStyle},title:p.default.language.languageData.timers.again.text}),c.default.createElement("audio",{id:"ring_audio",src:"./music/ring.mp3?ts="+this.listernerBackupid,className:"audio-play"})),c.default.createElement(C.default,null)))}}]),t}(c.default.Component));t.default=A,e.exports=t.default},268:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=n(d),u=a(260),h=n(u),p=a(269),g=n(p),m=a(10),f=n(m),v=a(19),b=n(v),y=a(12),S=n(y),T=a(56),k=(n(T),function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var a=this.props.id;this.state=r({lc_tool_container:{pagingToolLeft:"",pagingToolTop:""},updateState:!1},a,{left:.1,top:.1,offsetX:0,offsetY:0}),this[a]={},this.draggableData={onStart:this.handlerOnStartDrag.bind(this),onDrag:this.handlerOnDragging.bind(this),onStop:this.handlerOnStopDrag.bind(this)},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;f.default.Window.addEventListener(TkConstant.EVENTTYPE.WindowEvent.onResize,e.handlerOnResize.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(TkConstant.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;f.default.CoreController.removeBackupListerner(e.listernerBackupid),f.default.Window.removeBackupListerner(e.listernerBackupid)}},{key:"handlerOnResize",value:function(){var e=this,t=this.props.id;if(0!==Object.keys(e[t]).length){var a=e[t],n=a.percentLeft,i=a.percentTop;b.default.percentageChangeToRem(e,n,i,t),this.setState(r({},t,this.state[t]))}}},{key:"handlerRoomConnected",value:function(){
this.setState({updateState:!this.state.updateState}),this._getThisEleLeft()}},{key:"_getThisEleLeft",value:function(){var e=this.props.id,t=S.default.windowInnerWidth/TkConstant.STANDARDSIZE;"phone"===S.default.mobileDeviceType?this.state[e].left=(S.default.windowInnerWidth/t-7.26)/2:this.state[e].left=S.default.windowInnerWidth/t-.9,this.setState(r({},e,this.state[e]))}},{key:"handlerOnStartDrag",value:function(e,t){var a=this,n=a.props.id,r=S.default.windowInnerWidth/TkConstant.STANDARDSIZE;a.state[n].offsetX=t.x/r-a.state[n].left,a.state[n].offsetY=t.y/r-a.state[n].top}},{key:"handlerOnDragging",value:function(e,t){var a=this,n=a.props.id,i=S.default.windowInnerWidth/TkConstant.STANDARDSIZE;a.state[n].left=t.x/i-a.state[n].offsetX,a.state[n].top=t.y/i-a.state[n].offsetY;var o=n,s="tk_app";a.state[n]=b.default.controlDragBounds(a,o,s),a.setState(r({},n,a.state[n]))}},{key:"handlerOnStopDrag",value:function(e,t){var a=this,n=a.props.id;a.state[n].offsetX=0,a.state[n].offsetY=0;var r=a.state[n],i=r.left,o=r.top,s=b.default.RemChangeToPercentage(a,i,o,n),l=s.percentLeft,d=s.percentTop;a[n]={percentLeft:l,percentTop:d}}},{key:"render",value:function(){var e=this.props.id,t={position:"absolute",zIndex:110,display:"inline-block",left:this.state[e].left+"rem",top:this.state[e].top+"rem"};return c.default.createElement(T.DraggableCore,this.draggableData,c.default.createElement("div",{id:e,className:"lc-tool-container clear-float tk-tool-right "+("phone"===S.default.mobileDeviceType?"phone ":"pc pad "),style:t},"phone"===S.default.mobileDeviceType?void 0:c.default.createElement(h.default,{left:this.state[e].left,parentId:"lc_tool_container"}),c.default.createElement(g.default,{left:this.state[e].left,parentId:"lc_tool_container"})))}}]),t}(c.default.Component));t.default=k,e.exports=t.default},269:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;e=d,t=i,a=o,n=!0,s=d=void 0}},d=a(2),c=r(d),u=a(12),h=r(u),p=a(18),g=r(p),m=a(10),f=r(m),v=a(20),b=r(v),y=a(24),S=r(y),T=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={fileTypeMark:"general",selectColor:"000000",show:!1,showItemJson:{mouse:!0,laser:!1,brush:!0,text:!0,shape:!0,undo:!1,redo:!1,eraser:!0,clear:!1,colorAndSize:!0,colors:!0,measure:!0},registerWhiteboardToolsList:{action_clear:{toolKey:"action_clear",disabled:!1},action_redo:{toolKey:"action_redo",disabled:!1},action_undo:{toolKey:"action_undo",disabled:!1},tool_eraser:{toolKey:"tool_eraser",disabled:!1}},currentUseTool:"tool_mouse",currentExtendToolContainer:void 0,currentExtendToolExtraContainer:void 0,showCurrentExtendToolContainer:!1,useBrush:"tool_pencil",useText:"tool_text_msyh",useShape:"tool_rectangle_empty",useStrokeSize:"tool_color_measure_small",useStrokeColor:"simple_color_000000"},this.selectMouse=void 0,this.colors={smipleList:["#000000","#2d2d2d","#5b5b5b","#8e8e8e","#c5c5c5","#ffffff","#ff0001","#06ff02","#0009ff","#ffff03","#00ffff","#ff03ff"],moreList:[["#000000","#002d00","#015b00","#028e01","#03c501","#06ff02","#2d0000","#2d2d00","#2d5b00","#2d8e01","#2dc501","#2eff02","#5b0000","#5b2d00","#5b5b00","#5b8e01","#5bc501","#5cff02"],["#00002d","#002d2d","#015b2d","#028e2d","#03c52d","#05ff2d","#2d002d","#2d2d2d","#2d5b2d","#2d8e2d","#2dc52d","#2eff2d","#5b002d","#5b2d2d","#5b5b2d","#5b8e2d","#5bc52d","#5cff2d"],["#00015b","#002d5b","#005b5b","#018e5b","#02c55b","#05ff5b","#2d015b","#2d2d5b","#2d5b5b","#2d8e5b","#2dc55b","#2eff5b","#5b005b","#5b2d5b","#5b5b5b","#5b8e5b","#5bc55b","#5cff5b"],["#00038e","#002d8e","#005b8e","#008e8e","#01c58e","#03ff8e","#2c038e","#2d2d8e","#2d5b8e","#2d8e8e","#2dc58e","#2dff8e","#5b028e","#5b2d8e","#5b5b8e","#5b8e8e","#5bc58e","#5bff8e"],["#0005c5","#002ec5","#005bc5","#008ec5","#00c5c5","#01ffc5","#2c05c5","#2c2ec5","#2c5bc5","#2c8ec5","#2dc5c5","#2dffc5","#5b04c5","#5b2ec5","#5b5bc5","#5b8ec5","#5bc5c5","#5bffc5"],["#0009ff","#002eff","#005cff","#008fff","#00c5ff","#00ffff","#2c08ff","#2c2eff","#2c5cff","#2c8fff","#2cc5ff","#2dffff","#5b08ff","#5b2eff","#5b5cff","#5b8fff","#5bc5ff","#5bffff"],["#8e0000","#8e2d00","#8e5b01","#8e8e01","#8fc502","#8fff03","#c50001","#c52c01","#c55b01","#c58e01","#c5c502","#c5ff03","#ff0001","#ff2c01","#ff5b01","#ff8e02","#ffc502","#ffff03"],["#8e002d","#8e2d2d","#8e5b2d","#8e8e2d","#8fc52d","#8fff2d","#c5002d","#c52c2d","#c55b2d","#c58e2d","#c5c52d","#c5ff2d","#ff002d","#ff2c2d","#ff5b2d","#ff8e2d","#ffc52d","#ffff2d"],["#8e005b","#8e2d5b","#8e5b5b","#8e8e5b","#8fc55b","#8fff5b","#c5005b","#c52c5b","#c55b5b","#c58e5b","#c5c55b","#c5ff5b","#ff005b","#ff2c5b","#ff5b5b","#ff8e5b","#ffc55b","#ffff5b"],["#8e018e","#8e2d8e","#8e5b8e","#8e8e8e","#8ec58e","#8fff8e","#c5008e","#c52d8e","#c55b8e","#c58e8e","#c5c58e","#c5ff8e","#ff008e","#ff2c8e","#ff5b8e","#ff8e8e","#ffc58e","#ffff8e"],["#8e03c5","#8e2dc5","#8e5bc5","#8e8ec5","#8ec5c5","#8effc5","#c502c5","#c52dc5","#c55bc5","#c58ec5","#c5c5c5","#c5ffc5","#ff00c5","#ff2dc5","#ff5bc5","#ff8ec5","#ffc5c5","#ffffc5"],["#8e07ff","#8e2eff","#8e5cff","#8e8fff","#8ec5ff","#8effff","#c505ff","#c52eff","#c55bff","#c58eff","#c5c5ff","#c5ffff","#ff03ff","#ff2dff","#ff5bff","#ff8eff","#ffc5ff","#ffffff"]]},this.listernerBackupid=(new Date).getTime()+"_"+Math.random()}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;f.default.CoreController.addEventListener("changeFileTypeMark",e.handlerChangeFileTypeMark.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomConnected,e.handlerRoomConnected.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener(g.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("callAllWrapOnClick",e.handlerCallAllWrapOnClick.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("updateAppPermissions_canDraw",e.handlerUpdateAppPermissions_canDraw.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("initAppPermissions",e.handlerInitAppPermissions.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("resetDefaultAppPermissions",e.handlerResetDefaultAppPermissions.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("receive-msglist-whiteboardMarkTool",e.handlerReceive_msglist_whiteboardMarkTool.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("commonWhiteboardTool_noticeUpdateToolDesc",e.handlerCommonWhiteboardTool_noticeUpdateToolDesc.bind(e),e.listernerBackupid),f.default.CoreController.addEventListener("teacherToolBox",e.handlerTeacherToolBox.bind(e),e.listernerBackupid)}},{key:"componentWillUnmount",value:function(){var e=this;f.default.CoreController.removeBackupListerner(e.listernerBackupid)}},{key:"handlerCallAllWrapOnClick",value:function(e){if("mobile"===TK.SDKTYPE){var t=e.message.event,a=this.props.parentId||"header_tool_vessel";t.target.id===a||n(t.target)&&n(t.target).parents("#"+a).length>0||(this.state.showCurrentExtendToolContainer&&this.setState({showCurrentExtendToolContainer:!1}),this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0}))}}},{key:"handlerRoomDelmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":this.selectMouse=void 0,this._initWhiteboardToolDefaultStyle()}}},{key:"handlerRoomPubmsg",value:function(e){var t=this,a=e.message;switch(a.name){case"whiteboardMarkTool":var n=a.data.selectMouse;if(t.selectMouse!==n){var r=!0;n?t.selectCurrentUseTool({toolId:"tool_mouse",isRemote:r}):t.selectExtendTool({extendToolId:"whiteboard_tool_vessel_brush",isRemote:r})}}}},{key:"handlerReceive_msglist_whiteboardMarkTool",value:function(e){var t=this,a=e.message,n=a.data.selectMouse;if(t.selectMouse!==n){var r=!0;n?t.selectCurrentUseTool({toolId:"tool_mouse",isRemote:r}):t.selectExtendTool({extendToolId:"whiteboard_tool_vessel_brush",isRemote:r})}}},{key:"handlerChangeFileTypeMark",value:function(e){this.setState({fileTypeMark:e.message.fileTypeMark})}},{key:"handlerRoomConnected",value:function(e){if(g.default.hasRole.roleChairman){var t=!0,a=!1,n=void 0;try{for(var r,i=Object.keys(this.state.showItemJson)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.state.showItemJson[o]=!0}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}"mobile"===TK.SDKTYPE?(this.state.showItemJson.laser=!1,this.state.showItemJson.undo=!1,this.state.showItemJson.redo=!1,this.state.showItemJson.clear=!1,this.state.showItemJson.colorAndSize=!1,this.state.showItemJson.colors=!0,this.state.showItemJson.measure=!0):(this.state.showItemJson.colors=!1,this.state.showItemJson.measure=!1),this.setState({showItemJson:this.state.showItemJson})}else"mobile"===TK.SDKTYPE&&(this.state.showItemJson.laser=!1,this.state.showItemJson.undo=!1,this.state.showItemJson.redo=!1,this.state.showItemJson.clear=!1,this.state.showItemJson.colorAndSize=!1,this.state.showItemJson.colors=!0,this.state.showItemJson.measure=!0,this.setState({showItemJson:this.state.showItemJson}));this._initWhiteboardToolDefaultStyle()}},{key:"handlerUpdateAppPermissions_canDraw",value:function(e){this._changeCanDrawPermissions()}},{key:"handlerInitAppPermissions",value:function(e){this._changeCanDrawPermissions()}},{key:"handlerResetDefaultAppPermissions",value:function(){this._changeCanDrawPermissions()}},{key:"handlerCommonWhiteboardTool_noticeUpdateToolDesc",value:function(e){var t=e.message.registerWhiteboardToolsList,a=!1,n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(this.state.registerWhiteboardToolsList)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t[l]&&(this.state.registerWhiteboardToolsList[l]=t[l],a=!0)}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}a&&this.setState({registerWhiteboardToolsList:this.state.registerWhiteboardToolsList})}},{key:"handlerTeacherToolBox",value:function(e){this.state.showCurrentExtendToolContainer&&this.setState({showCurrentExtendToolContainer:!1}),this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0})}},{key:"allLiMouseLeave",value:function(e){"mobile"!==TK.SDKTYPE&&(this.state.showCurrentExtendToolContainer&&this.setState({showCurrentExtendToolContainer:!1}),this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0}))}},{key:"changeStrokeSizeClick",value:function(e,t){var a={};"whiteboard_tool_vessel_brush"===this.state.currentExtendToolContainer?a.pencil=!0:"whiteboard_tool_vessel_text"===this.state.currentExtendToolContainer||"mobile"===TK.SDKTYPE&&"tool_text"===this.state.currentUseTool?a.text=!0:"whiteboard_tool_vessel_shape"===this.state.currentExtendToolContainer?a.shape=!0:"tool_eraser"===this.state.currentUseTool&&(a.eraser=!0),this.setState({useStrokeSize:e}),"mobile"===TK.SDKTYPE&&this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0}),f.default.CoreController.dispatchEvent({type:"changeStrokeSize",message:{strokeJson:t,selectedTool:a}})}},{key:"changeStrokeColorClick",value:function(e,t){f.default.CoreController.dispatchEvent({type:"changeStrokeColor",message:{selectColor:t}}),this.setState({selectColor:t,useStrokeColor:e}),"mobile"===TK.SDKTYPE&&this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0})}},{key:"selectCurrentUseTool",value:function(e,t){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.toolId,r=a.extendToolId,i=a.isRemote,o=void 0!==i&&i,s=a.initiative,l=void 0===s||s;if(this.setState({currentUseTool:n}),this.state.currentExtendToolContainer!==r&&this.setState({currentExtendToolContainer:r}),void 0!==this.state.currentExtendToolExtraContainer&&this.setState({currentExtendToolExtraContainer:void 0}),l&&(!r||"mobile"===TK.SDKTYPE&&this.state.showCurrentExtendToolContainer)&&this.setState({showCurrentExtendToolContainer:!1}),l&&!o&&f.default.CoreController.dispatchEvent({type:"whiteboardToolBox"}),r)switch(r){case"whiteboard_tool_vessel_brush":this.setState({useBrush:n});break;case"whiteboard_tool_vessel_text":var d="tool_text_msyh";switch(n){case"tool_text_msyh":d=h.default.language.languageData.header.tool.text.Msyh.text;break;case"tool_text_ming":d=h.default.language.languageData.header.tool.text.Ming.text;break;case"tool_text_arial":d=h.default.language.languageData.header.tool.text.Arial.text}f.default.CoreController.dispatchEvent({type:"whiteboard_updateWhiteboardToolsInfo",message:{whiteboardToolsInfo:{fontFamily:d}}}),f.default.CoreController.dispatchEvent({type:"whiteboard_updateTextFont"}),this.setState({useText:n});break;case"whiteboard_tool_vessel_shape":this.setState({useShape:n})}return this.selectMouse!==("tool_mouse"===n)&&(this.selectMouse="tool_mouse"===n,f.default.CoreController.dispatchEvent({type:"updateSelectMouse",message:{selectMouse:this.selectMouse}}),o||S.default.sendMarkToolMouseIsSelect(this.selectMouse)),"whiteboard_tool_vessel_text"===r?this._whiteboard_activeCommonWhiteboardToolClick("tool_text"):this._whiteboard_activeCommonWhiteboardToolClick(n),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"selectExtendExtraTool",value:function(e,t){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.extendToolId,r=a.isRemote,i=void 0!==r&&r;return a.toolId,n&&(i||(this.state.currentExtendToolExtraContainer!==n?this.setState({currentExtendToolExtraContainer:n}):this.setState({currentExtendToolExtraContainer:void 0})),this.setState({showCurrentExtendToolContainer:!1}),i||f.default.CoreController.dispatchEvent({type:"whiteboardToolBox"})),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"selectExtendTool",value:function(e,t){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.extendToolId,r=a.isRemote,i=void 0!==r&&r;if(a.toolId,n){switch(i?this.setState({showCurrentExtendToolContainer:!1,currentExtendToolExtraContainer:void 0}):(this.state.currentExtendToolContainer&&this.state.currentExtendToolContainer===n?this.setState({showCurrentExtendToolContainer:!this.state.showCurrentExtendToolContainer}):this.setState({showCurrentExtendToolContainer:!0}),this.setState({currentExtendToolExtraContainer:void 0})),n){case"whiteboard_tool_vessel_brush":this.selectCurrentUseTool({toolId:this.state.useBrush,extendToolId:n,isRemote:i,initiative:!1});break;case"whiteboard_tool_vessel_text":this.selectCurrentUseTool({toolId:this.state.useText,extendToolId:n,isRemote:i,initiative:!1});break;case"whiteboard_tool_vessel_shape":this.selectCurrentUseTool({toolId:this.state.useShape,extendToolId:n,isRemote:i,initiative:!1})}i||f.default.CoreController.dispatchEvent({type:"whiteboardToolBox"})}return t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"useWhiteboardAction",value:function(e,t){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=a.actionId;return a.isRemote,n&&(this.setState({showCurrentExtendToolContainer:!1}),this.setState({currentExtendToolExtraContainer:void 0}),this._whiteboard_activeCommonWhiteboardToolClick(n)),t&&(t.preventDefault(),t.stopPropagation()),!1}},{key:"_whiteboard_activeCommonWhiteboardToolClick",value:function(e){f.default.CoreController.dispatchEvent({type:"whiteboard_activeCommonWhiteboardTool",message:{toolKey:e}})}},{key:"_loadSmipleAndMoreListToArray",value:function(e,t){var a=this,n=[],r=[];return e.map(function(e,t){n.push(c.default.createElement("li",{key:t,className:" "+(a.state.useStrokeColor==="simple_color_"+a._colorFilter(e)?"active":""),onClick:a.changeStrokeColorClick.bind(a,"simple_color_"+a._colorFilter(e),a._colorFilter(e)),style:{backgroundColor:e},id:"simple_color_"+a._colorFilter(e)}))}),t.map(function(e,t){Array.isArray(e)&&!function(){var n=[];e.map(function(e,t){n.push(c.default.createElement("li",{key:t,className:" "+(a.state.useStrokeColor==="more_color_"+a._colorFilter(e)?"active":""),onClick:a.changeStrokeColorClick.bind(a,"more_color_"+a._colorFilter(e),a._colorFilter(e)),style:{backgroundColor:e},id:"more_color_"+a._colorFilter(e)}))}),r.push(c.default.createElement("ul",{key:t,className:"clear-float"},n))}()}),{smipleColorElementArray:n,moreColorElementArray:r}}},{key:"_colorFilter",value:function(e){return e.replace(/#/g,"")}},{key:"_changeCanDrawPermissions",value:function(){var e=b.default.handler.getAppPermissions("canDraw");this.setState({show:e})}},{key:"_initWhiteboardToolDefaultStyle",value:function(){if(g.default.hasRole.roleChairman||g.default.hasRole.roleTeachingAssistant?this.changeStrokeColorClick("simple_color_ff0001","ff0001"):this.changeStrokeColorClick("simple_color_000000","000000"),void 0===this.selectMouse){var e=!0;this.selectCurrentUseTool({toolId:"tool_mouse",isRemote:e})}var t=void 0;t="mobile"===TK.SDKTYPE?"phone"===h.default.mobileDeviceType?{pencil:5,text:25,eraser:120,shape:5}:{pencil:5,text:25,eraser:50,shape:5}:{pencil:5,text:18,eraser:30,shape:5},this.changeStrokeSizeClick("tool_color_measure_small",t)}},{key:"render",value:function(){var e=this,t=this.props.left,a=e._loadSmipleAndMoreListToArray(e.colors.smipleList,e.colors.moreList),n=a.smipleColorElementArray,r=a.moreColorElementArray,i=e.state.showItemJson,o=i.mouse,s=i.laser,l=i.brush,d=i.text,u=i.shape,p=i.undo,g=i.redo,m=i.eraser,f=i.clear,v=i.colorAndSize,b=i.colors,y=i.measure,S=this.state.registerWhiteboardToolsList,T=S.action_clear,k=S.action_redo,w=S.action_undo,C=e.state,P=C.currentUseTool,D=C.currentExtendToolContainer,_=C.showCurrentExtendToolContainer,A=C.useBrush,E=C.useText,I=C.useShape,x=C.useStrokeSize,B=C.currentExtendToolExtraContainer;return c.default.createElement("div",{className:"whiteboard-tool-total-box add-fl clear-float"},"phone"!==h.default.mobileDeviceType?c.default.createElement("ol",{className:"add-fl clear-float h-tool tool-whiteboard-container pc pad ",id:"header_tool_vessel",style:{display:e.state.show?"":"none"}}," ",o?c.default.createElement("li",{className:"tool-li tl-mouse "+("tool_mouse"===P?"active":""),id:"whiteboard_tool_vessel_mouse",style:{display:o?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.mouse.title,id:"tool_mouse",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_mouse"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,s?c.default.createElement("li",{className:"tool-li tl-laser "+("tool_laser"===P?"active":""),id:"whiteboard_tool_vessel_laser",style:{display:s?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.pencil.laser.title,id:"tool_laser",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_laser"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,l?c.default.createElement("li",{className:"tool-li tl-pencil "+("whiteboard_tool_vessel_brush"===D?"active ":" ")+("whiteboard_tool_vessel_brush"===D&&_?"more ":" "),id:"whiteboard_tool_vessel_brush",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_brush"),style:{display:l?void 0:"none"}},c.default.createElement("button",{className:"header-tool tool-pencil  tool-more ",id:"tool_vessel_brush",title:h.default.language.languageData.header.tool.pencil.title,onClick:e.selectExtendTool.bind(e,{extendToolId:"whiteboard_tool_vessel_brush"}),"data-iconclass":A},c.default.createElement("span",{className:"tool-img-wrap tool-pencil-icon"})),c.default.createElement("div",{className:"header-tool-extend tool-pencil-extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("ul",{className:"clear-float"},c.default.createElement("li",{id:"tool_pencil",className:"extend-brush-pencil "+("tool_pencil"===A?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_pencil",extendToolId:"whiteboard_tool_vessel_brush"})},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.pencil.pen.text)),c.default.createElement("li",{id:"tool_highlighter",className:"extend-brush-highlighter "+("tool_highlighter"===A?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_highlighter",extendToolId:"whiteboard_tool_vessel_brush"})},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.pencil.Highlighter.text)),c.default.createElement("li",{id:"tool_line",className:"extend-brush-line "+("tool_line"===A?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_line",extendToolId:"whiteboard_tool_vessel_brush"})},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.pencil.linellae.text)),c.default.createElement("li",{id:"tool_arrow",className:"extend-brush-arrow "+("tool_arrow"===A?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_arrow",extendToolId:"whiteboard_tool_vessel_brush"})},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.pencil.arrow.text))))):void 0,d?"mobile"!==TK.SDKTYPE?c.default.createElement("li",{className:"tool-li tl-text "+("whiteboard_tool_vessel_text"===D?"active ":" ")+("whiteboard_tool_vessel_text"===D&&_?"more ":" "),id:"whiteboard_tool_vessel_text",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_text"),style:{display:d?void 0:"none"}},c.default.createElement("button",{className:"header-tool  tool-text  tool-more",title:h.default.language.languageData.header.tool.text.title,id:"tool_text",onClick:e.selectExtendTool.bind(e,{extendToolId:"whiteboard_tool_vessel_text"}),"data-iconclass":E},c.default.createElement("span",{className:"tool-img-wrap"})),c.default.createElement("div",{className:"header-tool-extend tool-text-extend",id:"tool_text_extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("ul",{className:"clear-float"},c.default.createElement("li",{id:"tool_text_msyh",className:"extend-text-msyh "+("tool_text_msyh"===E?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_text_msyh",extendToolId:"whiteboard_tool_vessel_text"})},c.default.createElement("span",{className:"add-nowrap"},h.default.language.languageData.header.tool.text.Msyh.text)),c.default.createElement("li",{id:"tool_text_ming",className:"extend-text-ming "+("tool_text_ming"===E?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_text_ming",extendToolId:"whiteboard_tool_vessel_text"})},c.default.createElement("span",{className:"add-nowrap"},h.default.language.languageData.header.tool.text.Ming.text)),c.default.createElement("li",{id:"tool_text_arial",className:"extend-text-arial "+("tool_text_arial"===E?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_text_arial",extendToolId:"whiteboard_tool_vessel_text"})},c.default.createElement("span",{className:"add-nowrap"},h.default.language.languageData.header.tool.text.Arial.text))))):c.default.createElement("li",{className:"tool-li tl-text "+("tool_text"===P?"active":""),id:"whiteboard_tool_vessel_text",style:{display:d?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.text.title,id:"tool_text",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_text"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,u?c.default.createElement("li",{className:"tool-li tl-shape "+("whiteboard_tool_vessel_shape"===D?"active ":" ")+("whiteboard_tool_vessel_shape"===D&&_?"more ":" "),id:"whiteboard_tool_vessel_shape",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_shape"),style:{display:u?void 0:"none"}},c.default.createElement("button",{className:"header-tool  tool-shape   tool-more",title:h.default.language.languageData.header.tool.shape.title,id:"tool_shape_list",onClick:e.selectExtendTool.bind(e,{extendToolId:"whiteboard_tool_vessel_shape"}),"data-iconclass":I},c.default.createElement("span",{className:"tool-img-wrap"})),c.default.createElement("div",{className:"header-tool-extend tool-shape-extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("ul",{className:"clear-float"},c.default.createElement("li",{className:"extend-shape-rectangle-empty "+("tool_rectangle_empty"===I?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_rectangle_empty",extendToolId:"whiteboard_tool_vessel_shape"}),id:"tool_rectangle_empty"},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.shape.outlinedRectangle.text)),c.default.createElement("li",{className:"extend-shape-rectangle "+("tool_rectangle"===I?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_rectangle",extendToolId:"whiteboard_tool_vessel_shape"}),id:"tool_rectangle"},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.shape.filledRectangle.text)),c.default.createElement("li",{className:"extend-shape-ellipse-empty "+("tool_ellipse_empty"===I?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_ellipse_empty",extendToolId:"whiteboard_tool_vessel_shape"}),id:"tool_ellipse_empty"},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.shape.outlinedCircle.text)),c.default.createElement("li",{className:"extend-shape-ellipse "+("tool_ellipse"===I?"active":""),onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_ellipse",extendToolId:"whiteboard_tool_vessel_shape"}),id:"tool_ellipse"},c.default.createElement("span",{className:"add-nowrap"},"mobile"===TK.SDKTYPE?void 0:h.default.language.languageData.header.tool.shape.filledCircle.text))))):void 0,b&&"mobile"===TK.SDKTYPE?c.default.createElement("li",{className:"tool-li tl-colors "+("whiteboard_tool_vessel_colors"===B?"active more":""),id:"whiteboard_tool_vessel_colors",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_colors"),style:{display:b?void 0:"none"}},c.default.createElement("button",{className:"header-tool  tool-colors   tool-more",title:h.default.language.languageData.header.tool.colors.title,id:"tool_colors_list",onClick:e.selectExtendExtraTool.bind(e,{extendToolId:"whiteboard_tool_vessel_colors"})},c.default.createElement("span",{className:"tool-img-wrap",style:{background:"#"+this.state.selectColor}})),c.default.createElement("div",{className:"header-tool-extend tool-colors-extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("ul",{className:"clear-float"},c.default.createElement("li",{className:"simple-color-000000 "+("simple_color_000000"===e.state.useStrokeColor?"active":""),onClick:e.changeStrokeColorClick.bind(e,"simple_color_000000","000000"),id:"mobile_simple_color_000000"},c.default.createElement("span",{className:"add-nowrap",style:{backgroundColor:"#000000"}})),c.default.createElement("li",{className:"simple-color-ff0001 "+("simple_color_ff0001"===e.state.useStrokeColor?"active":""),onClick:e.changeStrokeColorClick.bind(e,"simple_color_ff0001","ff0001"),id:"mobile_simple_color_ff0001"},c.default.createElement("span",{className:"add-nowrap",style:{backgroundColor:"#ff0001"}})),c.default.createElement("li",{className:"simple-color-fcd000 "+("simple_color_fcd000"===e.state.useStrokeColor?"active":""),onClick:e.changeStrokeColorClick.bind(e,"simple_color_fcd000","fcd000"),id:"mobile_simple_color_fcd000"},c.default.createElement("span",{className:"add-nowrap",style:{backgroundColor:"#fcd000"}})),c.default.createElement("li",{className:"simple-color-0488f8 "+("simple_color_0488f8"===e.state.useStrokeColor?"active":""),onClick:e.changeStrokeColorClick.bind(e,"simple_color_0488f8","0488f8"),id:"mobile_simple_color_0488f8"},c.default.createElement("span",{className:"add-nowrap",style:{backgroundColor:"#0488f8"}}))))):void 0,y&&"mobile"===TK.SDKTYPE?c.default.createElement("li",{className:"tool-li tl-measure "+("whiteboard_tool_vessel_measure"===B?"active more":""),id:"whiteboard_tool_vessel_measure",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_measure"),style:{display:y?void 0:"none"}},c.default.createElement("button",{className:"header-tool  tool-measure  tool-more",title:h.default.language.languageData.header.tool.measure.title,id:"tool_measure_list",onClick:e.selectExtendExtraTool.bind(e,{extendToolId:"whiteboard_tool_vessel_measure"})},c.default.createElement("span",{className:"tool-img-wrap"},c.default.createElement("em",{style:{width:("tool_color_measure_small"===x?.1:"tool_color_measure_middle"===x?.2:.3)+"rem",height:("tool_color_measure_small"===x?.1:"tool_color_measure_middle"===x?.2:.3)+"rem"}}))),c.default.createElement("div",{className:"header-tool-extend tool-measure-extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("ul",{className:"clear-float"},c.default.createElement("li",{id:"tool_color_measure_small",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_small",{pencil:5,text:25,eraser:50,shape:5}),className:"h-tool-measure-mobile h-tool-measure-small-mobile "+("tool_color_measure_small"===x?"active":"")},c.default.createElement("span",{className:"add-nowrap",style:{width:"0.1rem",height:"0.1rem"}})),c.default.createElement("li",{id:"tool_color_measure_middle",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_middle",{pencil:15,text:50,eraser:100,shape:15}),className:"h-tool-measure-mobile h-tool-measure-middle-mobile "+("tool_color_measure_middle"===x?"active":"")},c.default.createElement("span",{className:"add-nowrap",style:{width:"0.2rem",height:"0.2rem"}})),c.default.createElement("li",{id:"tool_color_measure_big",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_big",{pencil:30,text:100,eraser:200,shape:30}),className:"h-tool-measure-mobile h-tool-measure-big-mobile "+("tool_color_measure_big"===x?"active":"")},c.default.createElement("span",{className:"add-nowrap",style:{width:"0.3rem",height:"0.3rem"}}))))):void 0,p?c.default.createElement("li",{className:"tool-li tl-undo",id:"whiteboard_tool_vessel_undo",style:{display:p?void 0:"none"}},c.default.createElement("button",{disabled:w.disabled,className:"header-tool not-active "+(w.disabled?"disabled":""),id:"tool_operation_undo",title:h.default.language.languageData.header.tool.undo.title,onClick:e.useWhiteboardAction.bind(e,{actionId:"action_undo"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,g?c.default.createElement("li",{className:"tool-li tl-redo",id:"whiteboard_tool_vessel_redo",style:{display:g?void 0:"none"}},c.default.createElement("button",{
disabled:k.disabled,className:"header-tool not-active "+(k.disabled?"disabled":""),id:"tool_operation_redo",title:h.default.language.languageData.header.tool.redo.title,onClick:e.useWhiteboardAction.bind(e,{actionId:"action_redo"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,m?c.default.createElement("li",{className:"tool-li tl-eraser "+("tool_eraser"===P?"active":""),id:"whiteboard_tool_vessel_eraser",style:{display:m?void 0:"none"}},c.default.createElement("button",{className:"header-tool tool-eraser",title:h.default.language.languageData.header.tool.eraser.title,id:"tool_eraser",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_eraser"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,f?c.default.createElement("li",{className:"tool-li tl-clear",id:"whiteboard_tool_vessel_clear",style:{display:f?void 0:"none"}},c.default.createElement("button",{disabled:T.disabled,className:"header-tool not-active "+(T.disabled?"disabled":""),id:"tool_operation_clear",title:h.default.language.languageData.header.tool.clear.title,onClick:e.useWhiteboardAction.bind(e,{actionId:"action_clear"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,v?c.default.createElement("li",{className:"tool-li tl-color "+("whiteboard_tool_vessel_color_strokesize"===B?"active more":""),id:"whiteboard_tool_vessel_color_strokesize",onMouseLeave:e.allLiMouseLeave.bind(e,"whiteboard_tool_vessel_color_strokesize"),style:{display:v?void 0:"none"}},c.default.createElement("button",{className:"header-tool",id:"tool_stroke_color_vessel",title:h.default.language.languageData.header.tool.colorAndMeasure.title,onClick:e.selectExtendExtraTool.bind(e,{extendToolId:"whiteboard_tool_vessel_color_strokesize"})},c.default.createElement("span",{id:"tool_stroke_color",className:"tool-img-wrap h-tool-color no-hover"},c.default.createElement("span",{"data-curr-type":"simple","data-curr-color":"000000",className:"tool-color-show tk-tool-color",id:"header_curr_color",style:{backgroundColor:"#"+e.state.selectColor}},c.default.createElement("span",{className:"tool_triangle"})))),c.default.createElement("div",{className:"header-tool-extend tool-color-extend clear-float tk-tool-color-extend",style:{right:t>1.45||0==t?"100%":void 0,left:t<1.4&&"number"==typeof t?"100%":void 0}},c.default.createElement("div",{className:"tool-measure-container add-fl",id:"tool_measure"},c.default.createElement("div",{className:"h-tool-measure-title"},c.default.createElement("span",null,h.default.language.languageData.header.tool.colorAndMeasure.selectMeasure)),c.default.createElement("div",{id:"tool_color_measure_small",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_small",{pencil:5,text:18,eraser:30,shape:5}),className:"h-tool-measure h-tool-measure-small "+("tool_color_measure_small"===x?"active":"")},c.default.createElement("span",null)),c.default.createElement("div",{id:"tool_color_measure_middle",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_middle",{pencil:15,text:36,eraser:90,shape:15}),className:"h-tool-measure h-tool-measure-middle "+("tool_color_measure_middle"===x?"active":"")},c.default.createElement("span",null)),c.default.createElement("div",{id:"tool_color_measure_big",onClick:e.changeStrokeSizeClick.bind(e,"tool_color_measure_big",{pencil:30,text:72,eraser:150,shape:30}),className:"h-tool-measure h-tool-measure-big "+("tool_color_measure_big"===x?"active":"")},c.default.createElement("span",null))),c.default.createElement("div",{className:"tool-color-container add-fl"},c.default.createElement("div",{className:"header-tool-extend-option-wrap  header-tool-extend-option-color "},c.default.createElement("div",{className:"h-tool-extend-option-title"},h.default.language.languageData.header.tool.colorAndMeasure.selectColorText),c.default.createElement("div",{className:"h-tool-extend-option-content"},c.default.createElement("div",{className:"h-curr-color-wrap",id:"header_curr_select_color"},c.default.createElement("span",{className:"h-curr-color",style:{backgroundColor:"#"+this.state.selectColor}})),c.default.createElement("div",{className:"h-color-list-wrap clear-float",id:"header_color_list"},c.default.createElement("div",{className:"h-color-simple add-fl"},c.default.createElement("ul",{className:"clear-float"},n)),c.default.createElement("div",{className:"h-color-more add-fl"},r))))))):void 0):c.default.createElement("ol",{className:"add-fl clear-float h-tool tool-whiteboard-container phone ",id:"header_tool_vessel",style:{display:e.state.show?"":"none"}}," ",o?c.default.createElement("li",{className:"tool-li tl-mouse "+("tool_mouse"===P?"active":""),id:"whiteboard_tool_vessel_mouse",style:{display:o?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.mouse.title,id:"tool_mouse",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_mouse"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,l?c.default.createElement("li",{className:"tool-li tl-pencil "+("tool_pencil"===P?"active":""),id:"whiteboard_tool_vessel_pencil",style:{display:l?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.pencil.title,id:"tool_pencil",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_pencil"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,d?c.default.createElement("li",{className:"tool-li tl-text "+("tool_text"===P?"active":""),id:"whiteboard_tool_vessel_text",style:{display:d?void 0:"none"}},c.default.createElement("button",{className:"header-tool",title:h.default.language.languageData.header.tool.text.title,id:"tool_text",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_text"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,m?c.default.createElement("li",{className:"tool-li tl-eraser "+("tool_eraser"===P?"active":""),id:"whiteboard_tool_vessel_eraser",style:{display:m?void 0:"none"}},c.default.createElement("button",{className:"header-tool tool-eraser",title:h.default.language.languageData.header.tool.eraser.title,id:"tool_eraser",onClick:e.selectCurrentUseTool.bind(e,{toolId:"tool_eraser"})},c.default.createElement("span",{className:"tool-img-wrap"}))):void 0,b?c.default.createElement("li",{className:"tool-li  tl-color simple-color-000000 "+("simple_color_000000"===e.state.useStrokeColor?"active":""),id:"whiteboard_tool_vessel_color_000000",style:{display:b?void 0:"none"}},c.default.createElement("button",{className:"header-tool",id:"tool_color_000000",onClick:e.changeStrokeColorClick.bind(e,"simple_color_000000","000000")},c.default.createElement("span",{className:"tool-img-wrap",style:{backgroundColor:"#000000"}}))):void 0,b?c.default.createElement("li",{className:"tool-li tl-color  simple-color-ff0001 "+("simple_color_ff0001"===e.state.useStrokeColor?"active":""),id:"whiteboard_tool_vessel_color_ff0001",style:{display:b?void 0:"none"}},c.default.createElement("button",{className:"header-tool",id:"tool_color_ff0001",onClick:e.changeStrokeColorClick.bind(e,"simple_color_ff0001","ff0001")},c.default.createElement("span",{className:"tool-img-wrap",style:{backgroundColor:"#ff0001"}}))):void 0,b?c.default.createElement("li",{className:"tool-li  tl-color simple-color-fcd000 "+("simple_color_fcd000"===e.state.useStrokeColor?"active":""),id:"whiteboard_tool_vessel_color_fcd000",style:{display:b?void 0:"none"}},c.default.createElement("button",{className:"header-tool",id:"tool_color_fcd000",onClick:e.changeStrokeColorClick.bind(e,"simple_color_fcd000","fcd000")},c.default.createElement("span",{className:"tool-img-wrap",style:{backgroundColor:"#fcd000"}}))):void 0,b?c.default.createElement("li",{className:"tool-li  tl-color simple-color-0488f8 "+("simple_color_0488f8"===e.state.useStrokeColor?"active":""),id:"whiteboard_tool_vessel_color_0488f8",style:{display:b?void 0:"none"}},c.default.createElement("button",{className:"header-tool",id:"tool_color_0488f8",onClick:e.changeStrokeColorClick.bind(e,"simple_color_0488f8","0488f8")},c.default.createElement("span",{className:"tool-img-wrap",style:{backgroundColor:"#0488f8"}}))):void 0))}}]),t}(c.default.Component);t.default=T,e.exports=t.default}).call(t,a(32))},270:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(12),s=n(o),l=a(22),d=n(l),c=a(20),u=n(c),h=a(18),p=n(h),g=function(){function e(){r(this,e)}return i(e,[{key:"pubMsg",value:function(e,t,a,n,r,i,o,l){if(u.default.handler.getAppPermissions("pubMsg")&&s.default.appConnected){a=a||"__all";var c=!r;n&&"object"==typeof n&&(n=JSON.stringify(n)),d.default.getTkRoom().pubMsg(e,t,a,n,c,i,o,l)}}},{key:"delMsg",value:function(e,t,a,n){u.default.handler.getAppPermissions("delMsg")&&s.default.appConnected&&(a=a||"__all",n&&"object"==typeof n&&(n=JSON.stringify(n)),d.default.getTkRoom().delMsg(e,t,a,n))}},{key:"setProperty",value:function(e,t,a){u.default.handler.getAppPermissions("setProperty")&&s.default.appConnected&&(t=t||"__all",d.default.getTkRoom().changeUserProperty(e,t,a))}},{key:"setParticipantPropertyToAll",value:function(e,t){if(u.default.handler.getAppPermissions("setParticipantPropertyToAll")){var a=this,n="__all",r=d.default.getTkRoom().getUsers()[e];return r?void((r.role===p.default.role.roleChairman||r.role===p.default.role.roleStudent||r.role===p.default.role.roleTeachingAssistant&&p.default.joinRoomInfo.assistantOpenMyseftAV||!t||void 0==t.publishstate)&&a.setProperty(e,n,t)):void L.Logger.error("user is not exist  , user id is "+e+"!")}}},{key:"sendSignallingDataToParticipant",value:function(e,t,a,n,r,i,o,s,l){if(u.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,a,n,r):d.pubMsg(t,a,n,r,i,o,s,l)}}},{key:"sendTextMessage",value:function(e,t){u.default.handler.getAppPermissions("sendTextMessage")&&s.default.appConnected&&e&&(t=t||"__all",e&&"object"==typeof e&&(e=JSON.stringify(e)),d.default.getTkRoom().sendMessage(e,t))}}]),e}();t.default=g,e.exports=t.default},271:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(2),i=n(r),o=a(36),s=n(o),l=a(168),d=a(20),c=n(d),u=a(251),h=n(u);c.default.handler.loadSystemRequiredInfo(),s.default.render(i.default.createElement(l.Router,{history:l.hashHistory},i.default.createElement(l.Route,{path:"/",component:h.default}),i.default.createElement(l.Route,{path:"/mobile",component:h.default}),i.default.createElement(l.Route,{path:"/mobileApp",component:h.default})),document.getElementById("tk_app"))},272:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(18),s=n(o),l=a(22),d=(n(l),a(118)),c=n(d),u=a(10),h=(n(u),a(12)),p=n(h),g=a(20),m=(n(g),function(){function e(t){r(this,e),this.role=t}return i(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||c.default.productionDefaultAppAppPermissions();if(s.default.joinRoomInfo&&void 0!=s.default.joinRoomInfo.roomrole)switch(s.default.joinRoomInfo.roomrole){case s.default.role.roleChairman:if(p.default.classBegin){var a=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;t[l]=!0}}catch(e){n=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}Object.assign(t,{raisehand:!1,dialCircleClick:!1})}else Object.assign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0,endClassbeginRevertToStartupLayout:!0});break;case s.default.role.roleTeachingAssistant:if(p.default.classBegin){var d=!0,u=!1,h=void 0;try{for(var g,m=Object.keys(t)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var l=g.value;t[l]=!0}}catch(e){u=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw h}}Object.assign(t,{laser:!1,endClassbeginRevertToStartupLayout:!1})}else Object.assign(t,{dynamicPptActionClick:!0,whiteboardPagingPage:!0,newpptPagingPage:!0,h5DocumentPagingPage:!0,jumpPage:!0,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,h5DocumentActionClick:!0});break;case s.default.role.rolePatrol:p.default.classBegin?Object.assign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1}):Object.assign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,whiteboardPagingPage:!1,newpptPagingPage:!1,h5DocumentPagingPage:!1});break;case s.default.role.roleStudent:p.default.classBegin?Object.assign(t,{whiteboardPagingPage:s.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:s.default.joinRoomInfo.isSupportPageTrun,jumpPage:s.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromSharpsChange:!0}):Object.assign(t,{whiteboardPagingPage:s.default.joinRoomInfo.isSupportPageTrun,newpptPagingPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentPagingPage:s.default.joinRoomInfo.isSupportPageTrun,jumpPage:s.default.joinRoomInfo.isSupportPageTrun,h5DocumentActionClick:s.default.joinRoomInfo.isSupportPageTrun,dynamicPptActionClick:s.default.joinRoomInfo.isSupportPageTrun,sendSignallingFromShowPage:!0,sendSignallingFromDynamicPptShowPage:!0,sendSignallingFromH5ShowPage:!0,sendSignallingFromGeneralShowPage:!0,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0});break;case s.default.role.rolePlayback:p.default.classBegin?Object.assign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1}):Object.assign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1});break;case s.default.role.roleAudit:var f=!0,v=!1,b=void 0;try{for(var y,S=Object.keys(t)[Symbol.iterator]();!(f=(y=S.next()).done);f=!0){var l=y.value;t[l]=!1}}catch(e){v=!0,b=e}finally{try{!f&&S.return&&S.return()}finally{if(v)throw b}}Object.assign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),f=new m;f.addEventListenerToRoomHandler(),t.default=f,e.exports=t.default},273:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=(a(168),a(10)),d=r(l),c=a(18),u=r(c),h=a(19),p=r(h),g=a(272),m=r(g),f=a(20),v=(r(f),a(117)),b=(r(v),a(12)),y=r(b),S=a(22),T=r(S),k=a(24),w=(r(k),a(116)),C=(r(w),a(118)),P=r(C),D=a(115),_=r(D),A=function(){function e(t){i(this,e),this.room=t}return s(e,[{key:"registerEventToRoom",value:function(){var e=function(e){T.default.getTkRoom().addEventListener(u.default.EVENTTYPE.RoomEvent[e],function(t){var a=!0;"stream-rtcStats"===t.type&&(a=!1),a&&L.Logger.debug(u.default.EVENTTYPE.RoomEvent[e]+" event:",t),d.default.Room.dispatchEvent(t,!1)})};for(var t in u.default.EVENTTYPE.RoomEvent)e(t)}},{key:"addEventListenerToRoomHandler",value:function(){var e=this,t=function(t){d.default.Room.addEventListener(u.default.EVENTTYPE.RoomEvent[t],function(a){if(e["handler"+p.default.replaceFirstUper(t)]&&"function"==typeof e["handler"+p.default.replaceFirstUper(t)]){var n=e["handler"+p.default.replaceFirstUper(t)](a);if(n)return}var r=!0;"stream-rtcStats"===a.type&&(r=!1),d.default.CoreController.dispatchEvent(a,r)})};for(var a in u.default.EVENTTYPE.RoomEvent)t(a)}},{key:"handlerRoomPubmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;switch(y.default.serviceTime||(y.default.serviceTime=1e3*a.ts,y.default.remindServiceTime=1e3*a.ts),a.name){case"ClassBegin":y.default.serviceTime=p.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,y.default.remindServiceTime=p.default.isMillisecondClass(a.ts)?a.ts:1e3*a.ts,t._classBeginStartHandler(a);break;case"UpdateTime":y.default.serviceTime=1e3*a.ts,y.default.remindServiceTime=1e3*a.ts,y.default.firstGetServiceTime||y.default.isHandleMsglistFromRoomPubmsg||!y.default.signallingMessageList||(y.default.firstGetServiceTime=!0,d.default.Room.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomMsglist,message:y.default.signallingMessageList,source:"roomPubmsg"}),y.default.signallingMessageList=null,delete y.default.signallingMessageList);break;case"SharpsChange":_.default.handlerPubmsg_SharpsChange(a);break;case"StreamFailure":L.Logger.info("StreamFailure signalling:"+JSON.stringify(a))}if("sendNetworkState"===a.name||"BlackBoardDrag"===a.name||"videoDraghandle"===a.name)return!0}},{key:"handlerRoomDelmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var a=e.message;switch(a.name){case"ClassBegin":t._classBeginEndHandler(a);break;case"SharpsChange":_.default.handlerDelmsg_SharpsChange(a)}}},{key:"handlerRoomConnected",value:function(e){this._bindInfoToTkConstant(),y.default.firstGetServiceTime=!1,y.default.isHandleMsglistFromRoomPubmsg=!1,y.default.appConnected=!0;var t=m.default.getRoleHasDefalutAppPermissions();P.default.initAppPermissions(t);var a=e.message;y.default.signallingMessageList=a,d.default.Room.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomMsglist,message:y.default.signallingMessageList,source:"roomConnected"}),y.default.serviceTime&&!y.default.firstGetServiceTime&&!y.default.isHandleMsglistFromRoomPubmsg&&y.default.signallingMessageList&&(y.default.firstGetServiceTime=!0,d.default.Room.dispatchEvent({type:u.default.EVENTTYPE.RoomEvent.roomMsglist,message:y.default.signallingMessageList,source:"roomPubmsg"}),y.default.signallingMessageList=null,delete y.default.signallingMessageList),y.default.windowInnerWidth/u.default.STANDARDSIZE,n(window).resize()}},{key:"handlerRoomDisconnected",value:function(e){y.default.appConnected=!1,y.default.classBegin=!1,y.default.serviceTime=void 0,y.default.remindServiceTime=void 0,y.default.signallingMessageList=null,delete y.default.signallingMessageList,y.default.isHandleMsglistFromRoomPubmsg=!1,y.default.participantGiftNumberJson={}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,a=e.user,n=!0,r=!1,i=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=o(s.value,2),c=d[0],h=d[1];a.id===T.default.getTkRoom().getMySelf().id&&"candraw"===c&&(P.default.setAppPermissions("sendSignallingFromShowPage",h),P.default.setAppPermissions("sendSignallingFromH5ShowPage",h),P.default.setAppPermissions("sendSignallingFromDynamicPptShowPage",h),P.default.setAppPermissions("sendSignallingFromGeneralShowPage",h),P.default.setAppPermissions("sendSignallingFromDynamicPptTriggerActionClick",h),P.default.setAppPermissions("sendSignallingFromH5DocumentAction",h),P.default.setAppPermissions("sendWhiteboardMarkTool",h),P.default.setAppPermissions("h5DocumentActionClick",h),P.default.setAppPermissions("dynamicPptActionClick",h),P.default.setAppPermissions("publishDynamicPptMediaPermission_video",h),P.default.setAppPermissions("canDraw",h),u.default.hasRole.roleStudent&&(P.default.setAppPermissions("whiteboardPagingPage",h?h:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("newpptPagingPage",h?h:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("h5DocumentPagingPage",h?h:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("jumpPage",h?h:u.default.joinRoomInfo.isSupportPageTrun)))}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}}},{key:"handlerRoomMsglist",value:function(e){var t=this,a=function(e,a,n){var r={};for(var i in e)n&&n[e[i].name]||(e[i].data&&"string"==typeof e[i].data&&(e[i].data=JSON.parse(e[i].data)),/outIframe/.test(e[i].name)?d.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[i]}}):null==r[e[i].name]||void 0==r[e[i].name]?(r[e[i].name]=[],r[e[i].name].push(e[i])):r[e[i].name].push(e[i]));if("roomConnected"===a){var o=r.ClassBegin;null!=o&&void 0!=o&&o.length>0?"ClassBegin"==o[o.length-1].name&&(t._classBeginStartHandler(o[o.length-1]),d.default.CoreController.dispatchEvent({type:"receive-msglist-ClassBegin",source:"room-msglist",message:o[o.length-1]})):d.default.CoreController.dispatchEvent({type:"receive-msglist-not-ClassBegin",source:"room-msglist",message:{}}),r.ClassBegin=null}else if("roomPubmsg"===a){var s=r.whiteboardMarkTool;null!=s&&void 0!=s&&s.length>0&&"whiteboardMarkTool"==s[s.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-whiteboardMarkTool",source:"room-msglist",message:s[s.length-1]}),r.whiteboardMarkTool=null;var l=r.SharpsChange;null!=l&&void 0!=l&&l.length>0&&_.default.handlerMsglist_SharpsChange(l),r.SharpsChange=null;var c=r.DialDrag;null!==c&&void 0!==c&&c.length>0&&d.default.CoreController.dispatchEvent({type:"receive-msglist-DialDrag",message:{DialDragArray:c}}),r.DialDrag=null;var u=r.TimerDrag;null!==u&&void 0!==u&&u.length>0&&d.default.CoreController.dispatchEvent({type:"receive-msglist-TimerDrag",message:{TimerDragArray:u}}),r.TimerDrag=null;var h=r.AnswerDrag;null!==h&&void 0!==h&&h.length>0&&d.default.CoreController.dispatchEvent({type:"receive-msglist-AnswerDrag",message:{AnswerDragArray:h}}),r.AnswerDrag=null;var p=r.WBPageCount;null!=p&&void 0!=p&&p.length>0&&"WBPageCount"==p[p.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-WBPageCount",source:"room-msglist",message:p[p.length-1]}),r.WBPageCount=null;var g=r.timer;null!=g&&void 0!=g&&g.length>0&&"timer"==g[g.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-timer",source:"room-msglist",message:{timerShowArr:g}}),r.timer=null;var m=r.dial;null!=m&&void 0!=m&&m.length>0&&"dial"==m[m.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-dial",source:"room-msglist",message:{dialShowArr:m}}),r.dial=null;var f=r.answer;null!=f&&void 0!=f&&f.length>0&&"answer"==f[f.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-answer",source:"room-msglist",message:{answerShowArr:f}}),r.answer=null;var v=r.submitAnswers;null!=v&&void 0!=v&&v.length>0&&"submitAnswers"==v[v.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-submitAnswers",source:"room-msglist",message:{submitAnswersArr:v}}),r.submitAnswers=null;var b=r.qiangDaQi;null!=b&&void 0!=b&&b.length>0&&"qiangDaQi"==b[b.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-qiangDaQi",source:"room-msglist",message:{qiangDaQiArr:b}}),r.qiangDaQi=null;var S=r.QiangDaZhe;null!=S&&void 0!=S&&S.length>0&&"QiangDaZhe"==S[S.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-QiangDaZhe",source:"room-msglist",message:{QiangDaZheArr:S}}),r.QiangDaZhe=null;var T=r.BlackBoard;null!=T&&void 0!=T&&T.length>0&&"BlackBoard"==T[T.length-1].name&&d.default.CoreController.dispatchEvent({type:"receive-msglist-BlackBoard",source:"room-msglist",message:T[T.length-1]}),r.BlackBoard=null;var k=null,w=r.ShowPage;if(null!=w&&void 0!=w&&w.length>0)for(var C=0;C<w.length;C++)w[C].data.isMedia||(k=w[C]);r.ShowPage=null,void 0!=k&&null!=k&&(L.Logger.debug("receive-msglist-ShowPage-lastDocument info:",k),d.default.CoreController.dispatchEvent({type:"receive-msglist-ShowPage-lastDocument",message:{data:k.data,source:"room-msglist"}})),y.default.isHandleMsglistFromRoomPubmsg=!0}},n=e.message,r=e.source,i={};a(n,r,i)}},{key:"_classBeginStartHandler",value:function(e){y.default.classBeginTime=p.default.isMillisecondClass(e.ts)?e.ts:1e3*e.ts,y.default.classBegin=!0;var t=m.default.getRoleHasDefalutAppPermissions();P.default.initAppPermissions(t);var a=T.default.getTkRoom().getMySelf().candraw;P.default.setAppPermissions("sendSignallingFromShowPage",a),P.default.setAppPermissions("sendSignallingFromH5ShowPage",a),P.default.setAppPermissions("sendSignallingFromDynamicPptShowPage",a),P.default.setAppPermissions("sendSignallingFromGeneralShowPage",a),P.default.setAppPermissions("sendSignallingFromDynamicPptTriggerActionClick",a),P.default.setAppPermissions("sendSignallingFromH5DocumentAction",a),P.default.setAppPermissions("sendWhiteboardMarkTool",a),P.default.setAppPermissions("h5DocumentActionClick",a),P.default.setAppPermissions("dynamicPptActionClick",a),P.default.setAppPermissions("publishDynamicPptMediaPermission_video",a),P.default.setAppPermissions("canDraw",a),u.default.hasRole.roleStudent&&(P.default.setAppPermissions("whiteboardPagingPage",a?a:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("newpptPagingPage",a?a:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("h5DocumentPagingPage",a?a:u.default.joinRoomInfo.isSupportPageTrun),P.default.setAppPermissions("jumpPage",a?a:u.default.joinRoomInfo.isSupportPageTrun))}},{key:"_classBeginEndHandler",value:function(e){y.default.classBegin=!1,y.default.endClassBegin=!0;var t=m.default.getRoleHasDefalutAppPermissions();P.default.initAppPermissions(t)}},{key:"_bindInfoToTkConstant",value:function(){var e=p.default.decrypt(u.default.SERVICEINFO.joinUrl)||window.location.href,t=T.default.getTkRoom().getRoomProperties().chairmancontrol,a={starttime:T.default.getTkRoom().getRoomProperties().starttime,endtime:T.default.getTkRoom().getRoomProperties().endtime,nickname:T.default.getTkRoom().getMySelf().nickname,thirdid:T.default.getTkRoom().getMySelf().id,joinUrl:p.default.encrypt(e),serial:T.default.getTkRoom().getRoomProperties().serial,roomrole:Number(T.default.getTkRoom().getMySelf().role),roomtype:Number(T.default.getTkRoom().getRoomProperties().roomtype),companyid:Number(T.default.getTkRoom().getRoomProperties().companyid),isSupportPageTrun:!!t&&1==Number(t.substr(38,1)),roomname:T.default.getTkRoom().getRoomProperties().roomname};u.default.bindRoomInfoToTkConstant(a),u.default.bindParticipantHasRoleToTkConstant(),u.default.bindParticipantHasRoomtypeToTkConstant()}}]),e}(),E=new A;E.addEventListenerToRoomHandler(),t.default=E,e.exports=t.default}).call(t,a(32))},274:function(e,t,a){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(32),o=r(i);window.$=o.default,n=o.default,t.default=o.default,e.exports=t.default}).call(t,a(32))},275:function(e,t){"use strict";var a={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=a},276:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"小白板",close:"关闭",prev:"上一位",next:"下一位",shrink:"缩小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分发",recycle:"回收",againDispenseed:"再次分发",commonTeacher:"老师"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"笔",text:"文字",eraser:"橡皮",color:"颜色及粗细"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠标"},pencil:{title:"笔",pen:{text:"铅笔工具"},Highlighter:{text:"荧光笔工具"},linellae:{text:"线条工具"},arrow:{text:"箭头工具"},laser:{title:"激光笔",text:"激光笔工具"}},text:{title:"文字",Msyh:{text:"微软雅黑"},Ming:{text:"宋体"},Arial:{text:"Arial"}},shape:{title:"形状",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心椭圆"},filledCircle:{text:"椭圆"}},eraser:{title:"橡皮擦"},undo:{title:"撤销"},redo:{title:"恢复"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"缩小"},tool_rotate_left:{title:"逆时针旋转"},tool_rotate_right:{title:"顺时针旋转"},colorAndMeasure:{title:"颜色及粗细",selectColorText:"选择颜色",selectMeasure:"选择粗细"},colors:{title:"颜色"},measure:{title:"粗细"}},page:{prev:{text:"上一页"},next:{text:"下一页"},add:{text:"加页"},lcFullBtn:{title:"绘制区域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5课件全屏"},skipPage:{text_one:"至第",text_two:"页"},ok:{text:"确定"}}},alertWin:{ok:{showError:{text:"确定"},showPrompt:{text:"确定"},showConfirm:{cancel:"取消",ok:"确定"}},title:{showError:{text:"错误信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"确认消息"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"计时器"},timerBegin:{text:"开始"},timerStop:{text:"暂停"},again:{text:"重新开始"}},dial:{turntable:{text:"转盘"}},answers:{headerTopLeft:{text:"答题器"},headerMiddel:{text:"点击字母预设正确答案"},beginAnswer:{text:"开始答题"},tureAccuracy:{text:"正确率"},trueAnswer:{text:"正确答案"},endAnswer:{text:"结束答题"},restarting:{text:"重新开始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"请至少选择一个答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答题人数"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"详情"},statistics:{text:"统计"},student:{text:"学生"},TheSelectedTheAnswer:{text:"所选答案"},AnswerTime:{text:"答题用时"},end:{text:"请先结束答题"}},responder:{responder:{text:"抢答器"},begin:{text:"开始抢答"},restart:{text:"重新开始"},close:{text:"关闭"},update:{text:"当前浏览器不支持canvas组件请升级！"},inAnswer:{text:"抢答中"},answer:{text:"抢答"},noContest:{text:"无人抢答"}},call:{fun:{page:{pageInteger:{text:"输入的页数必须是整数！"},pageMax:{text:"输入的页数不能超过最大页数！"},pageMin:{text:"输入的页数不能小于1"}}}}};t.default=a,e.exports=t.default},277:function(e,t){"use strict";
Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"小白板",close:"關閉",prev:"上壹位",next:"下壹位",shrink:"縮小"},content:{blackboardHeadTitle:"小白板"},toolBtn:{dispenseed:"分發",recycle:"回收",againDispenseed:"再次分發",commonTeacher:"老師"},tip:{saveImage:"是否保存白板"},boardTool:{pen:"筆",text:"文字",eraser:"橡皮",color:"顏色及粗細"}},sharing:{title:"屏幕共享"},mouse:{title:"鼠標"},pencil:{title:"筆",pen:{text:"鉛筆工具"},Highlighter:{text:"熒光筆工具"},linellae:{text:"線條工具"},arrow:{text:"箭頭工具"},laser:{title:"激光筆",text:"激光筆工具"}},text:{title:"文字",Msyh:{text:"微軟雅黑"},Ming:{text:"宋體"},Arial:{text:"Arial"}},shape:{title:"形狀",outlinedRectangle:{text:"空心矩形"},filledRectangle:{text:"矩形"},outlinedCircle:{text:"空心橢圓"},filledCircle:{text:"橢圓"}},eraser:{title:"橡皮擦"},undo:{title:"撤銷"},redo:{title:"恢復"},clear:{title:"清屏"},tool_zoom_big:{title:"放大"},tool_zoom_small:{title:"縮小"},tool_rotate_left:{title:"逆時針旋轉"},tool_rotate_right:{title:"順時針旋轉"},colorAndMeasure:{title:"顏色及粗細",selectColorText:"選擇顏色",selectMeasure:"選擇粗細"},colors:{title:"顏色"},measure:{title:"粗細"}},page:{prev:{text:"上壹頁"},next:{text:"下壹頁"},add:{text:"加頁"},lcFullBtn:{title:"繪制區域全屏"},pptFullBtn:{title:"PPT全屏"},h5FileFullBtn:{title:"h5課件全屏"},skipPage:{text_one:"至第",text_two:"頁"},ok:{text:"確定"}}},alertWin:{ok:{showError:{text:"確定"},showPrompt:{text:"確定"},showConfirm:{cancel:"取消",ok:"確定"}},title:{showError:{text:"錯誤信息"},showPrompt:{text:"提示信息"},showConfirm:{text:"確認消息"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}},toolCase:{toolBox:{text:"工具箱"}},timers:{timerSetInterval:{text:"計時器"},timerBegin:{text:"開始"},timerStop:{text:"暫停"},again:{text:"重新開始"}},dial:{turntable:{text:"轉盤"}},answers:{headerTopLeft:{text:"答題器"},headerMiddel:{text:"點擊字母預設正確答案"},beginAnswer:{text:"開始答題"},tureAccuracy:{text:"正確率"},trueAnswer:{text:"正確答案"},endAnswer:{text:"結束答題"},restarting:{text:"重新開始"},myAnswer:{text:"我的答案"},changeAnswer:{text:"修改答案"},selectAnswer:{text:"請至少選擇壹個答案"},submitAnswer:{text:"提交答案"},numberOfAnswer:{text:"答題人數"},PublishTheAnswer:{text:"公布答案"},published:{text:"已公布"},details:{text:"詳情"},statistics:{text:"統計"},student:{text:"學生"},TheSelectedTheAnswer:{text:"所選答案"},AnswerTime:{text:"答題用時"},end:{text:"請先結束答題"}},responder:{responder:{text:"搶答器"},begin:{text:"開始搶答"},restart:{text:"重新開始"},close:{text:"關閉"},update:{text:"當前瀏覽器不支持canvas組件請升級！"},inAnswer:{text:"搶答中"},answer:{text:"搶答"},noContest:{text:"無人搶答"}},call:{fun:{page:{pageInteger:{text:"輸入的頁數必須是整數！"},pageMax:{text:"輸入的頁數不能超過最大頁數！"},pageMin:{text:"輸入的頁數不能小於1"}}}}};t.default=a,e.exports=t.default},278:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={header:{tool:{blackBoard:{title:{open:"Small Whiteboard",close:"Close",prev:"Previous one",next:"Next person",shrink:"Shrink"},content:{blackboardHeadTitle:"Small Whiteboard"},toolBtn:{dispenseed:"Send",recycle:"Take Back",againDispenseed:"Again Send",commonTeacher:"Teacher"},tip:{saveImage:"Save Image"},boardTool:{pen:"Pen",text:"Text Input",eraser:"Eraser",color:"Colors and Thickness"}},sharing:{title:"Sharing"},mouse:{title:"Mouse"},pencil:{title:"Pen",pen:{text:"Pencils"},Highlighter:{text:"Highlighters"},linellae:{text:"Lines"},arrow:{text:"Arrows"},laser:{title:"Laser pen",text:"Laser pen"}},text:{title:"Text Input",Msyh:{text:"Microsoft YaHei"},Ming:{text:"SimSun"},Arial:{text:"Arial"}},shape:{title:"Shapes",outlinedRectangle:{text:"Squares"},filledRectangle:{text:"Solid Squares"},outlinedCircle:{text:"Circles"},filledCircle:{text:"Solid Circles"}},eraser:{title:"Eraser"},undo:{title:"Undo"},redo:{title:"Recover"},clear:{title:" Clear Screen"},tool_zoom_big:{title:"Zoom In"},tool_zoom_small:{title:"Zoom Out"},tool_rotate_left:{title:"Contrarotate"},tool_rotate_right:{title:"Clockwise rotation"},colorAndMeasure:{title:"Colors and Thickness",selectColorText:"select Colour",selectMeasure:"select Thickness"},colors:{title:"Colors"},measure:{title:"Thickness"}},page:{prev:{text:"Previous Page"},next:{text:"Next Page"},add:{text:"Add Page"},lcFullBtn:{title:"Full Screen of Drawing Area"},pptFullBtn:{title:"Full Screen  of PPT"},h5FileFullBtn:{title:"Full Screen  of Courseware"},skipPage:{text_one:"To ",text_two:" pages"},ok:{text:"Confirm"}}},alertWin:{ok:{showError:{text:"Confirm"},showPrompt:{text:"Confirm"},showConfirm:{cancel:"Cancel",ok:"Confirm"}},title:{showError:{text:"Error Message"},showPrompt:{text:"Prompt Message"},showConfirm:{text:"Confirmation Messages"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}},toolCase:{toolBox:{text:"ToolBox"}},timers:{timerSetInterval:{text:"Timer"},timerBegin:{text:"Start"},timerStop:{text:"Pause"},again:{text:"Restart"}},dial:{turntable:{text:"Turntable"}},answers:{headerTopLeft:{text:"The answer is"},headerMiddel:{text:"Click the default answer"},beginAnswer:{text:"Begin to answer"},tureAccuracy:{text:"Accuracy"},trueAnswer:{text:"The right answer"},endAnswer:{text:"End of the answer"},restarting:{text:"Restart"},myAnswer:{text:"My Answer"},changeAnswer:{text:"Modify the answer"},selectAnswer:{text:"Please select at least one answer"},submitAnswer:{text:"Submit the answer"},numberOfAnswer:{text:"Number of answer"},PublishTheAnswer:{text:"Publish the answer"},published:{text:"Published"},details:{text:"Details"},statistics:{text:"Statistics"},student:{text:"Student"},TheSelectedTheAnswer:{text:"The selected the answer"},AnswerTime:{text:"Answer Time"},end:{text:"Please finish your questions first"}},responder:{responder:{text:"Responder"},begin:{text:"Start"},restart:{text:"Restart"},close:{text:"Close"},update:{text:"The current browser does not support canvas components please upgrade!"},inAnswer:{text:"In answer"},answer:{text:"Responder"},noContest:{text:"No contest"}},call:{fun:{page:{pageInteger:{text:"The page number entered must be integers."},pageMax:{text:"The page number entered is over!"},pageMin:{text:"The page number entered can't be less than 1."}}}}};t.default=a,e.exports=t.default},279:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}a(486),a(490),a(498),a(488),a(494),a(489),a(492),a(487),a(491),a(485),a(493),a(495),a(497),a(484),a(496),a(274),a(169),a(275),a(271);var r=a(235),i=n(r);(0,i.default)()},484:function(e,t){},485:484,486:484,487:484,488:484,489:484,490:484,491:484,492:484,493:484,494:484,495:484,496:484,497:484,498:484,618:function(e,t,a){function n(e){return a(r(e))}function r(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./i18_chinese.js":276,"./i18_complex.js":277,"./i18_english.js":278};n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id=618}});